{"ast":null,"code":"import { UntypedFormControl } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"./api.service\";\nvar LogService = /** @class */function () {\n  function LogService(_formBuilder, datePipe, api) {\n    this._formBuilder = _formBuilder;\n    this.datePipe = datePipe;\n    this.api = api;\n    this.fecha_hoy_dia = Date.now();\n    this.fecha_actual = new Date();\n    this.hora_actual = new Date();\n    this.logs = [];\n    this.userLogueado = [];\n  }\n  LogService.prototype.ngOnInit = function () {\n    //Called after the constructor, initializing input properties, and the first call to ngOnChanges.\n    //Add 'implements OnInit' to the class.\n  };\n  LogService.prototype.createFormLog = function (ventana, detalle, tipo) {\n    this.userLogueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\n    var usuario = this.userLogueado;\n    var hour = this.hora_actual.getHours();\n    var minuts = this.hora_actual.getMinutes();\n    var hora_actual_complete = hour + \":\" + minuts;\n    return this._formBuilder.group({\n      usuario: new UntypedFormControl(usuario),\n      fecha: new UntypedFormControl(this.datePipe.transform(this.fecha_hoy_dia, \"yyyy-MM-dd\")),\n      hora: new UntypedFormControl(hora_actual_complete),\n      entidad: new UntypedFormControl(\"SIAW\"),\n      codigo: new UntypedFormControl(\"\"),\n      id_doc: new UntypedFormControl(\"\"),\n      numeroid_doc: new UntypedFormControl(\"\"),\n      ventana: new UntypedFormControl(ventana),\n      detalle: new UntypedFormControl(detalle),\n      tipo: new UntypedFormControl(tipo)\n    });\n  };\n  LogService.prototype.createFormLogVentana = function (ventana, detalle) {\n    this.userLogueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\n    var usuario = this.userLogueado;\n    var hour = this.hora_actual.getHours();\n    var minuts = this.hora_actual.getMinutes();\n    var hora_actual_complete = hour + \":\" + minuts;\n    return this._formBuilder.group({\n      usuario: new UntypedFormControl(usuario),\n      fecha: new UntypedFormControl(this.datePipe.transform(this.fecha_hoy_dia, \"yyyy-MM-dd\")),\n      hora: new UntypedFormControl(hora_actual_complete),\n      entidad: new UntypedFormControl(\"SIAW\"),\n      codigo: new UntypedFormControl(\"\"),\n      id_doc: new UntypedFormControl(\"\"),\n      numeroid_doc: new UntypedFormControl(\"\"),\n      ventana: new UntypedFormControl(ventana),\n      detalle: new UntypedFormControl(detalle),\n      tipo: new UntypedFormControl(\"ruta\")\n    });\n  };\n  LogService.prototype.guardarLog = function (ventana, detalle, tipo) {\n    var _this = this;\n    this.logData = this.createFormLog(ventana, detalle, tipo);\n    var data = this.logData.value;\n    this.userConn = localStorage.getItem(\"user_conn\") !== undefined ? JSON.parse(localStorage.getItem(\"user_conn\")) : null;\n    var errorMessage = \"LOG Salio Error en guardar\" + \"Ruta:--  /LOG\";\n    return this.api.create(\"/seg_adm/logs/selog/\" + this.userConn, data).subscribe({\n      next: function (datav) {\n        _this.logs = datav;\n        console.log(\"LOG Guardados\");\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n      },\n      complete: function () {}\n    });\n  };\n  LogService.prototype.guardarVentana = function (ventana, detalle) {\n    var _this = this;\n    //ventana es el nombre de la ventana\n    //detalle es la ruta PATH que redireccionara\n    this.logData = this.createFormLogVentana(ventana, detalle);\n    var data = this.logData.value;\n    this.userConn = localStorage.getItem(\"user_conn\") !== undefined ? JSON.parse(localStorage.getItem(\"user_conn\")) : null;\n    var errorMessage = \"LOG Salio Error en guardar\" + \"Ruta:--  /LOG\";\n    return this.api.create(\"/seg_adm/logs/selog/\" + this.userConn, data).subscribe({\n      next: function (datav) {\n        _this.logs = datav;\n        console.log(\"LOG Guardados\");\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n      },\n      complete: function () {}\n    });\n  };\n  LogService.ɵfac = function LogService_Factory(t) {\n    return new (t || LogService)(i0.ɵɵinject(i1.FormBuilder), i0.ɵɵinject(i2.DatePipe), i0.ɵɵinject(i3.ApiService));\n  };\n  LogService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: LogService,\n    factory: LogService.ɵfac,\n    providedIn: 'root'\n  });\n  return LogService;\n}();\nexport { LogService };","map":{"version":3,"mappings":"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","names":["UntypedFormControl","_formBuilder","datePipe","api","Date","now","LogService","ventana","detalle","tipo","userLogueado","localStorage","getItem","undefined","JSON","parse","usuario","hour","hora_actual","getHours","minuts","getMinutes","hora_actual_complete","group","fecha","transform","fecha_hoy_dia","hora","entidad","codigo","id_doc","numeroid_doc","logData","createFormLog","data","value","userConn","errorMessage","create","subscribe","next","datav","_this","logs","console","log","error","err","complete","createFormLogVentana","factory","providedIn"],"sourceRoot":"","sources":["C:\\laragon\\www\\SIAW-Angular-B\\src\\app\\services\\log-service.service.ts"],"sourcesContent":["import { DatePipe } from '@angular/common';\r\nimport { Injectable } from '@angular/core';\r\nimport { FormBuilder, FormGroup, UntypedFormControl } from '@angular/forms';\r\nimport { ApiService } from './api.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LogService {\r\n\r\n  fecha_hoy_dia=Date.now();\r\n  fecha_actual = new Date();\r\n  hora_actual = new Date();\r\n  logs:any=[];\r\n  logData:FormGroup;\r\n  userLogueado:any=[];\r\n  userConn:any;\r\n\r\n  constructor(private _formBuilder: FormBuilder,private datePipe: DatePipe, private api:ApiService){\r\n\r\n  }\r\n\r\n  ngOnInit(){\r\n    //Called after the constructor, initializing input properties, and the first call to ngOnChanges.\r\n    //Add 'implements OnInit' to the class.\r\n  }\r\n\r\n  createFormLog(ventana:string, detalle:string, tipo:string): FormGroup {\r\n    this.userLogueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\r\n\r\n    const usuario = this.userLogueado;\r\n    let hour = this.hora_actual.getHours();\r\n    let minuts = this.hora_actual.getMinutes();\r\n    let hora_actual_complete = hour + \":\" + minuts;  \r\n\r\n    return this._formBuilder.group({\r\n      usuario: new UntypedFormControl(usuario),\r\n      fecha: new UntypedFormControl(this.datePipe.transform(this.fecha_hoy_dia,\"yyyy-MM-dd\")),\r\n      hora: new UntypedFormControl(hora_actual_complete),\r\n      entidad: new UntypedFormControl(\"SIAW\"),\r\n      codigo: new UntypedFormControl(\"\"),\r\n      id_doc: new UntypedFormControl(\"\"),\r\n      numeroid_doc: new UntypedFormControl(\"\"),\r\n      ventana: new UntypedFormControl(ventana),\r\n      detalle: new UntypedFormControl(detalle),\r\n      tipo: new UntypedFormControl(tipo),\r\n    });\r\n  } \r\n\r\n  createFormLogVentana(ventana:string, detalle:string): FormGroup {\r\n    this.userLogueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\r\n\r\n    const usuario = this.userLogueado;\r\n    let hour = this.hora_actual.getHours();\r\n    let minuts = this.hora_actual.getMinutes();\r\n    let hora_actual_complete = hour + \":\" + minuts;  \r\n\r\n    return this._formBuilder.group({\r\n      usuario: new UntypedFormControl(usuario),\r\n      fecha: new UntypedFormControl(this.datePipe.transform(this.fecha_hoy_dia,\"yyyy-MM-dd\")),\r\n      hora: new UntypedFormControl(hora_actual_complete),\r\n      entidad: new UntypedFormControl(\"SIAW\"),\r\n      codigo: new UntypedFormControl(\"\"),\r\n      id_doc: new UntypedFormControl(\"\"),\r\n      numeroid_doc: new UntypedFormControl(\"\"),\r\n      ventana: new UntypedFormControl(ventana),\r\n      detalle: new UntypedFormControl(detalle),\r\n      tipo: new UntypedFormControl(\"ruta\"),\r\n    });\r\n  } \r\n\r\n  guardarLog(ventana:string, detalle:string, tipo:string){\r\n    this.logData = this.createFormLog(ventana, detalle, tipo);\r\n    let data = this.logData.value;\r\n\r\n    this.userConn = localStorage.getItem(\"user_conn\") !== undefined ? JSON.parse(localStorage.getItem(\"user_conn\")) : null;\r\n\r\n    let errorMessage = \"LOG Salio Error en guardar\"+\"Ruta:--  /LOG\";\r\n    return this.api.create(\"/seg_adm/logs/selog/\"+this.userConn, data)\r\n      .subscribe({\r\n      next: (datav) => {\r\n        this.logs = datav;\r\n        console.log(\"LOG Guardados\");             \r\n      },\r\n\r\n      error: (err: any) => { \r\n        console.log(err, errorMessage);\r\n      },\r\n      complete: () => { }\r\n      })\r\n  }\r\n\r\n  guardarVentana(ventana:string, detalle:string){\r\n    //ventana es el nombre de la ventana\r\n    //detalle es la ruta PATH que redireccionara\r\n    this.logData = this.createFormLogVentana(ventana, detalle);\r\n    let data = this.logData.value;\r\n\r\n    this.userConn = localStorage.getItem(\"user_conn\") !== undefined ? JSON.parse(localStorage.getItem(\"user_conn\")) : null;\r\n\r\n    let errorMessage = \"LOG Salio Error en guardar\"+\"Ruta:--  /LOG\";\r\n    return this.api.create(\"/seg_adm/logs/selog/\"+this.userConn, data)\r\n      .subscribe({\r\n      next: (datav) => {\r\n        this.logs = datav;\r\n        console.log(\"LOG Guardados\");             \r\n      },\r\n\r\n      error: (err: any) => { \r\n        console.log(err, errorMessage);\r\n      },\r\n      complete: () => { }\r\n      })\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}