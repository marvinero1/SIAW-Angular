{"ast":null,"code":"import { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@services/log-service.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@services/api.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"ngx-toastr\";\nimport * as i6 from \"@angular/material/snack-bar\";\nimport * as i7 from \"@angular/material/button\";\nfunction VerificarCreditoDisponibleComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"p\");\n    i0.ɵɵtext(2, \"Para ver credito disponible seleccione: \\u00A0\");\n    i0.ɵɵelementStart(3, \"strong\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.message);\n  }\n}\nfunction VerificarCreditoDisponibleComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(3, \"div\", 5)(4, \"span\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(6, \"hr\");\n    i0.ɵɵelementStart(7, \"div\", 7)(8, \"div\", 8)(9, \"table\")(10, \"tr\")(11, \"td\", 9);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\", 10);\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"tr\")(17, \"td\", 9);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"td\", 10);\n    i0.ɵɵtext(20);\n    i0.ɵɵpipe(21, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"tr\")(23, \"td\", 9);\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"td\", 10);\n    i0.ɵɵtext(26);\n    i0.ɵɵpipe(27, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(28, \"tr\")(29, \"td\", 9);\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"td\", 10);\n    i0.ɵɵtext(32);\n    i0.ɵɵpipe(33, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(34, \"tr\")(35, \"td\", 9);\n    i0.ɵɵtext(36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"td\", 10);\n    i0.ɵɵtext(38);\n    i0.ɵɵpipe(39, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(40, \"tr\")(41, \"td\", 9);\n    i0.ɵɵtext(42);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"td\", 10);\n    i0.ɵɵtext(44);\n    i0.ɵɵpipe(45, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(46, \"hr\", 11);\n    i0.ɵɵelementStart(47, \"tr\")(48, \"td\");\n    i0.ɵɵtext(49);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(50, \"td\");\n    i0.ɵɵtext(51);\n    i0.ɵɵpipe(52, \"number\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    var ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"El Credito del Cliente o Agrupacion en Moneda: \", ctx_r2.credito_disponible.titulo, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.credito_disponible.subtitulo);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r2.credito_disponible.limite.text);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(15, 22, ctx_r2.credito_disponible.limite.sld, \"1.2-2\"), \" \", ctx_r2.limite_text, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.credito_disponible.anticipo.text);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(21, 25, ctx_r2.credito_disponible.anticipo.sld, \"1.2-2\"), \" \", ctx_r2.anticipo_text, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.credito_disponible.deuLoc.text);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(27, 28, ctx_r2.credito_disponible.deuLoc.sld, \"1.2-2\"), \" \", ctx_r2.deuLoc_text, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.credito_disponible.profApro.text);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(33, 31, ctx_r2.credito_disponible.profApro.sld, \"1.2-2\"), \" \", ctx_r2.profApro_text, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.credito_disponible.profApAgs.text);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(39, 34, ctx_r2.credito_disponible.profApro.sld, \"1.2-2\"), \" \", ctx_r2.profApAgs_text, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.credito_disponible.profAct.text);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(45, 37, ctx_r2.credito_disponible.profAct.sld, \"1.2-2\"), \" \", ctx_r2.profAct_text, \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.credito_disponible.saldo.text, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(52, 40, ctx_r2.credito_disponible.saldo.sld, \"1.2-2\"), \" \");\n  }\n}\nvar VerificarCreditoDisponibleComponent = /** @class */function () {\n  function VerificarCreditoDisponibleComponent(log_module, dialogRef, api, datePipe, toastr, _snackBar, cod_cliente, tipoPago, cod_moneda, totalProf) {\n    this.log_module = log_module;\n    this.dialogRef = dialogRef;\n    this.api = api;\n    this.datePipe = datePipe;\n    this.toastr = toastr;\n    this._snackBar = _snackBar;\n    this.cod_cliente = cod_cliente;\n    this.tipoPago = tipoPago;\n    this.cod_moneda = cod_moneda;\n    this.totalProf = totalProf;\n    this.fecha_actual = new Date();\n    this.dataform = '';\n    this.area = [];\n    this.credito_disponible = [];\n    this.validacion = false;\n    this.usuario_logueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\n    this.user_conn = localStorage.getItem(\"user_conn\") !== undefined ? JSON.parse(localStorage.getItem(\"user_conn\")) : null;\n    this.BD_storage = localStorage.getItem(\"bd_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"bd_logueado\")) : null;\n    this.cod_cliente_proforma = cod_cliente.cod_cliente;\n    this.cod_moneda_proforma = cod_moneda.cod_moneda;\n    this.totalProf = totalProf.totalProf;\n    this.tipo_de_pago_proforma = tipoPago.tipoPago;\n    console.log(this.cod_cliente_proforma, this.cod_moneda_proforma, this.totalProf);\n  }\n  VerificarCreditoDisponibleComponent.prototype.ngOnInit = function () {\n    this.getCreditoDisponible();\n    if (this.cod_cliente_proforma == undefined || this.cod_cliente_proforma == \"\") {\n      this.toastr.error('SELECCIONE CLIENTE ⚠️');\n      this.validacion = true;\n      return this.message = \"SELECCIONE CLIENTE\";\n    }\n    if (this.cod_moneda_proforma == undefined || this.cod_moneda_proforma == \"\") {\n      this.toastr.error('SELECCIONE MONEDA ⚠️');\n      this.validacion = true;\n      return this.message = \"SELECCIONE MONEDA\";\n    }\n    if (this.totalProf == undefined || this.totalProf == 0) {\n      this.toastr.error('EL TOTAL ES 0 O NO HAY TOTAL ⚠️');\n      this.validacion = true;\n      return this.message = \"EL TOTAL ES 0 O NO HAY TOTAL\";\n    }\n    if (this.tipo_de_pago_proforma == undefined || this.tipo_de_pago_proforma == \"CONTADO\") {\n      this.toastr.error('SELECCIONE TIPO DE PAGO EN LA PROFORMA ⚠️');\n      this.validacion = true;\n      return this.message = \"SELECCIONE TIPO DE PAGO EN LA PROFORMA\";\n    }\n  };\n  VerificarCreditoDisponibleComponent.prototype.getCreditoDisponible = function () {\n    var _this = this;\n    var fechareg = this.datePipe.transform(this.fecha_actual, \"yyyy-MM-dd\");\n    var errorMessage = \"La Ruta o el servidor presenta fallos al hacer peticion GET\";\n    return this.api.getAll('/venta/transac/veproforma/valCredDispCli/' + this.user_conn + \"/\" + this.cod_cliente_proforma + \"/\" + this.usuario_logueado + \"/\" + this.BD_storage.bd + \"/\" + this.cod_moneda_proforma + \"/\" + this.totalProf + \"/\" + fechareg).subscribe({\n      next: function (datav) {\n        _this.credito_disponible = datav;\n        console.log(_this.credito_disponible);\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n      },\n      complete: function () {\n        _this.limite_text = _this.credito_disponible.limite.text.slice(0, 3);\n        _this.anticipo_text = _this.credito_disponible.anticipo.text.slice(0, 3);\n        _this.deuLoc_text = _this.credito_disponible.deuLoc.text.slice(0, 3);\n        _this.profApro_text = _this.credito_disponible.profApro.text.slice(0, 3);\n        _this.profApAgs_text = _this.credito_disponible.profApro.text.slice(0, 3);\n        _this.profAct_text = _this.credito_disponible.profAct.text.slice(0, 3);\n      }\n    });\n  };\n  VerificarCreditoDisponibleComponent.prototype.close = function () {\n    this.dialogRef.close();\n  };\n  VerificarCreditoDisponibleComponent.ɵfac = function VerificarCreditoDisponibleComponent_Factory(t) {\n    return new (t || VerificarCreditoDisponibleComponent)(i0.ɵɵdirectiveInject(i1.LogService), i0.ɵɵdirectiveInject(i2.MatDialogRef), i0.ɵɵdirectiveInject(i3.ApiService), i0.ɵɵdirectiveInject(i4.DatePipe), i0.ɵɵdirectiveInject(i5.ToastrService), i0.ɵɵdirectiveInject(i6.MatSnackBar), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA));\n  };\n  VerificarCreditoDisponibleComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: VerificarCreditoDisponibleComponent,\n    selectors: [[\"app-verificar-credito-disponible\"]],\n    decls: 11,\n    vars: 2,\n    consts: [[1, \"content\", 2, \"background-color\", \"#ffffc0\", \"font-family\", \"'Courier New', Courier, monospace !important\"], [1, \"container-fluid\"], [1, \"p-2\"], [4, \"ngIf\", \"ngIfElse\"], [\"valid\", \"\"], [2, \"text-align\", \"center !important\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 1, \"btn\", \"btn-outline-primary\", \"form-control-sm\", \"mr-1\", 3, \"click\"], [1, \"row\"], [1, \"col-md\", 2, \"text-align\", \"justify !important\"], [1, \"td1\"], [1, \"th2\"], [2, \"width\", \"153% !important\"]],\n    template: function VerificarCreditoDisponibleComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵelement(3, \"hr\");\n        i0.ɵɵtemplate(4, VerificarCreditoDisponibleComponent_ng_container_4_Template, 5, 1, \"ng-container\", 3);\n        i0.ɵɵtemplate(5, VerificarCreditoDisponibleComponent_ng_template_5_Template, 53, 43, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementStart(7, \"div\", 5)(8, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function VerificarCreditoDisponibleComponent_Template_button_click_8_listener() {\n          return ctx.close();\n        });\n        i0.ɵɵelementStart(9, \"span\");\n        i0.ɵɵtext(10, \" Aceptar\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        var _r1 = i0.ɵɵreference(6);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.validacion)(\"ngIfElse\", _r1);\n      }\n    },\n    dependencies: [i4.NgIf, i7.MatButton, i4.DecimalPipe],\n    styles: [\".td1[_ngcontent-%COMP%] {\\n  text-align: left;\\n  padding-right: 60px;\\n}\\n\\n.th2[_ngcontent-%COMP%] {\\n  text-align: right;\\n}\\n/*# sourceURL=webpack://./src/app/components/mantenimiento/ventas/verificar-credito-disponible/verificar-credito-disponible.component.scss */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9tYW50ZW5pbWllbnRvL3ZlbnRhcy92ZXJpZmljYXItY3JlZGl0by1kaXNwb25pYmxlL3ZlcmlmaWNhci1jcmVkaXRvLWRpc3BvbmlibGUuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxnQkFBQTtFQUNBLG1CQUFBO0FBQ0o7O0FBQ0E7RUFDSSxpQkFBQTtBQUVKIiwic291cmNlc0NvbnRlbnQiOlsiLnRkMSB7XG4gIHRleHQtYWxpZ246IGxlZnQ7XG4gIHBhZGRpbmctcmlnaHQ6IDYwcHg7XG59XG5cbi50aDIge1xuICB0ZXh0LWFsaWduOiByaWdodDtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n  return VerificarCreditoDisponibleComponent;\n}();\nexport { VerificarCreditoDisponibleComponent };","map":{"version":3,"mappings":"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","names":["MAT_DIALOG_DATA","i0","log_module","dialogRef","api","datePipe","toastr","_snackBar","cod_cliente","tipoPago","cod_moneda","totalProf","Date","usuario_logueado","localStorage","getItem","undefined","JSON","parse","user_conn","BD_storage","cod_cliente_proforma","cod_moneda_proforma","tipo_de_pago_proforma","console","log","VerificarCreditoDisponibleComponent","getCreditoDisponible","error","validacion","message","fechareg","transform","fecha_actual","errorMessage","getAll","bd","subscribe","next","datav","_this","credito_disponible","err","complete","limite_text","limite","text","slice","anticipo_text","anticipo","deuLoc_text","deuLoc","profApro_text","profApro","profApAgs_text","profAct_text","profAct","close","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\laragon\\www\\SIAW-Angular-B\\src\\app\\components\\mantenimiento\\ventas\\verificar-credito-disponible\\verificar-credito-disponible.component.ts","C:\\laragon\\www\\SIAW-Angular-B\\src\\app\\components\\mantenimiento\\ventas\\verificar-credito-disponible\\verificar-credito-disponible.component.html"],"sourcesContent":["import { DatePipe } from '@angular/common';\nimport { Component, Inject, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { ApiService } from '@services/api.service';\nimport { LogService } from '@services/log-service.service';\nimport { ToastrService } from 'ngx-toastr';\n@Component({\n  selector: 'app-verificar-credito-disponible',\n  templateUrl: './verificar-credito-disponible.component.html',\n  styleUrls: ['./verificar-credito-disponible.component.scss']\n})\nexport class VerificarCreditoDisponibleComponent implements OnInit {\n\n  fecha_actual = new Date();\n  dataform: any = '';\n  area: any = [];\n  credito_disponible: any = [];\n  usuario_logueado: any;\n  user_conn: any;\n  BD_storage: any;\n  validacion: boolean = false;\n\n  cod_cliente_proforma: any;\n  cod_moneda_proforma: any;\n  totalProf_proforma: any;\n  tipo_de_pago_proforma: any;\n\n  limite_text: string;\n  anticipo_text: string;\n  deuLoc_text: string;\n  profApro_text: string;\n  profApAgs_text: string;\n  profAct_text: string;\n  message: string;\n\n  constructor(public log_module: LogService, public dialogRef: MatDialogRef<VerificarCreditoDisponibleComponent>,\n    private api: ApiService, private datePipe: DatePipe, private toastr: ToastrService, public _snackBar: MatSnackBar,\n    @Inject(MAT_DIALOG_DATA) public cod_cliente: any, @Inject(MAT_DIALOG_DATA) public tipoPago: any,\n    @Inject(MAT_DIALOG_DATA) public cod_moneda: any,\n    @Inject(MAT_DIALOG_DATA) public totalProf: any) {\n\n    this.usuario_logueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\n    this.user_conn = localStorage.getItem(\"user_conn\") !== undefined ? JSON.parse(localStorage.getItem(\"user_conn\")) : null;\n    this.BD_storage = localStorage.getItem(\"bd_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"bd_logueado\")) : null;\n\n    this.cod_cliente_proforma = cod_cliente.cod_cliente;\n    this.cod_moneda_proforma = cod_moneda.cod_moneda;\n    this.totalProf = totalProf.totalProf;\n    this.tipo_de_pago_proforma = tipoPago.tipoPago;\n\n    console.log(this.cod_cliente_proforma, this.cod_moneda_proforma, this.totalProf);\n  }\n\n  ngOnInit() {\n    this.getCreditoDisponible();\n\n    if (this.cod_cliente_proforma == undefined || this.cod_cliente_proforma == \"\") {\n      this.toastr.error('SELECCIONE CLIENTE ⚠️');\n      this.validacion = true;\n      return this.message = \"SELECCIONE CLIENTE\"\n    }\n    if (this.cod_moneda_proforma == undefined || this.cod_moneda_proforma == \"\") {\n      this.toastr.error('SELECCIONE MONEDA ⚠️');\n      this.validacion = true;\n      return this.message = \"SELECCIONE MONEDA\"\n    }\n    if (this.totalProf == undefined || this.totalProf == 0) {\n      this.toastr.error('EL TOTAL ES 0 O NO HAY TOTAL ⚠️');\n      this.validacion = true;\n      return this.message = \"EL TOTAL ES 0 O NO HAY TOTAL\"\n    }\n    if (this.tipo_de_pago_proforma == undefined || this.tipo_de_pago_proforma == \"CONTADO\") {\n      this.toastr.error('SELECCIONE TIPO DE PAGO EN LA PROFORMA ⚠️');\n      this.validacion = true;\n      return this.message = \"SELECCIONE TIPO DE PAGO EN LA PROFORMA\"\n    }\n  }\n\n  getCreditoDisponible() {\n    let fechareg = this.datePipe.transform(this.fecha_actual, \"yyyy-MM-dd\");\n    let errorMessage = \"La Ruta o el servidor presenta fallos al hacer peticion GET\";\n    return this.api.getAll('/venta/transac/veproforma/valCredDispCli/' + this.user_conn + \"/\" + this.cod_cliente_proforma + \"/\" +\n      this.usuario_logueado + \"/\" + this.BD_storage.bd + \"/\" + this.cod_moneda_proforma + \"/\" + this.totalProf + \"/\" + fechareg)\n      .subscribe({\n        next: (datav) => {\n          this.credito_disponible = datav;\n          console.log(this.credito_disponible);\n        },\n\n        error: (err: any) => {\n          console.log(err, errorMessage);\n        },\n        complete: () => {\n          this.limite_text = this.credito_disponible.limite.text.slice(0, 3);\n          this.anticipo_text = this.credito_disponible.anticipo.text.slice(0, 3);\n          this.deuLoc_text = this.credito_disponible.deuLoc.text.slice(0, 3);\n          this.profApro_text = this.credito_disponible.profApro.text.slice(0, 3);\n          this.profApAgs_text = this.credito_disponible.profApro.text.slice(0, 3);\n          this.profAct_text = this.credito_disponible.profAct.text.slice(0, 3);\n        }\n      })\n  }\n\n  close(): void {\n    this.dialogRef.close();\n  }\n}\n","<section class=\"content\" style=\"background-color: #ffffc0;font-family: 'Courier New', Courier, monospace !important;\">\n  <div class=\"container-fluid\">\n    <div class=\"p-2\">\n      <hr>\n      <ng-container *ngIf=\"validacion;else valid\">\n        <p>Para ver credito disponible seleccione: &nbsp;<strong>{{ message }}</strong></p>\n      </ng-container>\n      <ng-template #valid>\n        <div style=\"text-align: center !important;\">\n          <span>El Credito del Cliente o Agrupacion en Moneda: {{ credito_disponible.titulo }}</span>\n        </div>\n        <div style=\"text-align: center !important;\">\n          <span>{{ credito_disponible.subtitulo }}</span>\n        </div>\n        <hr>\n\n        <div class=\"row\">\n          <div class=\"col-md\" style=\"text-align: justify !important;\">\n            <table>\n              <tr>\n                <td class=\"td1\">{{ credito_disponible.limite.text }}</td>\n                <td class=\"th2\">{{ credito_disponible.limite.sld | number: '1.2-2' }} {{ limite_text }}</td>\n              </tr>\n              <tr>\n                <td class=\"td1\">{{ credito_disponible.anticipo.text }}</td>\n                <td class=\"th2\">{{ credito_disponible.anticipo.sld | number: '1.2-2' }} {{ anticipo_text }}</td>\n              </tr>\n              <tr>\n                <td class=\"td1\">{{ credito_disponible.deuLoc.text }}</td>\n                <td class=\"th2\">{{ credito_disponible.deuLoc.sld | number: '1.2-2' }} {{ deuLoc_text }}</td>\n              </tr>\n              <!-- <tr>\n              <td class=\"td1\">{{ credito_disponible.limite.text }}</td>\n              <td class=\"th2\">{{ credito_disponible.limite.sld | number: '1.2-2'}}</td>\n            </tr> -->\n              <!-- <tr>\n              <td class=\"td1\">{{ credito_disponible.anticipo.text }}</td>\n              <td class=\"th2\">{{ credito_disponible.anticipo.sld | number: '1.2-2'}}</td>\n            </tr> -->\n              <tr>\n                <td class=\"td1\">{{ credito_disponible.profApro.text }}</td>\n                <td class=\"th2\">{{ credito_disponible.profApro.sld | number: '1.2-2'}} {{ profApro_text }}</td>\n              </tr>\n              <tr>\n                <td class=\"td1\">{{ credito_disponible.profApAgs.text }}</td>\n                <td class=\"th2\">{{ credito_disponible.profApro.sld | number: '1.2-2' }} {{ profApAgs_text }}</td>\n              </tr>\n              <tr>\n                <td class=\"td1\">{{ credito_disponible.profAct.text }}</td>\n                <td class=\"th2\">{{ credito_disponible.profAct.sld | number: '1.2-2'}} {{ profAct_text }}</td>\n              </tr>\n\n              <hr style=\"width: 153% !important;\">\n              <tr>\n                <td>{{ credito_disponible.saldo.text }} </td>\n                <td>{{ credito_disponible.saldo.sld | number: '1.2-2' }} </td>\n              </tr>\n            </table>\n          </div>\n        </div>\n      </ng-template>\n      <div style=\"text-align: center !important;\">\n        <button mat-raised-button class=\"btn btn-outline-primary form-control-sm mr-1\" type=\"button\" (click)=\"close();\">\n          <span> Aceptar</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</section>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}