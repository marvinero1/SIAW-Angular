{"ast":null,"code":"import { ModalPrecioVentaComponent } from '@components/mantenimiento/ventas/modal-precio-venta/modal-precio-venta.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@services/api.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"ngx-toastr\";\nimport * as i5 from \"@services/log-service.service\";\nimport * as i6 from \"@components/mantenimiento/ventas/servicioprecioventa/servicioprecioventa.service\";\nvar ActualizarPrecioItemComponent = /** @class */function () {\n  function ActualizarPrecioItemComponent(api, dialog, _formBuilder, toastr, log_module, servicioPrecioVenta) {\n    this.api = api;\n    this.dialog = dialog;\n    this._formBuilder = _formBuilder;\n    this.toastr = toastr;\n    this.log_module = log_module;\n    this.servicioPrecioVenta = servicioPrecioVenta;\n    this.fecha_actual = new Date();\n    this.hora_actual = new Date();\n    this.dataform = '';\n    this.tarifa_save = [];\n    this.codigo_item_catalogo = [];\n    this.cod_precio_venta_modal = [];\n    this.codigo_item_catalogo_get = [];\n    this.nombre_ventana = \"prgindefinir_precioitem.vb\";\n    this.ventana = \"PrecioItem\";\n    this.detalle = \"PrecioItem-UPDATE\";\n    this.tipo = \"PrecioItem-UPDATE\";\n    var usuarioLogueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\n    this.api.getRolUserParaVentana(usuarioLogueado, this.nombre_ventana);\n    this.FormularioData = this.createForm();\n  }\n  ActualizarPrecioItemComponent.prototype.ngOnInit = function () {\n    var _this = this;\n    this.servicioPrecioVenta.disparadorDePrecioVenta.subscribe(function (data) {\n      console.log(\"Recibiendo Precio Venta: \", data);\n      _this.cod_precio_venta_modal = data.precio_venta;\n    });\n  };\n  ActualizarPrecioItemComponent.prototype.createForm = function () {\n    var usuario_logueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\n    var hour = this.hora_actual.getHours();\n    var minuts = this.hora_actual.getMinutes();\n    var hora_actual_complete = hour + \":\" + minuts;\n    return this._formBuilder.group({\n      item: [this.dataform.item],\n      codtarifa: [this.dataform.codtarifa],\n      precio: [this.dataform.precio]\n    });\n  };\n  ActualizarPrecioItemComponent.prototype.submitData = function () {\n    var _this = this;\n    var data = this.FormularioData.value;\n    var errorMessage = \"La Ruta presenta fallos al hacer la creacion\" + \"Ruta:- /inventario/oper/prgcrearinv/\";\n    console.log(data);\n    return this.api.update(\"/inventario/oper/prgindefinir_precioitem/updateTarifa1/\" + this.userConn, data).subscribe({\n      next: function (datav) {\n        _this.tarifa_save = datav;\n        _this.log_module.guardarLog(_this.ventana, _this.detalle, _this.tipo);\n        _this.toastr.success('Guardado con Exito! ðŸŽ‰');\n        location.reload();\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n        _this.toastr.error('! NO SE GUARDO !');\n      },\n      complete: function () {}\n    });\n  };\n  ActualizarPrecioItemComponent.prototype.modalPrecioTipo = function () {\n    this.dialog.open(ModalPrecioVentaComponent, {\n      width: 'auto',\n      height: 'auto'\n    });\n  };\n  ActualizarPrecioItemComponent.Éµfac = function ActualizarPrecioItemComponent_Factory(t) {\n    return new (t || ActualizarPrecioItemComponent)(i0.ÉµÉµdirectiveInject(i1.ApiService), i0.ÉµÉµdirectiveInject(i2.MatDialog), i0.ÉµÉµdirectiveInject(i3.FormBuilder), i0.ÉµÉµdirectiveInject(i4.ToastrService), i0.ÉµÉµdirectiveInject(i5.LogService), i0.ÉµÉµdirectiveInject(i6.ServicioprecioventaService));\n  };\n  ActualizarPrecioItemComponent.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n    type: ActualizarPrecioItemComponent,\n    selectors: [[\"app-actualizar-precio-item\"]],\n    decls: 0,\n    vars: 0,\n    template: function ActualizarPrecioItemComponent_Template(rf, ctx) {},\n    styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n  return ActualizarPrecioItemComponent;\n}();\nexport { ActualizarPrecioItemComponent };","map":{"version":3,"mappings":"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","names":["ModalPrecioVentaComponent","api","dialog","_formBuilder","toastr","log_module","servicioPrecioVenta","Date","usuarioLogueado","localStorage","getItem","undefined","JSON","parse","getRolUserParaVentana","nombre_ventana","FormularioData","createForm","ActualizarPrecioItemComponent","disparadorDePrecioVenta","subscribe","console","log","data","_this","cod_precio_venta_modal","precio_venta","usuario_logueado","hour","hora_actual","getHours","minuts","getMinutes","hora_actual_complete","group","item","dataform","codtarifa","precio","value","errorMessage","update","userConn","next","datav","tarifa_save","guardarLog","ventana","detalle","tipo","success","location","reload","error","err","complete","open","width","height","selectors","decls","vars","template","styles"],"sourceRoot":"","sources":["C:\\laragon\\www\\SIAW-Angular-B\\src\\app\\components\\inventario\\operaciones\\precio-item\\actualizar-precio-item\\actualizar-precio-item.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ModalPrecioVentaComponent } from '@components/mantenimiento/ventas/modal-precio-venta/modal-precio-venta.component';\r\nimport { ServicioprecioventaService } from '@components/mantenimiento/ventas/servicioprecioventa/servicioprecioventa.service';\r\nimport { ApiService } from '@services/api.service';\r\nimport { LogService } from '@services/log-service.service';\r\nimport { ToastrService } from 'ngx-toastr';\r\n\r\n@Component({\r\n  selector: 'app-actualizar-precio-item',\r\n  templateUrl: './actualizar-precio-item.component.html',\r\n  styleUrls: ['./actualizar-precio-item.component.scss']\r\n})\r\nexport class ActualizarPrecioItemComponent implements OnInit {\r\n\r\n  FormularioData:FormGroup;\r\n  fecha_actual = new Date();\r\n  hora_actual = new Date();\r\n  dataform:any='';\r\n  userConn:any;\r\n\r\n  tarifa_save:any=[];\r\n  codigo_item_catalogo:any=[];\r\n  cod_precio_venta_modal:any=[];\r\n  codigo_item_catalogo_get:any=[];\r\n\r\n  nombre_ventana:string=\"prgindefinir_precioitem.vb\";\r\n\r\n  public ventana=\"PrecioItem\"\r\n  public detalle=\"PrecioItem-UPDATE\";\r\n  public tipo=\"PrecioItem-UPDATE\";\r\n  \r\n  constructor(private api:ApiService, public dialog: MatDialog, private _formBuilder: FormBuilder, private toastr: ToastrService,\r\n     public log_module:LogService, public servicioPrecioVenta:ServicioprecioventaService ){ \r\n      \r\n    let usuarioLogueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\r\n    this.api.getRolUserParaVentana(usuarioLogueado, this.nombre_ventana);\r\n\r\n    this.FormularioData = this.createForm();\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n     this.servicioPrecioVenta.disparadorDePrecioVenta.subscribe(data =>{\r\n      console.log(\"Recibiendo Precio Venta: \", data);\r\n      this.cod_precio_venta_modal = data.precio_venta;\r\n    });\r\n  }\r\n\r\n  createForm(): FormGroup{\r\n    let usuario_logueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\r\n\r\n    let hour = this.hora_actual.getHours();\r\n    let minuts = this.hora_actual.getMinutes();\r\n    let hora_actual_complete = hour + \":\" + minuts;\r\n  \r\n    return this._formBuilder.group({\r\n      item: [this.dataform.item],\r\n      codtarifa: [this.dataform.codtarifa],\r\n      precio: [this.dataform.precio],\r\n    });\r\n  }\r\n\r\n  submitData(){\r\n    let data = this.FormularioData.value;\r\n    let errorMessage = \"La Ruta presenta fallos al hacer la creacion\"+\"Ruta:- /inventario/oper/prgcrearinv/\";\r\n    console.log(data);\r\n    \r\n    return this.api.update(\"/inventario/oper/prgindefinir_precioitem/updateTarifa1/\"+this.userConn, data)\r\n      .subscribe({\r\n        next: (datav) => {\r\n          this.tarifa_save = datav;\r\n        \r\n          this.log_module.guardarLog(this.ventana,this.detalle, this.tipo);\r\n          this.toastr.success('Guardado con Exito! ðŸŽ‰');\r\n\r\n          location.reload();\r\n        },\r\n    \r\n        error: (err) => { \r\n          console.log(err, errorMessage);\r\n          this.toastr.error('! NO SE GUARDO !');\r\n        },\r\n        complete: () => { }\r\n      })\r\n  }\r\n\r\n  modalPrecioTipo(): void {\r\n    this.dialog.open(ModalPrecioVentaComponent, {\r\n      width: 'auto',\r\n      height: 'auto',\r\n    });\r\n  }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}