{"ast":null,"code":"import { SelectionModel } from '@angular/cdk/collections';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { MatTableDataSource } from '@angular/material/table';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@services/api.service\";\nimport * as i3 from \"../services-refresh-item/service-refresh-items.service\";\nimport * as i4 from \"@services/log-service.service\";\nimport * as i5 from \"ngx-toastr\";\nimport * as i6 from \"ngx-spinner\";\nimport * as i7 from \"@angular/material/table\";\nimport * as i8 from \"@angular/forms\";\nimport * as i9 from \"@angular/material/button\";\nimport * as i10 from \"@angular/material/card\";\nimport * as i11 from \"@angular/material/checkbox\";\nimport * as i12 from \"@angular/material/icon\";\nimport * as i13 from \"@angular/material/sort\";\nvar _c0 = [\"paginator\"];\nvar _c1 = [\"paginatorPageSize\"];\nfunction ConsolidarInventarioComponent_th_17_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r11 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"th\", 25)(1, \"mat-checkbox\", 26);\n    i0.ÉµÉµlistener(\"ngModelChange\", function ConsolidarInventarioComponent_th_17_Template_mat_checkbox_ngModelChange_1_listener($event) {\n      i0.ÉµÉµrestoreView(_r11);\n      var ctx_r10 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r10.allSelected = $event);\n    })(\"change\", function ConsolidarInventarioComponent_th_17_Template_mat_checkbox_change_1_listener() {\n      i0.ÉµÉµrestoreView(_r11);\n      var ctx_r12 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r12.checkUncheckAll());\n    });\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    var ctx_r0 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngModel\", ctx_r0.allSelected);\n  }\n}\nfunction ConsolidarInventarioComponent_td_18_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r15 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"td\", 27)(1, \"mat-checkbox\", 26);\n    i0.ÉµÉµlistener(\"ngModelChange\", function ConsolidarInventarioComponent_td_18_Template_mat_checkbox_ngModelChange_1_listener($event) {\n      var restoredCtx = i0.ÉµÉµrestoreView(_r15);\n      var element_r13 = restoredCtx.$implicit;\n      return i0.ÉµÉµresetView(element_r13.consolidado = $event);\n    })(\"change\", function ConsolidarInventarioComponent_td_18_Template_mat_checkbox_change_1_listener() {\n      var restoredCtx = i0.ÉµÉµrestoreView(_r15);\n      var element_r13 = restoredCtx.$implicit;\n      var ctx_r16 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r16.isAllSelected(element_r13));\n    });\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    var element_r13 = ctx.$implicit;\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngModel\", element_r13.consolidado);\n  }\n}\nfunction ConsolidarInventarioComponent_th_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"th\", 25);\n    i0.ÉµÉµtext(1, \" C\\u00F3digo \");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ConsolidarInventarioComponent_td_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"td\", 28);\n    i0.ÉµÉµtext(1);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    var element_r17 = ctx.$implicit;\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµtextInterpolate1(\" \", element_r17.codigo, \" \");\n  }\n}\nfunction ConsolidarInventarioComponent_th_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"th\", 25);\n    i0.ÉµÉµtext(1, \" # Grupo \");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ConsolidarInventarioComponent_td_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"td\", 28);\n    i0.ÉµÉµtext(1);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    var element_r18 = ctx.$implicit;\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµtextInterpolate1(\"\", element_r18.nro, \" \");\n  }\n}\nfunction ConsolidarInventarioComponent_th_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"th\", 25);\n    i0.ÉµÉµtext(1, \" Observaciones \");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ConsolidarInventarioComponent_td_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"td\", 28);\n    i0.ÉµÉµtext(1);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    var element_r19 = ctx.$implicit;\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµtextInterpolate1(\"\", element_r19.obs, \" \");\n  }\n}\nfunction ConsolidarInventarioComponent_tr_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelement(0, \"tr\", 29);\n  }\n}\nfunction ConsolidarInventarioComponent_tr_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelement(0, \"tr\", 30);\n  }\n}\nvar ConsolidarInventarioComponent = /** @class */function () {\n  function ConsolidarInventarioComponent(dialog, dialogRef, api, dataInventario, items_consolidar, refreshItemSer, log_module, toastr, spinner) {\n    this.dialog = dialog;\n    this.dialogRef = dialogRef;\n    this.api = api;\n    this.dataInventario = dataInventario;\n    this.items_consolidar = items_consolidar;\n    this.refreshItemSer = refreshItemSer;\n    this.log_module = log_module;\n    this.toastr = toastr;\n    this.spinner = spinner;\n    this.dataConsolidar = [];\n    this.postConsolidar = [];\n    this.allSelected = false;\n    this.data_cabezera = [];\n    this.data_items = [];\n    this.cabecera = [];\n    this.items = [];\n    this.nombre_ventana = \"prgconsolinv.vb\";\n    this.displayedColumns = ['consolidado', 'codigo', 'grupo', 'observaciones'];\n    this.dataSource = new MatTableDataSource();\n    this.dataSourceWithPageSize = new MatTableDataSource();\n    this.selection = new SelectionModel(true, []);\n    this.ventana = \"consolidar-inventario\";\n    this.detalle = \"consolidar-inventario-REFRESH\";\n    this.tipo = \"consolidar-inventario-REFRESH\";\n    this.data_cabezera = this.dataInventario.dataInventario;\n    this.data_items = this.items_consolidar.items_consolidar;\n    console.log(this.data_cabezera, this.data_items);\n    this.userConn = localStorage.getItem(\"user_conn\") !== undefined ? JSON.parse(localStorage.getItem(\"user_conn\")) : null;\n  }\n  ConsolidarInventarioComponent.prototype.ngOnInit = function () {\n    this.getData();\n    this.cargarCabecera();\n  };\n  ConsolidarInventarioComponent.prototype.getData = function () {\n    var _this = this;\n    var errorMessage = \"La Ruta presenta fallos al hacer peticion GET /inventario/oper/prgconsolinv/\";\n    return this.api.getAll('/inventario/oper/prgconsolinv/' + this.userConn + \"/\" + this.data_cabezera.codigo).subscribe({\n      next: function (datav) {\n        _this.data = datav;\n        console.log(_this.data);\n        _this.dataSource = new MatTableDataSource(_this.data);\n        _this.dataSource.paginator = _this.paginator;\n        _this.dataSourceWithPageSize.paginator = _this.paginatorPageSize;\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n        _this.toastr.error('! ERROR CABECERA !');\n      },\n      complete: function () {}\n    });\n  };\n  ConsolidarInventarioComponent.prototype.cargarCabecera = function () {\n    var _this = this;\n    var errorMessage = \"La Ruta presenta fallos al hacer peticion GET\";\n    return this.api.getAll('/inventario/oper/docininvconsol/cargarCabecera/' + this.userConn + \"/\" + this.data_cabezera.id + \"/\" + this.data_cabezera.numeroid).subscribe({\n      next: function (datav) {\n        _this.cabecera = datav;\n        console.log(_this.cabecera);\n        _this.cargarTablaItems(_this.cabecera.codigo);\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n        _this.toastr.error('! ERROR CABECERA !');\n      },\n      complete: function () {}\n    });\n  };\n  ConsolidarInventarioComponent.prototype.cargarTablaItems = function (codigo) {\n    var _this = this;\n    var errorMessage = \"La Ruta presenta fallos al hacer peticion GET --/inventario/mant/inalmacen/catalogo/\";\n    return this.api.getAll('/inventario/oper/docininvconsol/mostrardetalle/' + this.userConn + \"/\" + codigo).subscribe({\n      next: function (datav) {\n        _this.items = datav;\n        console.log(_this.items);\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n      },\n      complete: function () {}\n    });\n  };\n  ConsolidarInventarioComponent.prototype.consolidar = function () {\n    var _this = this;\n    console.log(this.data);\n    var data_save = {\n      \"data_consolinv\": this.data,\n      \"detalleInvConsol\": this.items\n    };\n    console.log(data_save);\n    var errorMessage = \"La Ruta presenta fallos al hacer la creacion\" + \"Ruta:- /inventario/oper/prgconsolinv/\";\n    return this.api.create('/inventario/oper/prgconsolinv/' + this.userConn + \"/\" + this.data_cabezera.codigo, data_save).subscribe({\n      next: function (datav) {\n        _this.postConsolidar = datav;\n        _this.toastr.success('!GUARDADO EXITOSAMENTE!');\n        _this.log_module.guardarLog(_this.ventana, _this.detalle, _this.tipo);\n        _this.close();\n        _this.spinner.show();\n        setTimeout(function () {\n          _this.spinner.hide();\n        }, 1500);\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n        _this.toastr.error('! NO SE GUARDO !');\n      },\n      complete: function () {}\n    });\n  };\n  ConsolidarInventarioComponent.prototype.checkUncheckAll = function () {\n    var tama = this.data.length;\n    for (var i = 0; i < tama; i++) {\n      this.data[i].consolidado = this.allSelected;\n    }\n    // mapeo que cambia un valor de un array\n    this.data.map(function (dato) {\n      console.log(dato);\n      if (dato.consolidado = \"true\") {\n        dato.consolidado = \"false\";\n        this.dataSource = new MatTableDataSource(this.data);\n        this.dataSourceWithPageSize.paginator = this.paginatorPageSize;\n      } else {\n        dato.consolidado = \"true\";\n        this.dataSource = new MatTableDataSource(this.data);\n        this.dataSourceWithPageSize.paginator = this.paginatorPageSize;\n      }\n      return dato;\n    });\n  };\n  ConsolidarInventarioComponent.prototype.isAllSelected = function (data) {\n    console.log(data);\n    this.allSelected = this.data.every(function (item) {\n      return item.consolidado == true;\n    });\n  };\n  ConsolidarInventarioComponent.prototype.toggleAllSelection = function () {\n    console.log(\"SELECT ALL\");\n    // if (this.allSelected) {\n    //   this.select.options.forEach((item: MatOption) => item.select());\n    // } else {\n    //   this.select.options.forEach((item: MatOption) => item.deselect());\n    // }\n  };\n\n  ConsolidarInventarioComponent.prototype.close = function () {\n    this.dialogRef.close();\n    this.refreshItemSer.callItemFunction();\n  };\n  ConsolidarInventarioComponent.Éµfac = function ConsolidarInventarioComponent_Factory(t) {\n    return new (t || ConsolidarInventarioComponent)(i0.ÉµÉµdirectiveInject(i1.MatDialog), i0.ÉµÉµdirectiveInject(i1.MatDialogRef), i0.ÉµÉµdirectiveInject(i2.ApiService), i0.ÉµÉµdirectiveInject(MAT_DIALOG_DATA), i0.ÉµÉµdirectiveInject(MAT_DIALOG_DATA), i0.ÉµÉµdirectiveInject(i3.ServiceRefreshItemsService), i0.ÉµÉµdirectiveInject(i4.LogService), i0.ÉµÉµdirectiveInject(i5.ToastrService), i0.ÉµÉµdirectiveInject(i6.NgxSpinnerService));\n  };\n  ConsolidarInventarioComponent.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n    type: ConsolidarInventarioComponent,\n    selectors: [[\"app-consolidar-inventario\"]],\n    viewQuery: function ConsolidarInventarioComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ÉµÉµviewQuery(_c0, 5);\n        i0.ÉµÉµviewQuery(_c1, 5);\n      }\n      if (rf & 2) {\n        var _t = void 0;\n        i0.ÉµÉµqueryRefresh(_t = i0.ÉµÉµloadQuery()) && (ctx.paginator = _t.first);\n        i0.ÉµÉµqueryRefresh(_t = i0.ÉµÉµloadQuery()) && (ctx.paginatorPageSize = _t.first);\n      }\n    },\n    decls: 39,\n    vars: 4,\n    consts: [[1, \"p-2\"], [2, \"background-color\", \"#f0f0f0\", \"height\", \"90vh !important\"], [1, \"col\"], [2, \"float\", \"right\"], [\"color\", \"primary\", 3, \"click\"], [2, \"height\", \"50vh !important\"], [1, \"row\"], [1, \"col-lg\"], [1, \"team\", \"p-2\", \"scrollmenu\"], [1, \"col-lg-12\", \"pr-lg-4\", 2, \"width\", \"100%\", \"overflow-x\", \"auto\", \"height\", \"73vh !important\"], [\"mat-table\", \"\", \"multiTemplateDataRows\", \"\", \"matSort\", \"\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"consolidado\"], [\"mat-header-cell\", \"\", \"class\", \"th1\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"codigo\"], [\"mat-cell\", \"\", \"style\", \"text-align: center;\", 4, \"matCellDef\"], [\"matColumnDef\", \"grupo\"], [\"matColumnDef\", \"observaciones\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"mat-dialog-actions\", \"\", \"align\", \"end\", 1, \"mat-dialog-actions\"], [\"mat-raised-button\", \"\", 1, \"secondary\", 3, \"click\"], [1, \"fa\", \"fa-cog\"], [\"bdColor\", \"rgba(251, 216, 0, 0.8)\", \"size\", \"large\", \"color\", \"#093070\", \"type\", \"square-loader\", 3, \"fullScreen\"], [2, \"font-size\", \"25px\", \"color\", \"rgb(9,48,112,)\"], [\"mat-header-cell\", \"\", 1, \"th1\"], [3, \"ngModel\", \"ngModelChange\", \"change\"], [\"mat-cell\", \"\"], [\"mat-cell\", \"\", 2, \"text-align\", \"center\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n    template: function ConsolidarInventarioComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ÉµÉµelementStart(0, \"div\", 0)(1, \"mat-card\", 1)(2, \"mat-card-header\")(3, \"mat-card-title\")(4, \"strong\");\n        i0.ÉµÉµtext(5, \"A\\u00F1adir Items al Documento\");\n        i0.ÉµÉµelementEnd()();\n        i0.ÉµÉµelementStart(6, \"div\", 2)(7, \"div\", 3)(8, \"mat-icon\", 4);\n        i0.ÉµÉµlistener(\"click\", function ConsolidarInventarioComponent_Template_mat_icon_click_8_listener() {\n          return ctx.close();\n        });\n        i0.ÉµÉµtext(9, \"close\");\n        i0.ÉµÉµelementEnd()()()();\n        i0.ÉµÉµelementStart(10, \"mat-card-content\", 5)(11, \"div\", 6)(12, \"div\", 7)(13, \"div\", 8)(14, \"div\", 9)(15, \"table\", 10);\n        i0.ÉµÉµelementContainerStart(16, 11);\n        i0.ÉµÉµtemplate(17, ConsolidarInventarioComponent_th_17_Template, 2, 1, \"th\", 12);\n        i0.ÉµÉµtemplate(18, ConsolidarInventarioComponent_td_18_Template, 2, 1, \"td\", 13);\n        i0.ÉµÉµelementContainerEnd();\n        i0.ÉµÉµelementContainerStart(19, 14);\n        i0.ÉµÉµtemplate(20, ConsolidarInventarioComponent_th_20_Template, 2, 0, \"th\", 12);\n        i0.ÉµÉµtemplate(21, ConsolidarInventarioComponent_td_21_Template, 2, 1, \"td\", 15);\n        i0.ÉµÉµelementContainerEnd();\n        i0.ÉµÉµelementContainerStart(22, 16);\n        i0.ÉµÉµtemplate(23, ConsolidarInventarioComponent_th_23_Template, 2, 0, \"th\", 12);\n        i0.ÉµÉµtemplate(24, ConsolidarInventarioComponent_td_24_Template, 2, 1, \"td\", 15);\n        i0.ÉµÉµelementContainerEnd();\n        i0.ÉµÉµelementContainerStart(25, 17);\n        i0.ÉµÉµtemplate(26, ConsolidarInventarioComponent_th_26_Template, 2, 0, \"th\", 12);\n        i0.ÉµÉµtemplate(27, ConsolidarInventarioComponent_td_27_Template, 2, 1, \"td\", 15);\n        i0.ÉµÉµelementContainerEnd();\n        i0.ÉµÉµtemplate(28, ConsolidarInventarioComponent_tr_28_Template, 1, 0, \"tr\", 18);\n        i0.ÉµÉµtemplate(29, ConsolidarInventarioComponent_tr_29_Template, 1, 0, \"tr\", 19);\n        i0.ÉµÉµelementEnd()()()()();\n        i0.ÉµÉµelementStart(30, \"div\", 6)(31, \"div\", 20)(32, \"button\", 21);\n        i0.ÉµÉµlistener(\"click\", function ConsolidarInventarioComponent_Template_button_click_32_listener() {\n          return ctx.consolidar();\n        });\n        i0.ÉµÉµelement(33, \"i\", 22);\n        i0.ÉµÉµtext(34, \" Consolidar\");\n        i0.ÉµÉµelementEnd()()()()()();\n        i0.ÉµÉµelementStart(35, \"ngx-spinner\", 23);\n        i0.ÉµÉµelement(36, \"br\");\n        i0.ÉµÉµelementStart(37, \"p\", 24);\n        i0.ÉµÉµtext(38, \"\\uD83D\\uDD29 Cargando... \\uD83D\\uDD29\");\n        i0.ÉµÉµelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ÉµÉµadvance(15);\n        i0.ÉµÉµproperty(\"dataSource\", ctx.dataSource);\n        i0.ÉµÉµadvance(13);\n        i0.ÉµÉµproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ÉµÉµadvance(1);\n        i0.ÉµÉµproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ÉµÉµadvance(6);\n        i0.ÉµÉµproperty(\"fullScreen\", true);\n      }\n    },\n    dependencies: [i7.MatTable, i7.MatHeaderCellDef, i7.MatHeaderRowDef, i7.MatColumnDef, i7.MatCellDef, i7.MatRowDef, i7.MatHeaderCell, i7.MatCell, i7.MatHeaderRow, i7.MatRow, i8.NgControlStatus, i8.NgModel, i1.MatDialogActions, i9.MatButton, i6.NgxSpinnerComponent, i10.MatCard, i10.MatCardContent, i10.MatCardHeader, i10.MatCardTitle, i11.MatCheckbox, i12.MatIcon, i13.MatSort],\n    styles: [\".tg[_ngcontent-%COMP%] {\\n  border-collapse: collapse;\\n  border-spacing: 0;\\n}\\n\\n.mat-mdc-header-row[_ngcontent-%COMP%] {\\n  background: #093070;\\n}\\n\\n.th1[_ngcontent-%COMP%] {\\n  text-align: center;\\n  color: #fff;\\n}\\n\\ntd[_ngcontent-%COMP%] {\\n  text-align: center;\\n}\\n\\n.mat-mdc-table[_ngcontent-%COMP%]   .mdc-data-table__header-row[_ngcontent-%COMP%] {\\n  height: calc(1.6rem + 0px) !important;\\n}\\n\\n.mat-mdc-table[_ngcontent-%COMP%]   .mdc-data-table__row[_ngcontent-%COMP%] {\\n  height: calc(0rem + 0px) !important;\\n}\\n/*# sourceURL=webpack://./src/app/components/inventario/toma-inventario-consolidado/consolidar-inventario/consolidar-inventario.component.scss */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9pbnZlbnRhcmlvL3RvbWEtaW52ZW50YXJpby1jb25zb2xpZGFkby9jb25zb2xpZGFyLWludmVudGFyaW8vY29uc29saWRhci1pbnZlbnRhcmlvLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UseUJBQUE7RUFDQSxpQkFBQTtBQUNGOztBQUNBO0VBQ0UsbUJBQUE7QUFFRjs7QUFBQTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtBQUdGOztBQURBO0VBQ0Usa0JBQUE7QUFJRjs7QUFGQTtFQUNFLHFDQUFBO0FBS0Y7O0FBSEE7RUFDRSxtQ0FBQTtBQU1GIiwic291cmNlc0NvbnRlbnQiOlsiLnRnIHtcbiAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgYm9yZGVyLXNwYWNpbmc6IDA7XG59XG5cbi5tYXQtbWRjLWhlYWRlci1yb3cge1xuICBiYWNrZ3JvdW5kOiAjMDkzMDcwO1xufVxuXG4udGgxIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBjb2xvcjogI2ZmZjtcbn1cblxudGQge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5tYXQtbWRjLXRhYmxlIC5tZGMtZGF0YS10YWJsZV9faGVhZGVyLXJvdyB7XG4gIGhlaWdodDogY2FsYygxLjZyZW0gKyAwcHgpICFpbXBvcnRhbnQ7XG59XG5cbi5tYXQtbWRjLXRhYmxlIC5tZGMtZGF0YS10YWJsZV9fcm93IHtcbiAgaGVpZ2h0OiBjYWxjKDByZW0gKyAwcHgpICFpbXBvcnRhbnQ7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n  return ConsolidarInventarioComponent;\n}();\nexport { ConsolidarInventarioComponent };","map":{"version":3,"mappings":"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","names":["SelectionModel","MAT_DIALOG_DATA","MatTableDataSource","i0","dialog","dialogRef","api","dataInventario","items_consolidar","refreshItemSer","log_module","toastr","spinner","data_cabezera","data_items","console","log","userConn","localStorage","getItem","undefined","JSON","parse","ConsolidarInventarioComponent","getData","cargarCabecera","errorMessage","getAll","codigo","subscribe","next","datav","_this","data","dataSource","paginator","dataSourceWithPageSize","paginatorPageSize","error","err","complete","id","numeroid","cabecera","cargarTablaItems","items","data_save","create","postConsolidar","success","guardarLog","ventana","detalle","tipo","close","show","setTimeout","hide","tama","length","i","consolidado","allSelected","map","dato","every","item","callItemFunction","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\laragon\\www\\SIAW-Angular-B\\src\\app\\components\\inventario\\toma-inventario-consolidado\\consolidar-inventario\\consolidar-inventario.component.ts","C:\\laragon\\www\\SIAW-Angular-B\\src\\app\\components\\inventario\\toma-inventario-consolidado\\consolidar-inventario\\consolidar-inventario.component.html"],"sourcesContent":["import { SelectionModel } from '@angular/cdk/collections';\r\nimport { Component, Inject, OnInit, ViewChild } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatPaginator } from '@angular/material/paginator';\r\nimport { MatTableDataSource } from '@angular/material/table';\r\nimport { ApiService } from '@services/api.service';\r\nimport { LogService } from '@services/log-service.service';\r\nimport { ConsolidacionInventario } from '@services/modelos/objetos';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { ServiceRefreshItemsService } from '../services-refresh-item/service-refresh-items.service';\r\n\r\n@Component({\r\n  selector: 'app-consolidar-inventario',\r\n  templateUrl: './consolidar-inventario.component.html',\r\n  styleUrls: ['./consolidar-inventario.component.scss']\r\n})\r\nexport class ConsolidarInventarioComponent implements OnInit {\r\n\r\n  data: any;\r\n  dataConsolidar: any = [];\r\n  postConsolidar: any = [];\r\n  userConn: any;\r\n  allSelected:boolean=false;\r\n  data_cabezera: any = [];\r\n  data_items: any = [];\r\n  cabecera: any = [];\r\n  items: any = [];\r\n\r\n  nombre_ventana:string=\"prgconsolinv.vb\";\r\n\r\n  displayedColumns = ['consolidado','codigo','grupo','observaciones'];\r\n\r\n  dataSource = new MatTableDataSource();\r\n  dataSourceWithPageSize = new MatTableDataSource();\r\n  selection = new SelectionModel<ConsolidacionInventario>(true, []);\r\n\r\n  @ViewChild('paginator') paginator: MatPaginator;\r\n  @ViewChild('paginatorPageSize') paginatorPageSize: MatPaginator;\r\n\r\n  public ventana=\"consolidar-inventario\"\r\n  public detalle=\"consolidar-inventario-REFRESH\";\r\n  public tipo=\"consolidar-inventario-REFRESH\";\r\n\r\n  constructor(public dialog: MatDialog, public dialogRef: MatDialogRef<ConsolidarInventarioComponent>,\r\n    private api: ApiService, @Inject(MAT_DIALOG_DATA) public dataInventario: any,\r\n    @Inject(MAT_DIALOG_DATA) public items_consolidar: any, private refreshItemSer: ServiceRefreshItemsService,\r\n    public log_module: LogService,\r\n    private toastr: ToastrService, private spinner: NgxSpinnerService){\r\n    \r\n    this.data_cabezera = this.dataInventario.dataInventario;\r\n    this.data_items = this.items_consolidar.items_consolidar\r\n\r\n    console.log(this.data_cabezera, this.data_items);\r\n    \r\n\r\n    this.userConn = localStorage.getItem(\"user_conn\") !== undefined ? JSON.parse(localStorage.getItem(\"user_conn\")) : null;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getData();\r\n    this.cargarCabecera()\r\n  }\r\n\r\n  getData() { \r\n    let errorMessage:string = \"La Ruta presenta fallos al hacer peticion GET /inventario/oper/prgconsolinv/\";\r\n    return this.api.getAll('/inventario/oper/prgconsolinv/'+this.userConn+\"/\"+this.data_cabezera.codigo)\r\n      .subscribe({\r\n        next: (datav) => {\r\n          this.data = datav;\r\n          console.log(this.data);\r\n\r\n          this.dataSource = new MatTableDataSource<ConsolidacionInventario>(this.data);\r\n          this.dataSource.paginator = this.paginator;\r\n          this.dataSourceWithPageSize.paginator = this.paginatorPageSize;\r\n        }, \r\n        error: (err: any) => { \r\n          console.log(err, errorMessage);\r\n          this.toastr.error('! ERROR CABECERA !');\r\n        },\r\n        complete: () => { }\r\n      })\r\n  }\r\n\r\n  cargarCabecera() { \r\n    let errorMessage:string = \"La Ruta presenta fallos al hacer peticion GET\";\r\n    return this.api.getAll('/inventario/oper/docininvconsol/cargarCabecera/'+this.userConn+\"/\"+this.data_cabezera.id+\"/\"+this.data_cabezera.numeroid)\r\n      .subscribe({\r\n        next: (datav) => {\r\n          this.cabecera = datav;\r\n          console.log(this.cabecera);\r\n\r\n          this.cargarTablaItems(this.cabecera.codigo)\r\n        },\r\n                \r\n        error: (err: any) => { \r\n          console.log(err, errorMessage);\r\n          this.toastr.error('! ERROR CABECERA !');\r\n\r\n        },\r\n        complete: () => { }\r\n      })\r\n  }\r\n\r\n  cargarTablaItems(codigo){\r\n    let errorMessage = \"La Ruta presenta fallos al hacer peticion GET --/inventario/mant/inalmacen/catalogo/\"\r\n    return this.api.getAll('/inventario/oper/docininvconsol/mostrardetalle/'+this.userConn+\"/\"+codigo)\r\n      .subscribe({\r\n        next: (datav) => {\r\n          this.items = datav;\r\n          console.log(this.items);\r\n        },\r\n    \r\n        error: (err: any) => { \r\n          console.log(err, errorMessage);\r\n        },\r\n        complete: () => { }\r\n      })\r\n  }\r\n\r\n  consolidar(){\r\n    console.log(this.data);\r\n\r\n    let data_save: any = {\r\n      \"data_consolinv\": this.data,\r\n      \r\n      \"detalleInvConsol\": this.items,\r\n    };\r\n\r\n    console.log(data_save);\r\n    \r\n    let errorMessage = \"La Ruta presenta fallos al hacer la creacion\"+\"Ruta:- /inventario/oper/prgconsolinv/\";    \r\n    return this.api.create('/inventario/oper/prgconsolinv/'+this.userConn+\"/\"+this.data_cabezera.codigo, data_save)\r\n      .subscribe({\r\n        next: (datav) => {\r\n          this.postConsolidar = datav;\r\n          this.toastr.success('!GUARDADO EXITOSAMENTE!');\r\n          this.log_module.guardarLog(this.ventana, this.detalle, this.tipo);\r\n          this.close();\r\n\r\n          this.spinner.show();\r\n          setTimeout(() => {\r\n            this.spinner.hide();\r\n          }, 1500);      \r\n        },\r\n    \r\n        error: (err) => { \r\n          console.log(err, errorMessage);\r\n          this.toastr.error('! NO SE GUARDO !');\r\n\r\n        },\r\n        complete: () => { }\r\n      })\r\n  }\r\n\r\n  checkUncheckAll() {\r\n    let tama = this.data.length;\r\n    for (var i = 0; i < tama ; i++) {\r\n      this.data[i].consolidado = this.allSelected;\r\n    }\r\n    \r\n    // mapeo que cambia un valor de un array\r\n    this.data.map(function (dato) {\r\n      console.log(dato);\r\n\r\n      if (dato.consolidado = \"true\") {\r\n\r\n        dato.consolidado = \"false\";\r\n\r\n        this.dataSource = new MatTableDataSource<ConsolidacionInventario>(this.data);\r\n        this.dataSourceWithPageSize.paginator = this.paginatorPageSize;\r\n\r\n      } else { \r\n        dato.consolidado = \"true\";\r\n\r\n        this.dataSource = new MatTableDataSource<ConsolidacionInventario>(this.data);\r\n        this.dataSourceWithPageSize.paginator = this.paginatorPageSize;\r\n      }\r\n      \r\n      return dato;\r\n    })\r\n  }\r\n  \r\n  isAllSelected(data) {\r\n    console.log(data);\r\n    \r\n    this.allSelected = this.data.every(function (item: any) {\r\n      return item.consolidado == true;\r\n    });\r\n  }\r\n\r\n\r\n  toggleAllSelection() {\r\n    console.log(\"SELECT ALL\");\r\n    // if (this.allSelected) {\r\n    //   this.select.options.forEach((item: MatOption) => item.select());\r\n    // } else {\r\n    //   this.select.options.forEach((item: MatOption) => item.deselect());\r\n    // }\r\n  }\r\n\r\n  close(){ \r\n    this.dialogRef.close();\r\n    this.refreshItemSer.callItemFunction();\r\n  }\r\n}\r\n","<div class=\"p-2\">\r\n  <mat-card style=\"background-color: #f0f0f0;height: 90vh !important;\">\r\n    <mat-card-header>\r\n      <mat-card-title><strong>AÃ±adir Items al Documento</strong> </mat-card-title>\r\n      <div class=\"col\">\r\n        <div style=\"float: right;\">\r\n          <mat-icon color=\"primary\" (click)=\"close()\">close</mat-icon>\r\n        </div>\r\n      </div>\r\n    </mat-card-header>\r\n\r\n\r\n    <mat-card-content style=\"height: 50vh !important;\">\r\n      <div class=\"row\">\r\n        <div class=\"col-lg\">\r\n          <div class=\"team p-2 scrollmenu\">\r\n            <div class=\"col-lg-12 pr-lg-4\" style=\"width: 100%;overflow-x: auto;height: 73vh !important;\">\r\n              <table mat-table [dataSource]=\"dataSource\" multiTemplateDataRows matSort class=\"mat-elevation-z8\">\r\n\r\n                <ng-container matColumnDef=\"consolidado\">\r\n                  <th mat-header-cell *matHeaderCellDef class=\"th1\">\r\n                    <mat-checkbox [(ngModel)]=\"allSelected\" (change)=\"checkUncheckAll()\">\r\n                    </mat-checkbox>\r\n                  </th>\r\n                  <td mat-cell *matCellDef=\"let element\">\r\n                    <mat-checkbox [(ngModel)]=\"element.consolidado\" (change)=\"isAllSelected(element)\">\r\n                    </mat-checkbox>\r\n                  </td>\r\n                </ng-container>\r\n\r\n                <ng-container matColumnDef=\"codigo\">\r\n                  <th mat-header-cell *matHeaderCellDef class=\"th1\"> CÃ³digo </th>\r\n                  <td mat-cell *matCellDef=\"let element\" style=\"text-align: center;\">\r\n                    {{ element.codigo }} </td>\r\n                </ng-container>\r\n\r\n                <ng-container matColumnDef=\"grupo\">\r\n                  <th mat-header-cell *matHeaderCellDef class=\"th1\"> # Grupo </th>\r\n                  <td mat-cell *matCellDef=\"let element\" style=\"text-align: center;\">{{ element.nro }}\r\n                  </td>\r\n                </ng-container>\r\n\r\n                <ng-container matColumnDef=\"observaciones\">\r\n                  <th mat-header-cell *matHeaderCellDef class=\"th1\"> Observaciones </th>\r\n                  <td mat-cell *matCellDef=\"let element\" style=\"text-align: center;\">{{ element.obs }} </td>\r\n                </ng-container>\r\n\r\n                <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n                <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"mat-dialog-actions\" mat-dialog-actions align=\"end\">\r\n          <button mat-raised-button class=\"secondary\" (click)=\"consolidar();\"><i class=\"fa fa-cog\"></i>\r\n            Consolidar</button>\r\n        </div>\r\n      </div>\r\n    </mat-card-content>\r\n  </mat-card>\r\n</div>\r\n\r\n<ngx-spinner bdColor=\"rgba(251, 216, 0, 0.8)\" size=\"large\" color=\"#093070\" type=\"square-loader\" [fullScreen]=\"true\"><br>\r\n  <p style=\"font-size: 25px; color: rgb(9,48,112,)\">ðŸ”© Cargando... ðŸ”©</p>\r\n</ngx-spinner>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}