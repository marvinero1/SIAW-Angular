{"ast":null,"code":"import { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"@services/api.service\";\nimport * as i4 from \"ngx-spinner\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../serviciosItem/item-service.service\";\nimport * as i7 from \"@angular/material/card\";\nimport * as i8 from \"@angular/material/icon\";\nfunction ModalSubTotalComponent_p_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelement(2, \"br\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    var item_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Total: \", item_r1.total, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Descuento: \", item_r1.descuento, \" \");\n  }\n}\nvar ModalSubTotalComponent = /** @class */function () {\n  function ModalSubTotalComponent(dialogRef, toastr, api, spinner, datePipe, itemservice, items, cod_cliente, cod_almacen, cod_moneda, desc_linea, fecha) {\n    this.dialogRef = dialogRef;\n    this.toastr = toastr;\n    this.api = api;\n    this.spinner = spinner;\n    this.datePipe = datePipe;\n    this.itemservice = itemservice;\n    this.items = items;\n    this.cod_cliente = cod_cliente;\n    this.cod_almacen = cod_almacen;\n    this.cod_moneda = cod_moneda;\n    this.desc_linea = desc_linea;\n    this.fecha = fecha;\n    this.sub_totabilizar_post = [];\n    this.BD_storage = [];\n    this.desglose = [];\n    this.items_carrito = [];\n    this.fecha_actual = new Date();\n    this.userConn = localStorage.getItem(\"user_conn\") !== undefined ? JSON.parse(localStorage.getItem(\"user_conn\")) : null;\n    this.BD_storage = localStorage.getItem(\"bd_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"bd_logueado\")) : null;\n    this.items_carrito = items.items;\n    this.cliente = cod_cliente.cod_cliente;\n    this.almacen = cod_almacen.cod_almacen;\n    this.moneda = cod_moneda.cod_moneda;\n    this.desclinea = desc_linea.desc_linea;\n    this.fecha_proforma = this.datePipe.transform(this.fecha_actual, \"yyyy-MM-dd\");\n    console.log(this.items_carrito, this.cliente, this.almacen, this.moneda, this.desclinea, this.fecha_proforma);\n  }\n  ModalSubTotalComponent.prototype.ngOnInit = function () {\n    this.sacarSubTotal();\n  };\n  ModalSubTotalComponent.prototype.sacarSubTotal = function () {\n    var _this = this;\n    var arrayTransformado = this.items_carrito.map(function (item) {\n      return {\n        coditem: item.coditem,\n        tarifa: item.codtarifa,\n        descuento: item.coddescuento,\n        cantidad_pedida: item.cantidad_pedida,\n        cantidad: item.cantidad,\n        codcliente: \"\",\n        opcion_nivel: \"\",\n        codalmacen: 0,\n        desc_linea_seg_solicitud: \"\",\n        codmoneda: \"\",\n        fecha: new Date().toISOString()\n      };\n    });\n    console.log(arrayTransformado);\n    var errorMessage = \"La Ruta presenta fallos al hacer la creacion\" + \"Ruta:-- /seg_adm/mant/adarea/\";\n    return this.api.create(\"/venta/transac/veproforma/versubTotal/\" + this.userConn, arrayTransformado).subscribe({\n      next: function (datav) {\n        _this.sub_totabilizar_post = datav;\n        _this.desglose = datav.desgloce;\n        console.log(_this.desglose);\n        _this.spinner.show();\n        setTimeout(function () {\n          _this.spinner.hide();\n        }, 1500);\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n        _this.toastr.error('! NO SE TOTALIZO !');\n      },\n      complete: function () {\n        _this.mandarArrayItemSubTotal(_this.sub_totabilizar_post.resul);\n      }\n    });\n  };\n  ModalSubTotalComponent.prototype.mandarArrayItemSubTotal = function (items) {\n    console.log(items);\n    this.itemservice.enviarItemsProcesadosSubTotal(items);\n  };\n  ModalSubTotalComponent.prototype.close = function () {\n    this.dialogRef.close();\n  };\n  ModalSubTotalComponent.ɵfac = function ModalSubTotalComponent_Factory(t) {\n    return new (t || ModalSubTotalComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.ApiService), i0.ɵɵdirectiveInject(i4.NgxSpinnerService), i0.ɵɵdirectiveInject(i5.DatePipe), i0.ɵɵdirectiveInject(i6.ItemServiceService), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA));\n  };\n  ModalSubTotalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ModalSubTotalComponent,\n    selectors: [[\"app-modal-sub-total\"]],\n    decls: 55,\n    vars: 21,\n    consts: [[2, \"background-color\", \"#f0f0f0\"], [1, \"container-fluid\"], [1, \"mb-1\"], [1, \"col-md-9\"], [2, \"font-size\", \"0.75rem\"], [1, \"col-md-3\", \"float-right\"], [1, \"text-right\"], [\"color\", \"primary\", 3, \"click\"], [\"scope\", \"col\"], [\"scope\", \"row\"], [2, \"background-color\", \"#fbd800\"], [2, \"background-color\", \"black\", \"color\", \"#fbd800\", \"width\", \"100%\", \"height\", \"6rem\", \"max-height\", \"10rem\"], [4, \"ngFor\", \"ngForOf\"]],\n    template: function ModalSubTotalComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1);\n        i0.ɵɵelementContainerStart(2);\n        i0.ɵɵelementStart(3, \"mat-card-header\", 2)(4, \"div\", 3)(5, \"mat-card-title\", 4);\n        i0.ɵɵtext(6, \"Obtenci\\u00F3n del Sub Total\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"mat-icon\", 7);\n        i0.ɵɵlistener(\"click\", function ModalSubTotalComponent_Template_mat_icon_click_9_listener() {\n          return ctx.close();\n        });\n        i0.ɵɵtext(10, \"close\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(11, \"mat-card-content\")(12, \"table\")(13, \"thead\")(14, \"tr\");\n        i0.ɵɵelement(15, \"th\", 8)(16, \"th\", 8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"tbody\")(18, \"tr\")(19, \"th\", 9);\n        i0.ɵɵtext(20, \"Monto.........................................\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"td\");\n        i0.ɵɵtext(22);\n        i0.ɵɵpipe(23, \"number\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(24, \"tr\")(25, \"th\", 9);\n        i0.ɵɵtext(26, \"( - ) Descuento por NIvel Linea\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"td\");\n        i0.ɵɵtext(28);\n        i0.ɵɵpipe(29, \"number\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(30, \"hr\", 10);\n        i0.ɵɵelementStart(31, \"tr\");\n        i0.ɵɵelement(32, \"th\", 9);\n        i0.ɵɵelementStart(33, \"td\");\n        i0.ɵɵtext(34);\n        i0.ɵɵpipe(35, \"number\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(36, \"tr\")(37, \"th\", 9);\n        i0.ɵɵtext(38, \"( - ) Descuentos Especiales\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"td\");\n        i0.ɵɵtext(40);\n        i0.ɵɵpipe(41, \"number\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(42, \"tr\")(43, \"th\", 9);\n        i0.ɵɵtext(44, \"Desglose\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"td\")(46, \"div\", 11);\n        i0.ɵɵtemplate(47, ModalSubTotalComponent_p_47_Template, 4, 2, \"p\", 12);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(48, \"hr\", 10);\n        i0.ɵɵelementStart(49, \"tr\")(50, \"th\", 9);\n        i0.ɵɵtext(51, \"Sub Total\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"td\");\n        i0.ɵɵtext(53);\n        i0.ɵɵpipe(54, \"number\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(22);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(23, 6, ctx.sub_totabilizar_post.a, \"2.2-2\"));\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(29, 9, ctx.sub_totabilizar_post.b, \"2.2-2\"));\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(35, 12, ctx.sub_totabilizar_post.c, \"2.2-2\"));\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(41, 15, ctx.sub_totabilizar_post.d, \"2.2-2\"));\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.desglose);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(54, 18, ctx.sub_totabilizar_post.e, \"2.2-2\"), \" \");\n      }\n    },\n    dependencies: [i5.NgForOf, i7.MatCardContent, i7.MatCardHeader, i7.MatCardTitle, i8.MatIcon, i5.DecimalPipe],\n    styles: [\"td[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\\n  text-align: right !important;\\n}\\n/*# sourceURL=webpack://./src/app/components/mantenimiento/ventas/modal-sub-total/modal-sub-total.component.scss */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9tYW50ZW5pbWllbnRvL3ZlbnRhcy9tb2RhbC1zdWItdG90YWwvbW9kYWwtc3ViLXRvdGFsLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksNEJBQUE7QUFDSiIsInNvdXJjZXNDb250ZW50IjpbInRkLCB0aCB7XG4gIHRleHQtYWxpZ246IHJpZ2h0ICFpbXBvcnRhbnQ7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n  return ModalSubTotalComponent;\n}();\nexport { ModalSubTotalComponent };","map":{"version":3,"mappings":"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","names":["MAT_DIALOG_DATA","i0","dialogRef","toastr","api","spinner","datePipe","itemservice","items","cod_cliente","cod_almacen","cod_moneda","desc_linea","fecha","Date","userConn","localStorage","getItem","undefined","JSON","parse","BD_storage","items_carrito","cliente","almacen","moneda","desclinea","fecha_proforma","transform","fecha_actual","console","log","ModalSubTotalComponent","sacarSubTotal","arrayTransformado","map","coditem","item","tarifa","codtarifa","descuento","coddescuento","cantidad_pedida","cantidad","codcliente","opcion_nivel","codalmacen","desc_linea_seg_solicitud","codmoneda","toISOString","errorMessage","create","subscribe","next","datav","_this","sub_totabilizar_post","desglose","desgloce","show","setTimeout","hide","error","err","complete","mandarArrayItemSubTotal","resul","enviarItemsProcesadosSubTotal","close","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\laragon\\www\\SIAW-Angular-B\\src\\app\\components\\mantenimiento\\ventas\\modal-sub-total\\modal-sub-total.component.ts","C:\\laragon\\www\\SIAW-Angular-B\\src\\app\\components\\mantenimiento\\ventas\\modal-sub-total\\modal-sub-total.component.html"],"sourcesContent":["import { DatePipe } from '@angular/common';\nimport { Component, Inject, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { ApiService } from '@services/api.service';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { ToastrService } from 'ngx-toastr';\nimport { ItemServiceService } from '../serviciosItem/item-service.service';\n@Component({\n  selector: 'app-modal-sub-total',\n  templateUrl: './modal-sub-total.component.html',\n  styleUrls: ['./modal-sub-total.component.scss']\n})\nexport class ModalSubTotalComponent implements OnInit {\n\n  sub_totabilizar_post: any = [];\n  BD_storage: any = [];\n  desglose: any = [];\n  userConn: any;\n\n  items_carrito: any[] = [];\n  cliente: any;\n  almacen: any;\n  moneda: any;\n  desclinea: any;\n  fecha_proforma: any;\n  fecha_actual = new Date();\n\n  constructor(public dialogRef: MatDialogRef<ModalSubTotalComponent>, private toastr: ToastrService,\n    private api: ApiService, private spinner: NgxSpinnerService, private datePipe: DatePipe,\n    public itemservice: ItemServiceService,\n    @Inject(MAT_DIALOG_DATA) public items: any,\n    @Inject(MAT_DIALOG_DATA) public cod_cliente: any,\n    @Inject(MAT_DIALOG_DATA) public cod_almacen: any,\n    @Inject(MAT_DIALOG_DATA) public cod_moneda: any,\n    @Inject(MAT_DIALOG_DATA) public desc_linea: any,\n    @Inject(MAT_DIALOG_DATA) public fecha: any) {\n\n    this.userConn = localStorage.getItem(\"user_conn\") !== undefined ? JSON.parse(localStorage.getItem(\"user_conn\")) : null;\n    this.BD_storage = localStorage.getItem(\"bd_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"bd_logueado\")) : null;\n\n    this.items_carrito = items.items;\n    this.cliente = cod_cliente.cod_cliente;\n    this.almacen = cod_almacen.cod_almacen;\n    this.moneda = cod_moneda.cod_moneda;\n    this.desclinea = desc_linea.desc_linea;\n    this.fecha_proforma = this.datePipe.transform(this.fecha_actual, \"yyyy-MM-dd\")\n\n    console.log(this.items_carrito, this.cliente, this.almacen, this.moneda, this.desclinea, this.fecha_proforma);\n  }\n\n  ngOnInit() {\n    this.sacarSubTotal();\n  }\n\n  sacarSubTotal() {\n    const arrayTransformado = this.items_carrito.map(item => ({\n      coditem: item.coditem,\n      tarifa: item.codtarifa,\n      descuento: item.coddescuento,\n      cantidad_pedida: item.cantidad_pedida,\n      cantidad: item.cantidad,\n      codcliente: \"\",\n      opcion_nivel: \"\",\n      codalmacen: 0,\n      desc_linea_seg_solicitud: \"\",\n      codmoneda: \"\",\n      fecha: new Date().toISOString()\n    }));\n\n    console.log(arrayTransformado);\n\n    let errorMessage = \"La Ruta presenta fallos al hacer la creacion\" + \"Ruta:-- /seg_adm/mant/adarea/\";\n    return this.api.create(\"/venta/transac/veproforma/versubTotal/\" + this.userConn, arrayTransformado)\n      .subscribe({\n        next: (datav) => {\n          this.sub_totabilizar_post = datav;\n          this.desglose = datav.desgloce;\n          console.log(this.desglose);\n\n          this.spinner.show();\n          setTimeout(() => {\n            this.spinner.hide();\n          }, 1500);\n        },\n\n        error: (err) => {\n          console.log(err, errorMessage);\n          this.toastr.error('! NO SE TOTALIZO !');\n        },\n        complete: () => {\n          this.mandarArrayItemSubTotal(this.sub_totabilizar_post.resul);\n        }\n      })\n  }\n\n  mandarArrayItemSubTotal(items) {\n    console.log(items);\n    this.itemservice.enviarItemsProcesadosSubTotal(items);\n  }\n\n  close() {\n    this.dialogRef.close();\n  }\n}\n","<section style=\"background-color: #f0f0f0;\">\n  <div class=\"container-fluid\">\n\n    <ng-container>\n      <mat-card-header class=\"mb-1\">\n        <div class=\"col-md-9\">\n          <mat-card-title style=\"font-size: 0.75rem;\">Obtención del Sub Total</mat-card-title>\n        </div>\n        <div class=\"col-md-3 float-right\">\n          <div class=\"text-right\">\n            <mat-icon color=\"primary\" (click)=\"close();\">close</mat-icon>\n          </div>\n        </div>\n      </mat-card-header>\n\n      <mat-card-content>\n        <table>\n          <thead>\n            <tr>\n              <th scope=\"col\"></th>\n              <th scope=\"col\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <th scope=\"row\">Monto.........................................</th>\n              <td>{{ sub_totabilizar_post.a | number:'2.2-2' }}</td>\n            </tr>\n            <tr>\n              <th scope=\"row\">( - ) Descuento por NIvel Linea</th>\n              <td>{{ sub_totabilizar_post.b | number:'2.2-2' }}</td>\n            </tr>\n            <hr style=\"background-color: #fbd800;\">\n            <tr>\n              <th scope=\"row\"></th>\n              <td>{{ sub_totabilizar_post.c | number:'2.2-2' }}</td>\n            </tr>\n            <tr>\n              <th scope=\"row\">( - ) Descuentos Especiales</th>\n              <td>{{ sub_totabilizar_post.d | number:'2.2-2' }}</td>\n            </tr>\n            <tr>\n              <th scope=\"row\">Desglose</th>\n              <td>\n                <div style=\"background-color: black;color: #fbd800;width: 100%;height: 6rem;max-height: 10rem;\">\n                  <p *ngFor=\"let item of desglose\">\n                    Total: {{ item.total }} <br>\n                    Descuento: {{ item.descuento }}\n                  </p>\n                </div>\n              </td>\n            </tr>\n            <hr style=\"background-color: #fbd800;\">\n\n            <tr>\n              <th scope=\"row\">Sub Total</th>\n              <td>\n                {{ sub_totabilizar_post.e | number:'2.2-2' }}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </mat-card-content>\n    </ng-container>\n  </div>\n</section>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}