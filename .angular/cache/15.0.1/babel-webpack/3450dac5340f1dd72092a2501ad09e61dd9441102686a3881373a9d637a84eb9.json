{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.error.cause.js\";\nfunction _classPrivateMethodInitSpec(obj, privateSet) {\n  _checkPrivateRedeclaration(obj, privateSet);\n  privateSet.add(obj);\n}\nfunction _checkPrivateRedeclaration(obj, privateCollection) {\n  if (privateCollection.has(obj)) {\n    throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n  }\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : String(i);\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction _classPrivateMethodGet(receiver, privateSet, fn) {\n  if (!privateSet.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n  return fn;\n}\nimport { addClass, hasClass, removeClass, setAttribute } from \"../../helpers/dom/element.mjs\";\nimport { isUndefined, isDefined } from \"../../helpers/mixed.mjs\";\nimport { isObject } from \"../../helpers/object.mjs\";\nimport { isFunction } from \"../../helpers/function.mjs\";\nimport { arrayMap } from \"../../helpers/array.mjs\";\nimport { BasePlugin } from \"../base/index.mjs\";\nimport { IndexesSequence, PhysicalIndexToValueMap as IndexToValueMap } from \"../../translations/index.mjs\";\nimport Hooks from \"../../pluginHooks.mjs\";\nimport { ColumnStatesManager } from \"./columnStatesManager.mjs\";\nimport { HEADER_SPAN_CLASS, getNextSortOrder, areValidSortStates, getHeaderSpanElement, isFirstLevelColumnHeader, wasHeaderClickedProperly } from \"./utils.mjs\";\nimport { getClassesToRemove, getClassesToAdd } from \"./domHelpers.mjs\";\nimport { rootComparator } from \"./rootComparator.mjs\";\nimport { registerRootComparator, sort } from \"./sortService/index.mjs\";\nimport { A11Y_SORT } from \"../../helpers/a11y.mjs\";\nexport const PLUGIN_KEY = 'columnSorting';\nexport const PLUGIN_PRIORITY = 50;\nexport const APPEND_COLUMN_CONFIG_STRATEGY = 'append';\nexport const REPLACE_COLUMN_CONFIG_STRATEGY = 'replace';\nconst SHORTCUTS_GROUP = PLUGIN_KEY;\nregisterRootComparator(PLUGIN_KEY, rootComparator);\nHooks.getSingleton().register('beforeColumnSort');\nHooks.getSingleton().register('afterColumnSort');\n\n// DIFF - MultiColumnSorting & ColumnSorting: changed configuration documentation.\n/**\n * @plugin ColumnSorting\n * @class ColumnSorting\n *\n * @description\n * This plugin sorts the view by columns (but does not sort the data source!). To enable the plugin, set the\n * {@link Options#columnSorting} property to the correct value (see the examples below).\n *\n * @example\n * ```js\n * // as boolean\n * columnSorting: true\n *\n * // as an object with initial sort config (sort ascending for column at index 1)\n * columnSorting: {\n *   initialConfig: {\n *     column: 1,\n *     sortOrder: 'asc'\n *   }\n * }\n *\n * // as an object which define specific sorting options for all columns\n * columnSorting: {\n *   sortEmptyCells: true, // true = the table sorts empty cells, false = the table moves all empty cells to the end of the table (by default)\n *   indicator: true, // true = shows indicator for all columns (by default), false = don't show indicator for columns\n *   headerAction: true, // true = allow to click on the headers to sort (by default), false = turn off possibility to click on the headers to sort\n *   compareFunctionFactory: function(sortOrder, columnMeta) {\n *     return function(value, nextValue) {\n *       // Some value comparisons which will return -1, 0 or 1...\n *     }\n *   }\n * }\n *\n * // as an object passed to the `column` property, allows specifying a custom options for the desired column.\n * // please take a look at documentation of `column` property: https://handsontable.com/docs/Options.html#columns\n * columns: [{\n *   columnSorting: {\n *     indicator: false, // disable indicator for the first column,\n *     sortEmptyCells: true,\n *     headerAction: false, // clicks on the first column won't sort\n *     compareFunctionFactory: function(sortOrder, columnMeta) {\n *       return function(value, nextValue) {\n *         return 0; // Custom compare function for the first column (don't sort)\n *       }\n *     }\n *   }\n * }]\n * ```\n */\nvar _loadOrSortBySettings = /*#__PURE__*/new WeakSet();\nvar _onAfterGetColHeader = /*#__PURE__*/new WeakSet();\nvar _onAfterLoadData = /*#__PURE__*/new WeakSet();\nvar _onBeforeOnCellMouseDown = /*#__PURE__*/new WeakSet();\nexport class ColumnSorting extends BasePlugin {\n  constructor() {\n    super(...arguments);\n    /**\n     * Changes the behavior of selection / dragging.\n     *\n     * @param {MouseEvent} event The `mousedown` event.\n     * @param {CellCoords} coords Visual coordinates.\n     * @param {HTMLElement} TD The cell element.\n     * @param {object} controller An object with properties `row`, `column` and `cell`. Each property contains\n     *                            a boolean value that allows or disallows changing the selection for that particular area.\n     */\n    _classPrivateMethodInitSpec(this, _onBeforeOnCellMouseDown);\n    /**\n     * Callback for the `afterLoadData` hook.\n     *\n     * @param {boolean} initialLoad Flag that determines whether the data has been loaded during the initialization.\n     */\n    _classPrivateMethodInitSpec(this, _onAfterLoadData);\n    /**\n     * Callback for the `onAfterGetColHeader` hook. Adds column sorting CSS classes.\n     *\n     * @param {number} column Visual column index.\n     * @param {Element} TH TH HTML element.\n     */\n    _classPrivateMethodInitSpec(this, _onAfterGetColHeader);\n    /**\n     * Load saved settings or sort by predefined plugin configuration.\n     */\n    _classPrivateMethodInitSpec(this, _loadOrSortBySettings);\n    /**\n     * Instance of column state manager.\n     *\n     * @private\n     * @type {null|ColumnStatesManager}\n     */\n    _defineProperty(this, \"columnStatesManager\", null);\n    /**\n     * Cached column properties from plugin like i.e. `indicator`, `headerAction`.\n     *\n     * @private\n     * @type {null|PhysicalIndexToValueMap}\n     */\n    _defineProperty(this, \"columnMetaCache\", null);\n    /**\n     * Main settings key designed for the plugin.\n     *\n     * @private\n     * @type {string}\n     */\n    _defineProperty(this, \"pluginKey\", PLUGIN_KEY);\n    /**\n     * Plugin indexes cache.\n     *\n     * @private\n     * @type {null|IndexesSequence}\n     */\n    _defineProperty(this, \"indexesSequenceCache\", null);\n  }\n  static get PLUGIN_KEY() {\n    return PLUGIN_KEY;\n  }\n  static get PLUGIN_PRIORITY() {\n    return PLUGIN_PRIORITY;\n  }\n  /**\n   * Checks if the plugin is enabled in the Handsontable settings. This method is executed in {@link Hooks#beforeInit}\n   * hook and if it returns `true` then the {@link ColumnSorting#enablePlugin} method is called.\n   *\n   * @returns {boolean}\n   */\n  isEnabled() {\n    return !!this.hot.getSettings()[this.pluginKey];\n  }\n\n  /**\n   * Enables the plugin functionality for this Handsontable instance.\n   */\n  enablePlugin() {\n    var _this = this;\n    if (this.enabled) {\n      return;\n    }\n    this.columnStatesManager = new ColumnStatesManager(this.hot, `${this.pluginKey}.sortingStates`);\n    this.columnMetaCache = new IndexToValueMap(physicalIndex => {\n      let visualIndex = this.hot.toVisualColumn(physicalIndex);\n      if (visualIndex === null) {\n        visualIndex = physicalIndex;\n      }\n      return this.getMergedPluginSettings(visualIndex);\n    });\n    this.hot.columnIndexMapper.registerMap(`${this.pluginKey}.columnMeta`, this.columnMetaCache);\n    this.addHook('afterGetColHeader', (column, TH) => _classPrivateMethodGet(this, _onAfterGetColHeader, _onAfterGetColHeader2).call(this, column, TH));\n    this.addHook('beforeOnCellMouseDown', function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return _classPrivateMethodGet(_this, _onBeforeOnCellMouseDown, _onBeforeOnCellMouseDown2).call(_this, ...args);\n    });\n    this.addHook('afterOnCellMouseDown', (event, target) => this.onAfterOnCellMouseDown(event, target));\n    this.addHook('afterInit', () => _classPrivateMethodGet(this, _loadOrSortBySettings, _loadOrSortBySettings2).call(this));\n    this.addHook('afterLoadData', function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      return _classPrivateMethodGet(_this, _onAfterLoadData, _onAfterLoadData2).call(_this, ...args);\n    });\n\n    // TODO: Workaround? It should be refactored / described.\n    if (this.hot.view) {\n      _classPrivateMethodGet(this, _loadOrSortBySettings, _loadOrSortBySettings2).call(this);\n    }\n    this.registerShortcuts();\n    super.enablePlugin();\n  }\n\n  /**\n   * Disables the plugin functionality for this Handsontable instance.\n   */\n  disablePlugin() {\n    const clearColHeader = (column, TH) => {\n      const headerSpanElement = getHeaderSpanElement(TH);\n      if (isFirstLevelColumnHeader(column, TH) === false || headerSpanElement === null) {\n        return;\n      }\n      this.updateHeaderClasses(headerSpanElement);\n    };\n\n    // Changing header width and removing indicator.\n    this.hot.addHook('afterGetColHeader', clearColHeader);\n    this.hot.addHookOnce('afterViewRender', () => {\n      this.hot.removeHook('afterGetColHeader', clearColHeader);\n    });\n    this.hot.batchExecution(() => {\n      if (this.indexesSequenceCache !== null) {\n        this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues());\n        this.hot.rowIndexMapper.unregisterMap(this.pluginKey);\n      }\n    }, true);\n    this.hot.columnIndexMapper.unregisterMap(`${this.pluginKey}.columnMeta`);\n    this.columnStatesManager.destroy();\n    this.columnMetaCache = null;\n    this.columnStatesManager = null;\n    this.unregisterShortcuts();\n    super.disablePlugin();\n  }\n\n  /**\n   * Register shortcuts responsible for toggling column sorting functionality.\n   *\n   * @private\n   */\n  registerShortcuts() {\n    this.hot.getShortcutManager().getContext('grid').addShortcut({\n      keys: [['Enter']],\n      callback: () => {\n        const {\n          highlight\n        } = this.hot.getSelectedRangeLast();\n        if (highlight.row === -1 && highlight.col >= 0) {\n          this.sort(this.getColumnNextConfig(highlight.col));\n        }\n      },\n      runOnlyIf: () => {\n        var _this$hot$getSelected;\n        const highlight = (_this$hot$getSelected = this.hot.getSelectedRangeLast()) === null || _this$hot$getSelected === void 0 ? void 0 : _this$hot$getSelected.highlight;\n        return highlight && this.hot.selection.isCellVisible(highlight) && highlight.isHeader();\n      },\n      group: SHORTCUTS_GROUP\n    });\n  }\n\n  /**\n   * Unregister shortcuts responsible for toggling column sorting functionality.\n   *\n   * @private\n   */\n  unregisterShortcuts() {\n    this.hot.getShortcutManager().getContext('grid').removeShortcutsByGroup(SHORTCUTS_GROUP);\n  }\n\n  // DIFF - MultiColumnSorting & ColumnSorting: changed function documentation.\n  /**\n   * Sorts the table by chosen columns and orders.\n   *\n   * @param {undefined|object} sortConfig Single column sort configuration. The configuration object contains `column` and `sortOrder` properties.\n   * First of them contains visual column index, the second one contains sort order (`asc` for ascending, `desc` for descending).\n   *\n   * **Note**: Please keep in mind that every call of `sort` function set an entirely new sort order. Previous sort configs aren't preserved.\n   *\n   * @example\n   * ```js\n   * // sort ascending first visual column\n   * hot.getPlugin('columnSorting').sort({ column: 0, sortOrder: 'asc' });\n   * ```\n   *\n   * @fires Hooks#beforeColumnSort\n   * @fires Hooks#afterColumnSort\n   */\n  sort(sortConfig) {\n    const currentSortConfig = this.getSortConfig();\n\n    // We always pass configs defined as an array to `beforeColumnSort` and `afterColumnSort` hooks.\n    const destinationSortConfigs = this.getNormalizedSortConfigs(sortConfig);\n    const sortPossible = this.areValidSortConfigs(destinationSortConfigs);\n    const allowSort = this.hot.runHooks('beforeColumnSort', currentSortConfig, destinationSortConfigs, sortPossible);\n    if (allowSort === false) {\n      return;\n    }\n    if (currentSortConfig.length === 0 && this.indexesSequenceCache === null) {\n      this.indexesSequenceCache = this.hot.rowIndexMapper.registerMap(this.pluginKey, new IndexesSequence());\n      this.indexesSequenceCache.setValues(this.hot.rowIndexMapper.getIndexesSequence());\n    }\n    if (sortPossible) {\n      this.columnStatesManager.setSortStates(destinationSortConfigs);\n      this.sortByPresetSortStates(destinationSortConfigs);\n      this.saveAllSortSettings(destinationSortConfigs);\n    }\n    this.hot.runHooks('afterColumnSort', currentSortConfig, sortPossible ? destinationSortConfigs : currentSortConfig, sortPossible);\n    if (sortPossible) {\n      this.hot.render();\n      // TODO: Workaround? This triggers fast redraw. One test won't pass after removal.\n      // It should be refactored / described.\n      this.hot.forceFullRender = false;\n      this.hot.view.render();\n    }\n  }\n\n  /**\n   * Clear the sort performed on the table.\n   */\n  clearSort() {\n    this.sort([]);\n  }\n\n  /**\n   * Checks if the table is sorted (any column have to be sorted).\n   *\n   * @returns {boolean}\n   */\n  isSorted() {\n    return this.enabled && !this.columnStatesManager.isListOfSortedColumnsEmpty();\n  }\n\n  /**\n   * Get sort configuration for particular column or for all sorted columns. Objects contain `column` and `sortOrder` properties.\n   *\n   * **Note**: Please keep in mind that returned objects expose **visual** column index under the `column` key. They are handled by the `sort` function.\n   *\n   * @param {number} [column] Visual column index.\n   * @returns {undefined|object|Array}\n   */\n  getSortConfig(column) {\n    if (isDefined(column)) {\n      return this.columnStatesManager.getColumnSortState(column);\n    }\n    return this.columnStatesManager.getSortStates();\n  }\n\n  /**\n   * @description\n   * Warn: Useful mainly for providing server side sort implementation (see in the example below). It doesn't sort the data set. It just sets sort configuration for all sorted columns.\n   * Note: Please keep in mind that this method doesn't re-render the table.\n   *\n   * @example\n   * ```js\n   * beforeColumnSort: function(currentSortConfig, destinationSortConfigs) {\n   *   const columnSortPlugin = this.getPlugin('columnSorting');\n   *\n   *   columnSortPlugin.setSortConfig(destinationSortConfigs);\n   *\n   *   // const newData = ... // Calculated data set, ie. from an AJAX call.\n   *\n   *   this.loadData(newData); // Load new data set and re-render the table.\n   *\n   *   return false; // The blockade for the default sort action.\n   * }\n   * ```\n   *\n   * @param {undefined|object|Array} sortConfig Single column sort configuration or full sort configuration (for all sorted columns).\n   * The configuration object contains `column` and `sortOrder` properties. First of them contains visual column index, the second one contains\n   * sort order (`asc` for ascending, `desc` for descending).\n   */\n  setSortConfig(sortConfig) {\n    // We always set configs defined as an array.\n    const destinationSortConfigs = this.getNormalizedSortConfigs(sortConfig);\n    if (this.areValidSortConfigs(destinationSortConfigs)) {\n      this.columnStatesManager.setSortStates(destinationSortConfigs);\n    }\n  }\n\n  /**\n   * Get normalized sort configs.\n   *\n   * @private\n   * @param {object|Array} [sortConfig=[]] Single column sort configuration or full sort configuration (for all sorted columns).\n   * The configuration object contains `column` and `sortOrder` properties. First of them contains visual column index, the second one contains\n   * sort order (`asc` for ascending, `desc` for descending).\n   * @returns {Array}\n   */\n  getNormalizedSortConfigs() {\n    let sortConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    if (Array.isArray(sortConfig)) {\n      return sortConfig.slice(0, 1);\n    }\n    return [sortConfig];\n  }\n\n  /**\n   * Get if sort configs are valid.\n   *\n   * @private\n   * @param {Array} sortConfigs Sort configuration for all sorted columns. Objects contain `column` and `sortOrder` properties.\n   * @returns {boolean}\n   */\n  areValidSortConfigs(sortConfigs) {\n    const numberOfColumns = this.hot.countCols();\n\n    // We don't translate visual indexes to physical indexes.\n    return areValidSortStates(sortConfigs) && sortConfigs.every(_ref => {\n      let {\n        column\n      } = _ref;\n      return column <= numberOfColumns && column >= 0;\n    });\n  }\n\n  /**\n   * Saves all sorting settings. Saving works only when {@link Options#persistentState} option is enabled.\n   *\n   * @param {Array} sortConfigs Sort configuration for all sorted columns. Objects contain `column` and `sortOrder` properties.\n   *\n   * @private\n   * @fires Hooks#persistentStateSave\n   */\n  saveAllSortSettings(sortConfigs) {\n    const allSortSettings = this.columnStatesManager.getAllColumnsProperties();\n    const translateColumnToPhysical = _ref2 => {\n      let {\n        column: visualColumn,\n        ...restOfProperties\n      } = _ref2;\n      return {\n        column: this.hot.toPhysicalColumn(visualColumn),\n        ...restOfProperties\n      };\n    };\n    allSortSettings.initialConfig = arrayMap(sortConfigs, translateColumnToPhysical);\n    this.hot.runHooks('persistentStateSave', 'columnSorting', allSortSettings);\n  }\n\n  /**\n   * Get all saved sorting settings. Loading works only when {@link Options#persistentState} option is enabled.\n   *\n   * @private\n   * @returns {object} Previously saved sort settings.\n   *\n   * @fires Hooks#persistentStateLoad\n   */\n  getAllSavedSortSettings() {\n    const storedAllSortSettings = {};\n    this.hot.runHooks('persistentStateLoad', 'columnSorting', storedAllSortSettings);\n    const allSortSettings = storedAllSortSettings.value;\n    const translateColumnToVisual = _ref3 => {\n      let {\n        column: physicalColumn,\n        ...restOfProperties\n      } = _ref3;\n      return {\n        column: this.hot.toVisualColumn(physicalColumn),\n        ...restOfProperties\n      };\n    };\n    if (isDefined(allSortSettings) && Array.isArray(allSortSettings.initialConfig)) {\n      allSortSettings.initialConfig = arrayMap(allSortSettings.initialConfig, translateColumnToVisual);\n    }\n    return allSortSettings;\n  }\n\n  /**\n   * Get next sort configuration for particular column. Object contain `column` and `sortOrder` properties.\n   *\n   * **Note**: Please keep in mind that returned object expose **visual** column index under the `column` key.\n   *\n   * @private\n   * @param {number} column Visual column index.\n   * @returns {undefined|object}\n   */\n  getColumnNextConfig(column) {\n    const sortOrder = this.columnStatesManager.getSortOrderOfColumn(column);\n    if (isDefined(sortOrder)) {\n      const nextSortOrder = getNextSortOrder(sortOrder);\n      if (isDefined(nextSortOrder)) {\n        return {\n          column,\n          sortOrder: nextSortOrder\n        };\n      }\n      return;\n    }\n    const nrOfColumns = this.hot.countCols();\n    if (Number.isInteger(column) && column >= 0 && column < nrOfColumns) {\n      return {\n        column,\n        sortOrder: getNextSortOrder()\n      };\n    }\n  }\n\n  /**\n   * Get sort configuration with \"next order\" for particular column.\n   *\n   * @private\n   * @param {number} columnToChange Visual column index of column which order will be changed.\n   * @param {string} strategyId ID of strategy. Possible values: 'append' and 'replace'. The first one\n   * change order of particular column and change it's position in the sort queue to the last one. The second one\n   * just change order of particular column.\n   *\n   * **Note**: Please keep in mind that returned objects expose **visual** column index under the `column` key.\n   *\n   * @returns {Array}\n   */\n  getNextSortConfig(columnToChange) {\n    let strategyId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : APPEND_COLUMN_CONFIG_STRATEGY;\n    const indexOfColumnToChange = this.columnStatesManager.getIndexOfColumnInSortQueue(columnToChange);\n    const isColumnSorted = indexOfColumnToChange !== -1;\n    const currentSortConfig = this.getSortConfig();\n    const nextColumnConfig = this.getColumnNextConfig(columnToChange);\n    if (isColumnSorted) {\n      if (isUndefined(nextColumnConfig)) {\n        return [...currentSortConfig.slice(0, indexOfColumnToChange), ...currentSortConfig.slice(indexOfColumnToChange + 1)];\n      }\n      if (strategyId === APPEND_COLUMN_CONFIG_STRATEGY) {\n        return [...currentSortConfig.slice(0, indexOfColumnToChange), ...currentSortConfig.slice(indexOfColumnToChange + 1), nextColumnConfig];\n      } else if (strategyId === REPLACE_COLUMN_CONFIG_STRATEGY) {\n        return [...currentSortConfig.slice(0, indexOfColumnToChange), nextColumnConfig, ...currentSortConfig.slice(indexOfColumnToChange + 1)];\n      }\n    }\n    if (isDefined(nextColumnConfig)) {\n      return currentSortConfig.concat(nextColumnConfig);\n    }\n    return currentSortConfig;\n  }\n\n  /**\n   * Get plugin's column config for the specified column index.\n   *\n   * @private\n   * @param {object} columnConfig Configuration inside `columns` property for the specified column index.\n   * @returns {object}\n   */\n  getPluginColumnConfig(columnConfig) {\n    if (isObject(columnConfig)) {\n      const pluginColumnConfig = columnConfig[this.pluginKey];\n      if (isObject(pluginColumnConfig)) {\n        return pluginColumnConfig;\n      }\n    }\n    return {};\n  }\n\n  /**\n   * Get plugin settings related properties, properly merged from cascade settings.\n   *\n   * @private\n   * @param {number} column Visual column index.\n   * @returns {object}\n   */\n  getMergedPluginSettings(column) {\n    const pluginMainSettings = this.hot.getSettings()[this.pluginKey];\n    const storedColumnProperties = this.columnStatesManager.getAllColumnsProperties();\n    const cellMeta = this.hot.getCellMeta(0, column);\n    const columnMeta = Object.getPrototypeOf(cellMeta);\n    if (Array.isArray(columnMeta.columns)) {\n      return Object.assign(storedColumnProperties, pluginMainSettings, this.getPluginColumnConfig(columnMeta.columns[column]));\n    } else if (isFunction(columnMeta.columns)) {\n      return Object.assign(storedColumnProperties, pluginMainSettings, this.getPluginColumnConfig(columnMeta.columns(column)));\n    }\n    return Object.assign(storedColumnProperties, pluginMainSettings);\n  }\n\n  /**\n   * Get copy of settings for first cell in the column.\n   *\n   * @private\n   * @param {number} column Visual column index.\n   * @returns {object}\n   */\n  // TODO: Workaround. Inheriting of non-primitive cell meta values doesn't work. Instead of getting properties from column meta we call this function.\n  // TODO: Remove test named: \"should not break the dataset when inserted new row\" (#5431).\n  getFirstCellSettings(column) {\n    const cellMeta = this.hot.getCellMeta(0, column);\n    const cellMetaCopy = Object.create(cellMeta);\n    cellMetaCopy[this.pluginKey] = this.columnMetaCache.getValueAtIndex(this.hot.toPhysicalColumn(column));\n    return cellMetaCopy;\n  }\n\n  /**\n   * Get number of rows which should be sorted.\n   *\n   * @private\n   * @param {number} numberOfRows Total number of displayed rows.\n   * @returns {number}\n   */\n  getNumberOfRowsToSort(numberOfRows) {\n    const settings = this.hot.getSettings();\n\n    // `maxRows` option doesn't take into account `minSpareRows` option in this case.\n    if (settings.maxRows <= numberOfRows) {\n      return settings.maxRows;\n    }\n    return numberOfRows - settings.minSpareRows;\n  }\n\n  /**\n   * Performs the sorting using a stable sort function basing on internal state of sorting.\n   *\n   * @param {Array} sortConfigs Sort configuration for all sorted columns. Objects contain `column` and `sortOrder` properties.\n   * @private\n   */\n  sortByPresetSortStates(sortConfigs) {\n    if (sortConfigs.length === 0) {\n      this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues());\n      return;\n    }\n    const indexesWithData = [];\n    const numberOfRows = this.hot.countRows();\n    const getDataForSortedColumns = visualRowIndex => arrayMap(sortConfigs, sortConfig => this.hot.getDataAtCell(visualRowIndex, sortConfig.column));\n    for (let visualRowIndex = 0; visualRowIndex < this.getNumberOfRowsToSort(numberOfRows); visualRowIndex += 1) {\n      indexesWithData.push([this.hot.toPhysicalRow(visualRowIndex)].concat(getDataForSortedColumns(visualRowIndex)));\n    }\n    const indexesBefore = arrayMap(indexesWithData, indexWithData => indexWithData[0]);\n    sort(indexesWithData, this.pluginKey, arrayMap(sortConfigs, sortConfig => sortConfig.sortOrder), arrayMap(sortConfigs, sortConfig => this.getFirstCellSettings(sortConfig.column)));\n\n    // Append spareRows\n    for (let visualRowIndex = indexesWithData.length; visualRowIndex < numberOfRows; visualRowIndex += 1) {\n      indexesWithData.push([visualRowIndex].concat(getDataForSortedColumns(visualRowIndex)));\n    }\n    const indexesAfter = arrayMap(indexesWithData, indexWithData => indexWithData[0]);\n    const indexMapping = new Map(arrayMap(indexesBefore, (indexBefore, indexInsideArray) => [indexBefore, indexesAfter[indexInsideArray]]));\n    const newIndexesSequence = arrayMap(this.hot.rowIndexMapper.getIndexesSequence(), physicalIndex => {\n      if (indexMapping.has(physicalIndex)) {\n        return indexMapping.get(physicalIndex);\n      }\n      return physicalIndex;\n    });\n    this.hot.rowIndexMapper.setIndexesSequence(newIndexesSequence);\n  }\n  /**\n   * Sort the table by provided configuration.\n   *\n   * @private\n   * @param {object} allSortSettings All sort config settings. Object may contain `initialConfig`, `indicator`,\n   * `sortEmptyCells`, `headerAction` and `compareFunctionFactory` properties.\n   */\n  sortBySettings(allSortSettings) {\n    if (isObject(allSortSettings)) {\n      this.columnStatesManager.updateAllColumnsProperties(allSortSettings);\n      const initialConfig = allSortSettings.initialConfig;\n      if (Array.isArray(initialConfig) || isObject(initialConfig)) {\n        this.sort(initialConfig);\n      }\n    } else {\n      // Extra render for headers. Their width may change.\n      this.hot.render();\n    }\n  }\n  /**\n   * Update header classes.\n   *\n   * @private\n   * @param {HTMLElement} headerSpanElement Header span element.\n   * @param {...*} args Extra arguments for helpers.\n   */\n  updateHeaderClasses(headerSpanElement) {\n    removeClass(headerSpanElement, getClassesToRemove(headerSpanElement));\n    if (this.enabled !== false) {\n      for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n        args[_key3 - 1] = arguments[_key3];\n      }\n      addClass(headerSpanElement, getClassesToAdd(...args));\n    }\n  }\n\n  /**\n   * Overwriting base plugin's `onUpdateSettings` method. Please keep in mind that `onAfterUpdateSettings` isn't called\n   * for `updateSettings` in specific situations.\n   *\n   * @private\n   * @param {object} newSettings New settings object.\n   */\n  onUpdateSettings(newSettings) {\n    super.onUpdateSettings();\n    if (this.columnMetaCache !== null) {\n      // Column meta cache base on settings, thus we should re-init the map.\n      this.columnMetaCache.init(this.hot.columnIndexMapper.getNumberOfIndexes());\n    }\n    if (isDefined(newSettings[this.pluginKey])) {\n      this.sortBySettings(newSettings[this.pluginKey]);\n    }\n  }\n  /**\n   * Indicates if clickable header was clicked.\n   *\n   * @private\n   * @param {MouseEvent} event The `mousedown` event.\n   * @param {number} column Visual column index.\n   * @returns {boolean}\n   */\n  wasClickableHeaderClicked(event, column) {\n    const pluginSettingsForColumn = this.getFirstCellSettings(column)[this.pluginKey];\n    const headerActionEnabled = pluginSettingsForColumn.headerAction;\n    return headerActionEnabled && hasClass(event.target, HEADER_SPAN_CLASS);\n  }\n  /**\n   * Callback for the `onAfterOnCellMouseDown` hook.\n   *\n   * @private\n   * @param {Event} event Event which are provided by hook.\n   * @param {CellCoords} coords Visual coords of the selected cell.\n   */\n  onAfterOnCellMouseDown(event, coords) {\n    if (wasHeaderClickedProperly(coords.row, coords.col, event) === false) {\n      return;\n    }\n    if (this.wasClickableHeaderClicked(event, coords.col)) {\n      if (this.hot.getShortcutManager().isCtrlPressed()) {\n        this.hot.deselectCell();\n        this.hot.selectColumns(coords.col);\n      }\n      this.sort(this.getColumnNextConfig(coords.col));\n    }\n  }\n\n  /**\n   * Destroys the plugin instance.\n   */\n  destroy() {\n    var _this$columnStatesMan;\n    // TODO: Probably not supported yet by ESLint: https://github.com/eslint/eslint/issues/11045\n    // eslint-disable-next-line no-unused-expressions\n    (_this$columnStatesMan = this.columnStatesManager) === null || _this$columnStatesMan === void 0 || _this$columnStatesMan.destroy();\n    super.destroy();\n  }\n}\nfunction _loadOrSortBySettings2() {\n  const storedAllSortSettings = this.getAllSavedSortSettings();\n  if (isObject(storedAllSortSettings)) {\n    this.sortBySettings(storedAllSortSettings);\n  } else {\n    const allSortSettings = this.hot.getSettings()[this.pluginKey];\n    this.sortBySettings(allSortSettings);\n  }\n}\nfunction _onAfterGetColHeader2(column, TH) {\n  const headerSpanElement = getHeaderSpanElement(TH);\n  if (isFirstLevelColumnHeader(column, TH) === false || headerSpanElement === null) {\n    return;\n  }\n  const pluginSettingsForColumn = this.getFirstCellSettings(column)[this.pluginKey];\n  const showSortIndicator = pluginSettingsForColumn.indicator;\n  const headerActionEnabled = pluginSettingsForColumn.headerAction;\n  this.updateHeaderClasses(headerSpanElement, this.columnStatesManager, column, showSortIndicator, headerActionEnabled);\n  if (this.hot.getSettings().ariaTags) {\n    const currentSortState = this.columnStatesManager.getSortOrderOfColumn(column);\n    setAttribute(TH, ...A11Y_SORT(currentSortState ? `${currentSortState}ending` : 'none'));\n  }\n}\nfunction _onAfterLoadData2(initialLoad) {\n  if (initialLoad === true) {\n    // TODO: Workaround? It should be refactored / described.\n    if (this.hot.view) {\n      _classPrivateMethodGet(this, _loadOrSortBySettings, _loadOrSortBySettings2).call(this);\n    }\n  }\n}\nfunction _onBeforeOnCellMouseDown2(event, coords, TD, controller) {\n  if (wasHeaderClickedProperly(coords.row, coords.col, event) === false) {\n    return;\n  }\n  if (this.wasClickableHeaderClicked(event, coords.col) && this.hot.getShortcutManager().isCtrlPressed()) {\n    controller.column = true;\n  }\n}","map":{"version":3,"names":["_classPrivateMethodInitSpec","obj","privateSet","_checkPrivateRedeclaration","add","privateCollection","has","TypeError","_defineProperty","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","t","i","_toPrimitive","String","r","e","Symbol","toPrimitive","call","Number","_classPrivateMethodGet","receiver","fn","addClass","hasClass","removeClass","setAttribute","isUndefined","isDefined","isObject","isFunction","arrayMap","BasePlugin","IndexesSequence","PhysicalIndexToValueMap","IndexToValueMap","Hooks","ColumnStatesManager","HEADER_SPAN_CLASS","getNextSortOrder","areValidSortStates","getHeaderSpanElement","isFirstLevelColumnHeader","wasHeaderClickedProperly","getClassesToRemove","getClassesToAdd","rootComparator","registerRootComparator","sort","A11Y_SORT","PLUGIN_KEY","PLUGIN_PRIORITY","APPEND_COLUMN_CONFIG_STRATEGY","REPLACE_COLUMN_CONFIG_STRATEGY","SHORTCUTS_GROUP","getSingleton","register","_loadOrSortBySettings","WeakSet","_onAfterGetColHeader","_onAfterLoadData","_onBeforeOnCellMouseDown","ColumnSorting","constructor","arguments","isEnabled","hot","getSettings","pluginKey","enablePlugin","_this","enabled","columnStatesManager","columnMetaCache","physicalIndex","visualIndex","toVisualColumn","getMergedPluginSettings","columnIndexMapper","registerMap","addHook","column","TH","_onAfterGetColHeader2","_len","length","args","Array","_key","_onBeforeOnCellMouseDown2","event","target","onAfterOnCellMouseDown","_loadOrSortBySettings2","_len2","_key2","_onAfterLoadData2","view","registerShortcuts","disablePlugin","clearColHeader","headerSpanElement","updateHeaderClasses","addHookOnce","removeHook","batchExecution","indexesSequenceCache","rowIndexMapper","setIndexesSequence","getValues","unregisterMap","destroy","unregisterShortcuts","getShortcutManager","getContext","addShortcut","keys","callback","highlight","getSelectedRangeLast","row","col","getColumnNextConfig","runOnlyIf","_this$hot$getSelected","selection","isCellVisible","isHeader","group","removeShortcutsByGroup","sortConfig","currentSortConfig","getSortConfig","destinationSortConfigs","getNormalizedSortConfigs","sortPossible","areValidSortConfigs","allowSort","runHooks","setValues","getIndexesSequence","setSortStates","sortByPresetSortStates","saveAllSortSettings","render","forceFullRender","clearSort","isSorted","isListOfSortedColumnsEmpty","getColumnSortState","getSortStates","setSortConfig","undefined","isArray","slice","sortConfigs","numberOfColumns","countCols","every","_ref","allSortSettings","getAllColumnsProperties","translateColumnToPhysical","_ref2","visualColumn","restOfProperties","toPhysicalColumn","initialConfig","getAllSavedSortSettings","storedAllSortSettings","translateColumnToVisual","_ref3","physicalColumn","sortOrder","getSortOrderOfColumn","nextSortOrder","nrOfColumns","isInteger","getNextSortConfig","columnToChange","strategyId","indexOfColumnToChange","getIndexOfColumnInSortQueue","isColumnSorted","nextColumnConfig","concat","getPluginColumnConfig","columnConfig","pluginColumnConfig","pluginMainSettings","storedColumnProperties","cellMeta","getCellMeta","columnMeta","getPrototypeOf","columns","assign","getFirstCellSettings","cellMetaCopy","create","getValueAtIndex","getNumberOfRowsToSort","numberOfRows","settings","maxRows","minSpareRows","indexesWithData","countRows","getDataForSortedColumns","visualRowIndex","getDataAtCell","push","toPhysicalRow","indexesBefore","indexWithData","indexesAfter","indexMapping","Map","indexBefore","indexInsideArray","newIndexesSequence","get","sortBySettings","updateAllColumnsProperties","_len3","_key3","onUpdateSettings","newSettings","init","getNumberOfIndexes","wasClickableHeaderClicked","pluginSettingsForColumn","headerActionEnabled","headerAction","coords","isCtrlPressed","deselectCell","selectColumns","_this$columnStatesMan","showSortIndicator","indicator","ariaTags","currentSortState","initialLoad","TD","controller"],"sources":["C:/laragon/www/SIAW-Angular-B/node_modules/handsontable/plugins/columnSorting/columnSorting.mjs"],"sourcesContent":["import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.error.cause.js\";\nfunction _classPrivateMethodInitSpec(obj, privateSet) { _checkPrivateRedeclaration(obj, privateSet); privateSet.add(obj); }\nfunction _checkPrivateRedeclaration(obj, privateCollection) { if (privateCollection.has(obj)) { throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); } }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classPrivateMethodGet(receiver, privateSet, fn) { if (!privateSet.has(receiver)) { throw new TypeError(\"attempted to get private field on non-instance\"); } return fn; }\nimport { addClass, hasClass, removeClass, setAttribute } from \"../../helpers/dom/element.mjs\";\nimport { isUndefined, isDefined } from \"../../helpers/mixed.mjs\";\nimport { isObject } from \"../../helpers/object.mjs\";\nimport { isFunction } from \"../../helpers/function.mjs\";\nimport { arrayMap } from \"../../helpers/array.mjs\";\nimport { BasePlugin } from \"../base/index.mjs\";\nimport { IndexesSequence, PhysicalIndexToValueMap as IndexToValueMap } from \"../../translations/index.mjs\";\nimport Hooks from \"../../pluginHooks.mjs\";\nimport { ColumnStatesManager } from \"./columnStatesManager.mjs\";\nimport { HEADER_SPAN_CLASS, getNextSortOrder, areValidSortStates, getHeaderSpanElement, isFirstLevelColumnHeader, wasHeaderClickedProperly } from \"./utils.mjs\";\nimport { getClassesToRemove, getClassesToAdd } from \"./domHelpers.mjs\";\nimport { rootComparator } from \"./rootComparator.mjs\";\nimport { registerRootComparator, sort } from \"./sortService/index.mjs\";\nimport { A11Y_SORT } from \"../../helpers/a11y.mjs\";\nexport const PLUGIN_KEY = 'columnSorting';\nexport const PLUGIN_PRIORITY = 50;\nexport const APPEND_COLUMN_CONFIG_STRATEGY = 'append';\nexport const REPLACE_COLUMN_CONFIG_STRATEGY = 'replace';\nconst SHORTCUTS_GROUP = PLUGIN_KEY;\nregisterRootComparator(PLUGIN_KEY, rootComparator);\nHooks.getSingleton().register('beforeColumnSort');\nHooks.getSingleton().register('afterColumnSort');\n\n// DIFF - MultiColumnSorting & ColumnSorting: changed configuration documentation.\n/**\n * @plugin ColumnSorting\n * @class ColumnSorting\n *\n * @description\n * This plugin sorts the view by columns (but does not sort the data source!). To enable the plugin, set the\n * {@link Options#columnSorting} property to the correct value (see the examples below).\n *\n * @example\n * ```js\n * // as boolean\n * columnSorting: true\n *\n * // as an object with initial sort config (sort ascending for column at index 1)\n * columnSorting: {\n *   initialConfig: {\n *     column: 1,\n *     sortOrder: 'asc'\n *   }\n * }\n *\n * // as an object which define specific sorting options for all columns\n * columnSorting: {\n *   sortEmptyCells: true, // true = the table sorts empty cells, false = the table moves all empty cells to the end of the table (by default)\n *   indicator: true, // true = shows indicator for all columns (by default), false = don't show indicator for columns\n *   headerAction: true, // true = allow to click on the headers to sort (by default), false = turn off possibility to click on the headers to sort\n *   compareFunctionFactory: function(sortOrder, columnMeta) {\n *     return function(value, nextValue) {\n *       // Some value comparisons which will return -1, 0 or 1...\n *     }\n *   }\n * }\n *\n * // as an object passed to the `column` property, allows specifying a custom options for the desired column.\n * // please take a look at documentation of `column` property: https://handsontable.com/docs/Options.html#columns\n * columns: [{\n *   columnSorting: {\n *     indicator: false, // disable indicator for the first column,\n *     sortEmptyCells: true,\n *     headerAction: false, // clicks on the first column won't sort\n *     compareFunctionFactory: function(sortOrder, columnMeta) {\n *       return function(value, nextValue) {\n *         return 0; // Custom compare function for the first column (don't sort)\n *       }\n *     }\n *   }\n * }]\n * ```\n */\nvar _loadOrSortBySettings = /*#__PURE__*/new WeakSet();\nvar _onAfterGetColHeader = /*#__PURE__*/new WeakSet();\nvar _onAfterLoadData = /*#__PURE__*/new WeakSet();\nvar _onBeforeOnCellMouseDown = /*#__PURE__*/new WeakSet();\nexport class ColumnSorting extends BasePlugin {\n  constructor() {\n    super(...arguments);\n    /**\n     * Changes the behavior of selection / dragging.\n     *\n     * @param {MouseEvent} event The `mousedown` event.\n     * @param {CellCoords} coords Visual coordinates.\n     * @param {HTMLElement} TD The cell element.\n     * @param {object} controller An object with properties `row`, `column` and `cell`. Each property contains\n     *                            a boolean value that allows or disallows changing the selection for that particular area.\n     */\n    _classPrivateMethodInitSpec(this, _onBeforeOnCellMouseDown);\n    /**\n     * Callback for the `afterLoadData` hook.\n     *\n     * @param {boolean} initialLoad Flag that determines whether the data has been loaded during the initialization.\n     */\n    _classPrivateMethodInitSpec(this, _onAfterLoadData);\n    /**\n     * Callback for the `onAfterGetColHeader` hook. Adds column sorting CSS classes.\n     *\n     * @param {number} column Visual column index.\n     * @param {Element} TH TH HTML element.\n     */\n    _classPrivateMethodInitSpec(this, _onAfterGetColHeader);\n    /**\n     * Load saved settings or sort by predefined plugin configuration.\n     */\n    _classPrivateMethodInitSpec(this, _loadOrSortBySettings);\n    /**\n     * Instance of column state manager.\n     *\n     * @private\n     * @type {null|ColumnStatesManager}\n     */\n    _defineProperty(this, \"columnStatesManager\", null);\n    /**\n     * Cached column properties from plugin like i.e. `indicator`, `headerAction`.\n     *\n     * @private\n     * @type {null|PhysicalIndexToValueMap}\n     */\n    _defineProperty(this, \"columnMetaCache\", null);\n    /**\n     * Main settings key designed for the plugin.\n     *\n     * @private\n     * @type {string}\n     */\n    _defineProperty(this, \"pluginKey\", PLUGIN_KEY);\n    /**\n     * Plugin indexes cache.\n     *\n     * @private\n     * @type {null|IndexesSequence}\n     */\n    _defineProperty(this, \"indexesSequenceCache\", null);\n  }\n  static get PLUGIN_KEY() {\n    return PLUGIN_KEY;\n  }\n  static get PLUGIN_PRIORITY() {\n    return PLUGIN_PRIORITY;\n  }\n  /**\n   * Checks if the plugin is enabled in the Handsontable settings. This method is executed in {@link Hooks#beforeInit}\n   * hook and if it returns `true` then the {@link ColumnSorting#enablePlugin} method is called.\n   *\n   * @returns {boolean}\n   */\n  isEnabled() {\n    return !!this.hot.getSettings()[this.pluginKey];\n  }\n\n  /**\n   * Enables the plugin functionality for this Handsontable instance.\n   */\n  enablePlugin() {\n    var _this = this;\n    if (this.enabled) {\n      return;\n    }\n    this.columnStatesManager = new ColumnStatesManager(this.hot, `${this.pluginKey}.sortingStates`);\n    this.columnMetaCache = new IndexToValueMap(physicalIndex => {\n      let visualIndex = this.hot.toVisualColumn(physicalIndex);\n      if (visualIndex === null) {\n        visualIndex = physicalIndex;\n      }\n      return this.getMergedPluginSettings(visualIndex);\n    });\n    this.hot.columnIndexMapper.registerMap(`${this.pluginKey}.columnMeta`, this.columnMetaCache);\n    this.addHook('afterGetColHeader', (column, TH) => _classPrivateMethodGet(this, _onAfterGetColHeader, _onAfterGetColHeader2).call(this, column, TH));\n    this.addHook('beforeOnCellMouseDown', function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return _classPrivateMethodGet(_this, _onBeforeOnCellMouseDown, _onBeforeOnCellMouseDown2).call(_this, ...args);\n    });\n    this.addHook('afterOnCellMouseDown', (event, target) => this.onAfterOnCellMouseDown(event, target));\n    this.addHook('afterInit', () => _classPrivateMethodGet(this, _loadOrSortBySettings, _loadOrSortBySettings2).call(this));\n    this.addHook('afterLoadData', function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      return _classPrivateMethodGet(_this, _onAfterLoadData, _onAfterLoadData2).call(_this, ...args);\n    });\n\n    // TODO: Workaround? It should be refactored / described.\n    if (this.hot.view) {\n      _classPrivateMethodGet(this, _loadOrSortBySettings, _loadOrSortBySettings2).call(this);\n    }\n    this.registerShortcuts();\n    super.enablePlugin();\n  }\n\n  /**\n   * Disables the plugin functionality for this Handsontable instance.\n   */\n  disablePlugin() {\n    const clearColHeader = (column, TH) => {\n      const headerSpanElement = getHeaderSpanElement(TH);\n      if (isFirstLevelColumnHeader(column, TH) === false || headerSpanElement === null) {\n        return;\n      }\n      this.updateHeaderClasses(headerSpanElement);\n    };\n\n    // Changing header width and removing indicator.\n    this.hot.addHook('afterGetColHeader', clearColHeader);\n    this.hot.addHookOnce('afterViewRender', () => {\n      this.hot.removeHook('afterGetColHeader', clearColHeader);\n    });\n    this.hot.batchExecution(() => {\n      if (this.indexesSequenceCache !== null) {\n        this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues());\n        this.hot.rowIndexMapper.unregisterMap(this.pluginKey);\n      }\n    }, true);\n    this.hot.columnIndexMapper.unregisterMap(`${this.pluginKey}.columnMeta`);\n    this.columnStatesManager.destroy();\n    this.columnMetaCache = null;\n    this.columnStatesManager = null;\n    this.unregisterShortcuts();\n    super.disablePlugin();\n  }\n\n  /**\n   * Register shortcuts responsible for toggling column sorting functionality.\n   *\n   * @private\n   */\n  registerShortcuts() {\n    this.hot.getShortcutManager().getContext('grid').addShortcut({\n      keys: [['Enter']],\n      callback: () => {\n        const {\n          highlight\n        } = this.hot.getSelectedRangeLast();\n        if (highlight.row === -1 && highlight.col >= 0) {\n          this.sort(this.getColumnNextConfig(highlight.col));\n        }\n      },\n      runOnlyIf: () => {\n        var _this$hot$getSelected;\n        const highlight = (_this$hot$getSelected = this.hot.getSelectedRangeLast()) === null || _this$hot$getSelected === void 0 ? void 0 : _this$hot$getSelected.highlight;\n        return highlight && this.hot.selection.isCellVisible(highlight) && highlight.isHeader();\n      },\n      group: SHORTCUTS_GROUP\n    });\n  }\n\n  /**\n   * Unregister shortcuts responsible for toggling column sorting functionality.\n   *\n   * @private\n   */\n  unregisterShortcuts() {\n    this.hot.getShortcutManager().getContext('grid').removeShortcutsByGroup(SHORTCUTS_GROUP);\n  }\n\n  // DIFF - MultiColumnSorting & ColumnSorting: changed function documentation.\n  /**\n   * Sorts the table by chosen columns and orders.\n   *\n   * @param {undefined|object} sortConfig Single column sort configuration. The configuration object contains `column` and `sortOrder` properties.\n   * First of them contains visual column index, the second one contains sort order (`asc` for ascending, `desc` for descending).\n   *\n   * **Note**: Please keep in mind that every call of `sort` function set an entirely new sort order. Previous sort configs aren't preserved.\n   *\n   * @example\n   * ```js\n   * // sort ascending first visual column\n   * hot.getPlugin('columnSorting').sort({ column: 0, sortOrder: 'asc' });\n   * ```\n   *\n   * @fires Hooks#beforeColumnSort\n   * @fires Hooks#afterColumnSort\n   */\n  sort(sortConfig) {\n    const currentSortConfig = this.getSortConfig();\n\n    // We always pass configs defined as an array to `beforeColumnSort` and `afterColumnSort` hooks.\n    const destinationSortConfigs = this.getNormalizedSortConfigs(sortConfig);\n    const sortPossible = this.areValidSortConfigs(destinationSortConfigs);\n    const allowSort = this.hot.runHooks('beforeColumnSort', currentSortConfig, destinationSortConfigs, sortPossible);\n    if (allowSort === false) {\n      return;\n    }\n    if (currentSortConfig.length === 0 && this.indexesSequenceCache === null) {\n      this.indexesSequenceCache = this.hot.rowIndexMapper.registerMap(this.pluginKey, new IndexesSequence());\n      this.indexesSequenceCache.setValues(this.hot.rowIndexMapper.getIndexesSequence());\n    }\n    if (sortPossible) {\n      this.columnStatesManager.setSortStates(destinationSortConfigs);\n      this.sortByPresetSortStates(destinationSortConfigs);\n      this.saveAllSortSettings(destinationSortConfigs);\n    }\n    this.hot.runHooks('afterColumnSort', currentSortConfig, sortPossible ? destinationSortConfigs : currentSortConfig, sortPossible);\n    if (sortPossible) {\n      this.hot.render();\n      // TODO: Workaround? This triggers fast redraw. One test won't pass after removal.\n      // It should be refactored / described.\n      this.hot.forceFullRender = false;\n      this.hot.view.render();\n    }\n  }\n\n  /**\n   * Clear the sort performed on the table.\n   */\n  clearSort() {\n    this.sort([]);\n  }\n\n  /**\n   * Checks if the table is sorted (any column have to be sorted).\n   *\n   * @returns {boolean}\n   */\n  isSorted() {\n    return this.enabled && !this.columnStatesManager.isListOfSortedColumnsEmpty();\n  }\n\n  /**\n   * Get sort configuration for particular column or for all sorted columns. Objects contain `column` and `sortOrder` properties.\n   *\n   * **Note**: Please keep in mind that returned objects expose **visual** column index under the `column` key. They are handled by the `sort` function.\n   *\n   * @param {number} [column] Visual column index.\n   * @returns {undefined|object|Array}\n   */\n  getSortConfig(column) {\n    if (isDefined(column)) {\n      return this.columnStatesManager.getColumnSortState(column);\n    }\n    return this.columnStatesManager.getSortStates();\n  }\n\n  /**\n   * @description\n   * Warn: Useful mainly for providing server side sort implementation (see in the example below). It doesn't sort the data set. It just sets sort configuration for all sorted columns.\n   * Note: Please keep in mind that this method doesn't re-render the table.\n   *\n   * @example\n   * ```js\n   * beforeColumnSort: function(currentSortConfig, destinationSortConfigs) {\n   *   const columnSortPlugin = this.getPlugin('columnSorting');\n   *\n   *   columnSortPlugin.setSortConfig(destinationSortConfigs);\n   *\n   *   // const newData = ... // Calculated data set, ie. from an AJAX call.\n   *\n   *   this.loadData(newData); // Load new data set and re-render the table.\n   *\n   *   return false; // The blockade for the default sort action.\n   * }\n   * ```\n   *\n   * @param {undefined|object|Array} sortConfig Single column sort configuration or full sort configuration (for all sorted columns).\n   * The configuration object contains `column` and `sortOrder` properties. First of them contains visual column index, the second one contains\n   * sort order (`asc` for ascending, `desc` for descending).\n   */\n  setSortConfig(sortConfig) {\n    // We always set configs defined as an array.\n    const destinationSortConfigs = this.getNormalizedSortConfigs(sortConfig);\n    if (this.areValidSortConfigs(destinationSortConfigs)) {\n      this.columnStatesManager.setSortStates(destinationSortConfigs);\n    }\n  }\n\n  /**\n   * Get normalized sort configs.\n   *\n   * @private\n   * @param {object|Array} [sortConfig=[]] Single column sort configuration or full sort configuration (for all sorted columns).\n   * The configuration object contains `column` and `sortOrder` properties. First of them contains visual column index, the second one contains\n   * sort order (`asc` for ascending, `desc` for descending).\n   * @returns {Array}\n   */\n  getNormalizedSortConfigs() {\n    let sortConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    if (Array.isArray(sortConfig)) {\n      return sortConfig.slice(0, 1);\n    }\n    return [sortConfig];\n  }\n\n  /**\n   * Get if sort configs are valid.\n   *\n   * @private\n   * @param {Array} sortConfigs Sort configuration for all sorted columns. Objects contain `column` and `sortOrder` properties.\n   * @returns {boolean}\n   */\n  areValidSortConfigs(sortConfigs) {\n    const numberOfColumns = this.hot.countCols();\n\n    // We don't translate visual indexes to physical indexes.\n    return areValidSortStates(sortConfigs) && sortConfigs.every(_ref => {\n      let {\n        column\n      } = _ref;\n      return column <= numberOfColumns && column >= 0;\n    });\n  }\n\n  /**\n   * Saves all sorting settings. Saving works only when {@link Options#persistentState} option is enabled.\n   *\n   * @param {Array} sortConfigs Sort configuration for all sorted columns. Objects contain `column` and `sortOrder` properties.\n   *\n   * @private\n   * @fires Hooks#persistentStateSave\n   */\n  saveAllSortSettings(sortConfigs) {\n    const allSortSettings = this.columnStatesManager.getAllColumnsProperties();\n    const translateColumnToPhysical = _ref2 => {\n      let {\n        column: visualColumn,\n        ...restOfProperties\n      } = _ref2;\n      return {\n        column: this.hot.toPhysicalColumn(visualColumn),\n        ...restOfProperties\n      };\n    };\n    allSortSettings.initialConfig = arrayMap(sortConfigs, translateColumnToPhysical);\n    this.hot.runHooks('persistentStateSave', 'columnSorting', allSortSettings);\n  }\n\n  /**\n   * Get all saved sorting settings. Loading works only when {@link Options#persistentState} option is enabled.\n   *\n   * @private\n   * @returns {object} Previously saved sort settings.\n   *\n   * @fires Hooks#persistentStateLoad\n   */\n  getAllSavedSortSettings() {\n    const storedAllSortSettings = {};\n    this.hot.runHooks('persistentStateLoad', 'columnSorting', storedAllSortSettings);\n    const allSortSettings = storedAllSortSettings.value;\n    const translateColumnToVisual = _ref3 => {\n      let {\n        column: physicalColumn,\n        ...restOfProperties\n      } = _ref3;\n      return {\n        column: this.hot.toVisualColumn(physicalColumn),\n        ...restOfProperties\n      };\n    };\n    if (isDefined(allSortSettings) && Array.isArray(allSortSettings.initialConfig)) {\n      allSortSettings.initialConfig = arrayMap(allSortSettings.initialConfig, translateColumnToVisual);\n    }\n    return allSortSettings;\n  }\n\n  /**\n   * Get next sort configuration for particular column. Object contain `column` and `sortOrder` properties.\n   *\n   * **Note**: Please keep in mind that returned object expose **visual** column index under the `column` key.\n   *\n   * @private\n   * @param {number} column Visual column index.\n   * @returns {undefined|object}\n   */\n  getColumnNextConfig(column) {\n    const sortOrder = this.columnStatesManager.getSortOrderOfColumn(column);\n    if (isDefined(sortOrder)) {\n      const nextSortOrder = getNextSortOrder(sortOrder);\n      if (isDefined(nextSortOrder)) {\n        return {\n          column,\n          sortOrder: nextSortOrder\n        };\n      }\n      return;\n    }\n    const nrOfColumns = this.hot.countCols();\n    if (Number.isInteger(column) && column >= 0 && column < nrOfColumns) {\n      return {\n        column,\n        sortOrder: getNextSortOrder()\n      };\n    }\n  }\n\n  /**\n   * Get sort configuration with \"next order\" for particular column.\n   *\n   * @private\n   * @param {number} columnToChange Visual column index of column which order will be changed.\n   * @param {string} strategyId ID of strategy. Possible values: 'append' and 'replace'. The first one\n   * change order of particular column and change it's position in the sort queue to the last one. The second one\n   * just change order of particular column.\n   *\n   * **Note**: Please keep in mind that returned objects expose **visual** column index under the `column` key.\n   *\n   * @returns {Array}\n   */\n  getNextSortConfig(columnToChange) {\n    let strategyId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : APPEND_COLUMN_CONFIG_STRATEGY;\n    const indexOfColumnToChange = this.columnStatesManager.getIndexOfColumnInSortQueue(columnToChange);\n    const isColumnSorted = indexOfColumnToChange !== -1;\n    const currentSortConfig = this.getSortConfig();\n    const nextColumnConfig = this.getColumnNextConfig(columnToChange);\n    if (isColumnSorted) {\n      if (isUndefined(nextColumnConfig)) {\n        return [...currentSortConfig.slice(0, indexOfColumnToChange), ...currentSortConfig.slice(indexOfColumnToChange + 1)];\n      }\n      if (strategyId === APPEND_COLUMN_CONFIG_STRATEGY) {\n        return [...currentSortConfig.slice(0, indexOfColumnToChange), ...currentSortConfig.slice(indexOfColumnToChange + 1), nextColumnConfig];\n      } else if (strategyId === REPLACE_COLUMN_CONFIG_STRATEGY) {\n        return [...currentSortConfig.slice(0, indexOfColumnToChange), nextColumnConfig, ...currentSortConfig.slice(indexOfColumnToChange + 1)];\n      }\n    }\n    if (isDefined(nextColumnConfig)) {\n      return currentSortConfig.concat(nextColumnConfig);\n    }\n    return currentSortConfig;\n  }\n\n  /**\n   * Get plugin's column config for the specified column index.\n   *\n   * @private\n   * @param {object} columnConfig Configuration inside `columns` property for the specified column index.\n   * @returns {object}\n   */\n  getPluginColumnConfig(columnConfig) {\n    if (isObject(columnConfig)) {\n      const pluginColumnConfig = columnConfig[this.pluginKey];\n      if (isObject(pluginColumnConfig)) {\n        return pluginColumnConfig;\n      }\n    }\n    return {};\n  }\n\n  /**\n   * Get plugin settings related properties, properly merged from cascade settings.\n   *\n   * @private\n   * @param {number} column Visual column index.\n   * @returns {object}\n   */\n  getMergedPluginSettings(column) {\n    const pluginMainSettings = this.hot.getSettings()[this.pluginKey];\n    const storedColumnProperties = this.columnStatesManager.getAllColumnsProperties();\n    const cellMeta = this.hot.getCellMeta(0, column);\n    const columnMeta = Object.getPrototypeOf(cellMeta);\n    if (Array.isArray(columnMeta.columns)) {\n      return Object.assign(storedColumnProperties, pluginMainSettings, this.getPluginColumnConfig(columnMeta.columns[column]));\n    } else if (isFunction(columnMeta.columns)) {\n      return Object.assign(storedColumnProperties, pluginMainSettings, this.getPluginColumnConfig(columnMeta.columns(column)));\n    }\n    return Object.assign(storedColumnProperties, pluginMainSettings);\n  }\n\n  /**\n   * Get copy of settings for first cell in the column.\n   *\n   * @private\n   * @param {number} column Visual column index.\n   * @returns {object}\n   */\n  // TODO: Workaround. Inheriting of non-primitive cell meta values doesn't work. Instead of getting properties from column meta we call this function.\n  // TODO: Remove test named: \"should not break the dataset when inserted new row\" (#5431).\n  getFirstCellSettings(column) {\n    const cellMeta = this.hot.getCellMeta(0, column);\n    const cellMetaCopy = Object.create(cellMeta);\n    cellMetaCopy[this.pluginKey] = this.columnMetaCache.getValueAtIndex(this.hot.toPhysicalColumn(column));\n    return cellMetaCopy;\n  }\n\n  /**\n   * Get number of rows which should be sorted.\n   *\n   * @private\n   * @param {number} numberOfRows Total number of displayed rows.\n   * @returns {number}\n   */\n  getNumberOfRowsToSort(numberOfRows) {\n    const settings = this.hot.getSettings();\n\n    // `maxRows` option doesn't take into account `minSpareRows` option in this case.\n    if (settings.maxRows <= numberOfRows) {\n      return settings.maxRows;\n    }\n    return numberOfRows - settings.minSpareRows;\n  }\n\n  /**\n   * Performs the sorting using a stable sort function basing on internal state of sorting.\n   *\n   * @param {Array} sortConfigs Sort configuration for all sorted columns. Objects contain `column` and `sortOrder` properties.\n   * @private\n   */\n  sortByPresetSortStates(sortConfigs) {\n    if (sortConfigs.length === 0) {\n      this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues());\n      return;\n    }\n    const indexesWithData = [];\n    const numberOfRows = this.hot.countRows();\n    const getDataForSortedColumns = visualRowIndex => arrayMap(sortConfigs, sortConfig => this.hot.getDataAtCell(visualRowIndex, sortConfig.column));\n    for (let visualRowIndex = 0; visualRowIndex < this.getNumberOfRowsToSort(numberOfRows); visualRowIndex += 1) {\n      indexesWithData.push([this.hot.toPhysicalRow(visualRowIndex)].concat(getDataForSortedColumns(visualRowIndex)));\n    }\n    const indexesBefore = arrayMap(indexesWithData, indexWithData => indexWithData[0]);\n    sort(indexesWithData, this.pluginKey, arrayMap(sortConfigs, sortConfig => sortConfig.sortOrder), arrayMap(sortConfigs, sortConfig => this.getFirstCellSettings(sortConfig.column)));\n\n    // Append spareRows\n    for (let visualRowIndex = indexesWithData.length; visualRowIndex < numberOfRows; visualRowIndex += 1) {\n      indexesWithData.push([visualRowIndex].concat(getDataForSortedColumns(visualRowIndex)));\n    }\n    const indexesAfter = arrayMap(indexesWithData, indexWithData => indexWithData[0]);\n    const indexMapping = new Map(arrayMap(indexesBefore, (indexBefore, indexInsideArray) => [indexBefore, indexesAfter[indexInsideArray]]));\n    const newIndexesSequence = arrayMap(this.hot.rowIndexMapper.getIndexesSequence(), physicalIndex => {\n      if (indexMapping.has(physicalIndex)) {\n        return indexMapping.get(physicalIndex);\n      }\n      return physicalIndex;\n    });\n    this.hot.rowIndexMapper.setIndexesSequence(newIndexesSequence);\n  }\n  /**\n   * Sort the table by provided configuration.\n   *\n   * @private\n   * @param {object} allSortSettings All sort config settings. Object may contain `initialConfig`, `indicator`,\n   * `sortEmptyCells`, `headerAction` and `compareFunctionFactory` properties.\n   */\n  sortBySettings(allSortSettings) {\n    if (isObject(allSortSettings)) {\n      this.columnStatesManager.updateAllColumnsProperties(allSortSettings);\n      const initialConfig = allSortSettings.initialConfig;\n      if (Array.isArray(initialConfig) || isObject(initialConfig)) {\n        this.sort(initialConfig);\n      }\n    } else {\n      // Extra render for headers. Their width may change.\n      this.hot.render();\n    }\n  }\n  /**\n   * Update header classes.\n   *\n   * @private\n   * @param {HTMLElement} headerSpanElement Header span element.\n   * @param {...*} args Extra arguments for helpers.\n   */\n  updateHeaderClasses(headerSpanElement) {\n    removeClass(headerSpanElement, getClassesToRemove(headerSpanElement));\n    if (this.enabled !== false) {\n      for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n        args[_key3 - 1] = arguments[_key3];\n      }\n      addClass(headerSpanElement, getClassesToAdd(...args));\n    }\n  }\n\n  /**\n   * Overwriting base plugin's `onUpdateSettings` method. Please keep in mind that `onAfterUpdateSettings` isn't called\n   * for `updateSettings` in specific situations.\n   *\n   * @private\n   * @param {object} newSettings New settings object.\n   */\n  onUpdateSettings(newSettings) {\n    super.onUpdateSettings();\n    if (this.columnMetaCache !== null) {\n      // Column meta cache base on settings, thus we should re-init the map.\n      this.columnMetaCache.init(this.hot.columnIndexMapper.getNumberOfIndexes());\n    }\n    if (isDefined(newSettings[this.pluginKey])) {\n      this.sortBySettings(newSettings[this.pluginKey]);\n    }\n  }\n  /**\n   * Indicates if clickable header was clicked.\n   *\n   * @private\n   * @param {MouseEvent} event The `mousedown` event.\n   * @param {number} column Visual column index.\n   * @returns {boolean}\n   */\n  wasClickableHeaderClicked(event, column) {\n    const pluginSettingsForColumn = this.getFirstCellSettings(column)[this.pluginKey];\n    const headerActionEnabled = pluginSettingsForColumn.headerAction;\n    return headerActionEnabled && hasClass(event.target, HEADER_SPAN_CLASS);\n  }\n  /**\n   * Callback for the `onAfterOnCellMouseDown` hook.\n   *\n   * @private\n   * @param {Event} event Event which are provided by hook.\n   * @param {CellCoords} coords Visual coords of the selected cell.\n   */\n  onAfterOnCellMouseDown(event, coords) {\n    if (wasHeaderClickedProperly(coords.row, coords.col, event) === false) {\n      return;\n    }\n    if (this.wasClickableHeaderClicked(event, coords.col)) {\n      if (this.hot.getShortcutManager().isCtrlPressed()) {\n        this.hot.deselectCell();\n        this.hot.selectColumns(coords.col);\n      }\n      this.sort(this.getColumnNextConfig(coords.col));\n    }\n  }\n\n  /**\n   * Destroys the plugin instance.\n   */\n  destroy() {\n    var _this$columnStatesMan;\n    // TODO: Probably not supported yet by ESLint: https://github.com/eslint/eslint/issues/11045\n    // eslint-disable-next-line no-unused-expressions\n    (_this$columnStatesMan = this.columnStatesManager) === null || _this$columnStatesMan === void 0 || _this$columnStatesMan.destroy();\n    super.destroy();\n  }\n}\nfunction _loadOrSortBySettings2() {\n  const storedAllSortSettings = this.getAllSavedSortSettings();\n  if (isObject(storedAllSortSettings)) {\n    this.sortBySettings(storedAllSortSettings);\n  } else {\n    const allSortSettings = this.hot.getSettings()[this.pluginKey];\n    this.sortBySettings(allSortSettings);\n  }\n}\nfunction _onAfterGetColHeader2(column, TH) {\n  const headerSpanElement = getHeaderSpanElement(TH);\n  if (isFirstLevelColumnHeader(column, TH) === false || headerSpanElement === null) {\n    return;\n  }\n  const pluginSettingsForColumn = this.getFirstCellSettings(column)[this.pluginKey];\n  const showSortIndicator = pluginSettingsForColumn.indicator;\n  const headerActionEnabled = pluginSettingsForColumn.headerAction;\n  this.updateHeaderClasses(headerSpanElement, this.columnStatesManager, column, showSortIndicator, headerActionEnabled);\n  if (this.hot.getSettings().ariaTags) {\n    const currentSortState = this.columnStatesManager.getSortOrderOfColumn(column);\n    setAttribute(TH, ...A11Y_SORT(currentSortState ? `${currentSortState}ending` : 'none'));\n  }\n}\nfunction _onAfterLoadData2(initialLoad) {\n  if (initialLoad === true) {\n    // TODO: Workaround? It should be refactored / described.\n    if (this.hot.view) {\n      _classPrivateMethodGet(this, _loadOrSortBySettings, _loadOrSortBySettings2).call(this);\n    }\n  }\n}\nfunction _onBeforeOnCellMouseDown2(event, coords, TD, controller) {\n  if (wasHeaderClickedProperly(coords.row, coords.col, event) === false) {\n    return;\n  }\n  if (this.wasClickableHeaderClicked(event, coords.col) && this.hot.getShortcutManager().isCtrlPressed()) {\n    controller.column = true;\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}