{"ast":null,"code":"import { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { MatTableDataSource } from '@angular/material/table';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@services/api.service\";\nimport * as i3 from \"../services-saldo-matriz/saldo-item-matriz.service\";\nimport * as i4 from \"@angular/material/table\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/card\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/sort\";\nimport * as i9 from \"@angular/material/tabs\";\nimport * as i10 from \"@angular/common\";\nvar _c0 = [\"paginator\"];\nvar _c1 = [\"paginatorPageSize\"];\nfunction ModalSaldosComponent_th_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 22);\n    i0.ɵɵtext(1, \" Descripci\\u00F3n \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ModalSaldosComponent_td_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    var element_r12 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(element_r12.descripcion);\n  }\n}\nfunction ModalSaldosComponent_th_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 22);\n    i0.ɵɵtext(1, \" Saldo Local \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ModalSaldosComponent_td_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    var element_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, element_r13.valor, \"2.2-2\"), \" \");\n  }\n}\nfunction ModalSaldosComponent_tr_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 25);\n  }\n}\nfunction ModalSaldosComponent_tr_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 26);\n  }\n}\nfunction ModalSaldosComponent_th_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 22);\n    i0.ɵɵtext(1, \" Descripci\\u00F3n \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ModalSaldosComponent_td_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    var element_r15 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(element_r15.descripcion);\n  }\n}\nfunction ModalSaldosComponent_th_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 22);\n    i0.ɵɵtext(1, \" Saldo Local \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ModalSaldosComponent_td_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    var element_r16 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, element_r16.valor, \"2.2-2\"), \" \");\n  }\n}\nfunction ModalSaldosComponent_tr_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 25);\n  }\n}\nfunction ModalSaldosComponent_tr_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 26);\n  }\n}\nvar ModalSaldosComponent = /** @class */function () {\n  function ModalSaldosComponent(dialogRef, api, dataAgencias, saldoItemServices) {\n    this.dialogRef = dialogRef;\n    this.api = api;\n    this.dataAgencias = dataAgencias;\n    this.saldoItemServices = saldoItemServices;\n    this.id_tipo = [];\n    this.saldo_variable = [];\n    this.codigo = '';\n    this.BD_storage = [];\n    this.displayedColumns = ['descripcion', 'valor'];\n    this.dataSource = new MatTableDataSource();\n    this.dataSourceWithPageSize = new MatTableDataSource();\n    this.userConn = localStorage.getItem(\"user_conn\") !== undefined ? JSON.parse(localStorage.getItem(\"user_conn\")) : null;\n    this.user_logueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\n    this.BD_storage = localStorage.getItem(\"bd_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"bd_logueado\")) : null;\n    if (this.BD_storage.bd === 'Loc') {\n      this.BD_storage.bd = '311';\n    }\n    console.log(dataAgencias);\n    this.infoAgenciaSaldo = dataAgencias.cod_almacen;\n    this.posicion_fija = dataAgencias.posicion_fija;\n    console.log(this.posicion_fija);\n  }\n  ModalSaldosComponent.prototype.ngOnInit = function () {\n    this.getSaldoItem();\n  };\n  ModalSaldosComponent.prototype.getSaldoItem = function () {\n    var _this = this;\n    var agencia_concat = \"AG\" + this.infoAgenciaSaldo;\n    var errorMessage = \"La Ruta o el servidor presenta fallos al hacer peticion GET\";\n    return this.api.getAll('/venta/transac/veproforma/getsaldosCompleto/' + this.userConn + \"/\" + agencia_concat + \"/\" + this.infoAgenciaSaldo + \"/\" + this.dataAgencias.cod_item + \"/\" + this.BD_storage.bd + \"/\" + this.user_logueado).subscribe({\n      next: function (datav) {\n        _this.id_tipo = datav;\n        console.log('data', datav);\n        _this.letraSaldos = _this.id_tipo[0].resp;\n        _this.saldo_variable = _this.id_tipo[2];\n        _this.dataSource = new MatTableDataSource(_this.id_tipo[1]);\n        _this.dataSource.paginator = _this.paginator;\n        _this.dataSourceWithPageSize.paginator = _this.paginatorPageSize;\n        // LETRA\n        _this.id_tipo[1].forEach(function (element) {\n          if (element.descripcion === 'Total Saldo') {\n            _this.saldoLocal = element.valor;\n          }\n        });\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n      },\n      complete: function () {\n        console.log(_this.saldoLocal);\n      }\n    });\n  };\n  ModalSaldosComponent.prototype.mandarTotalSaldo = function () {\n    switch (this.posicion_fija) {\n      case 1:\n        this.saldoItemServices.disparadorDeSaldoAlm1.emit({\n          saldo1: this.saldoLocal\n        });\n        break;\n      case 2:\n        this.saldoItemServices.disparadorDeSaldoAlm2.emit({\n          saldo2: this.saldoLocal\n        });\n        break;\n      case 3:\n        this.saldoItemServices.disparadorDeSaldoAlm3.emit({\n          saldo3: this.saldoLocal\n        });\n        break;\n      case 4:\n        this.saldoItemServices.disparadorDeSaldoAlm4.emit({\n          saldo4: this.saldoLocal\n        });\n        break;\n      case 5:\n        this.saldoItemServices.disparadorDeSaldoAlm5.emit({\n          saldo5: this.saldoLocal\n        });\n        break;\n      default:\n        break;\n    }\n    this.close();\n  };\n  ModalSaldosComponent.prototype.getIdTipoView = function (codigo) {\n    this.tipo_view = codigo;\n  };\n  ModalSaldosComponent.prototype.close = function () {\n    this.dialogRef.close();\n  };\n  ModalSaldosComponent.ɵfac = function ModalSaldosComponent_Factory(t) {\n    return new (t || ModalSaldosComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i3.SaldoItemMatrizService));\n  };\n  ModalSaldosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ModalSaldosComponent,\n    selectors: [[\"app-modal-saldos\"]],\n    viewQuery: function ModalSaldosComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n      if (rf & 2) {\n        var _t = void 0;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginatorPageSize = _t.first);\n      }\n    },\n    decls: 59,\n    vars: 13,\n    consts: [[1, \"p-1\"], [1, \"title\"], [\"color\", \"primary\", 2, \"float\", \"right\", \"color\", \"white\", \"font-size\", \"20px\", 3, \"click\"], [1, \"mat-elevation-z8\"], [1, \"row\", \"text-center\"], [1, \"col-md-12\", 2, \"padding\", \"5px 0px 0px\"], [\"label\", \"Detalle de Saldo\"], [1, \"row\"], [1, \"col-lg\"], [1, \"team\", \"bg-white\", \"scrollmenu\"], [1, \"col-lg-12\", 2, \"width\", \"100%\", \"overflow-x\", \"auto\"], [\"mat-table\", \"\", \"multiTemplateDataRows\", \"\", \"matSort\", \"\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"descripcion\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"style\", \"text-align: left;\", 4, \"matCellDef\"], [\"matColumnDef\", \"valor\"], [\"mat-cell\", \"\", \"style\", \"text-align: right !important;\", 4, \"matCellDef\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"label\", \"Saldo Variable\"], [1, \"col\"], [\"type\", \"text\", \"readonly\", \"true\", 2, \"width\", \"40%\", \"text-align\", \"right\", 3, \"value\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\", 2, \"text-align\", \"left\"], [\"mat-cell\", \"\", 2, \"text-align\", \"right !important\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n    template: function ModalSaldosComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtext(2, \"Saldo Detallado de Item \");\n        i0.ɵɵelementStart(3, \"mat-icon\", 2);\n        i0.ɵɵlistener(\"click\", function ModalSaldosComponent_Template_mat_icon_click_3_listener() {\n          return ctx.mandarTotalSaldo();\n        });\n        i0.ɵɵtext(4, \"close \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 3)(6, \"div\", 4)(7, \"div\", 5)(8, \"p\")(9, \"strong\");\n        i0.ɵɵtext(10, \"Saldo de Item: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"span\")(13, \"u\");\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(15, \"mat-tab-group\")(16, \"mat-tab\", 6)(17, \"div\", 7)(18, \"div\", 8)(19, \"div\", 9)(20, \"div\", 10)(21, \"table\", 11);\n        i0.ɵɵelementContainerStart(22, 12);\n        i0.ɵɵtemplate(23, ModalSaldosComponent_th_23_Template, 2, 0, \"th\", 13);\n        i0.ɵɵtemplate(24, ModalSaldosComponent_td_24_Template, 2, 1, \"td\", 14);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(25, 15);\n        i0.ɵɵtemplate(26, ModalSaldosComponent_th_26_Template, 2, 0, \"th\", 13);\n        i0.ɵɵtemplate(27, ModalSaldosComponent_td_27_Template, 3, 4, \"td\", 16);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(28, ModalSaldosComponent_tr_28_Template, 1, 0, \"tr\", 17);\n        i0.ɵɵtemplate(29, ModalSaldosComponent_tr_29_Template, 1, 0, \"tr\", 18);\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(30, \"mat-tab\", 19)(31, \"div\", 7)(32, \"div\", 8)(33, \"div\", 9)(34, \"div\", 10)(35, \"table\", 11);\n        i0.ɵɵelementContainerStart(36, 12);\n        i0.ɵɵtemplate(37, ModalSaldosComponent_th_37_Template, 2, 0, \"th\", 13);\n        i0.ɵɵtemplate(38, ModalSaldosComponent_td_38_Template, 2, 1, \"td\", 14);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(39, 15);\n        i0.ɵɵtemplate(40, ModalSaldosComponent_th_40_Template, 2, 0, \"th\", 13);\n        i0.ɵɵtemplate(41, ModalSaldosComponent_td_41_Template, 3, 4, \"td\", 14);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(42, ModalSaldosComponent_tr_42_Template, 1, 0, \"tr\", 17);\n        i0.ɵɵtemplate(43, ModalSaldosComponent_tr_43_Template, 1, 0, \"tr\", 18);\n        i0.ɵɵelementEnd()()()()()()();\n        i0.ɵɵelementStart(44, \"mat-card-footer\")(45, \"div\", 7)(46, \"div\", 20)(47, \"mat-label\")(48, \"u\");\n        i0.ɵɵtext(49, \"\\u00A0Saldo de Agencia\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtext(50, \"\\u00A0 \");\n        i0.ɵɵelement(51, \"input\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"div\", 20)(53, \"mat-label\")(54, \"u\");\n        i0.ɵɵtext(55, \"\\u00A0Saldo de Local\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtext(56, \"\\u00A0 \");\n        i0.ɵɵelement(57, \"input\", 21);\n        i0.ɵɵpipe(58, \"number\");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵtextInterpolate1(\" \\u00A0 \", ctx.dataAgencias.cod_item, \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.letraSaldos);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"dataSource\", ctx.saldo_variable);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(8);\n        i0.ɵɵpropertyInterpolate(\"value\", ctx.infoAgenciaSaldo);\n        i0.ɵɵadvance(6);\n        i0.ɵɵpropertyInterpolate(\"value\", i0.ɵɵpipeBind2(58, 10, ctx.saldoLocal, \"2.2-2\"));\n      }\n    },\n    dependencies: [i4.MatTable, i4.MatHeaderCellDef, i4.MatHeaderRowDef, i4.MatColumnDef, i4.MatCellDef, i4.MatRowDef, i4.MatHeaderCell, i4.MatCell, i4.MatHeaderRow, i4.MatRow, i5.MatLabel, i6.MatCardFooter, i7.MatIcon, i8.MatSort, i9.MatTab, i9.MatTabGroup, i10.DecimalPipe],\n    styles: [\".title[_ngcontent-%COMP%] {\\n  text-align: center;\\n  font-size: 0.8rem;\\n  border-style: solid;\\n  border-color: #ffc107;\\n  background: #093070;\\n  color: white;\\n}\\n\\n.mat-mdc-header-row[_ngcontent-%COMP%] {\\n  background: #093070;\\n}\\n\\n.mdc-data-table__header-cell[_ngcontent-%COMP%] {\\n  text-align: center !important;\\n  color: white !important;\\n}\\n\\n.mat-mdc-table[_ngcontent-%COMP%]   .mdc-data-table__header-row[_ngcontent-%COMP%] {\\n  height: calc(1.6rem + 0px) !important;\\n}\\n\\n.mat-mdc-table[_ngcontent-%COMP%]   .mdc-data-table__row[_ngcontent-%COMP%] {\\n  height: calc(0rem + 0px) !important;\\n}\\n\\n  .mat-form-field-appearance-fill .mat-form-field-flex {\\n  background-color: #fff;\\n}\\n\\n  .mat-form-field-appearance-fill .mat-form-field-flex {\\n  border-radius: 4px;\\n  padding: 0.75em 0.75em 0 0.75em;\\n  border: 1px solid #f94747;\\n}\\n\\nspan[_ngcontent-%COMP%] {\\n  color: #093070 !important;\\n}\\n\\ntd[_ngcontent-%COMP%]:hover {\\n  background-color: #093070;\\n  color: white;\\n}\\n/*# sourceURL=webpack://./src/app/components/mantenimiento/ventas/matriz-items/modal-saldos/modal-saldos.component.scss */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9tYW50ZW5pbWllbnRvL3ZlbnRhcy9tYXRyaXotaXRlbXMvbW9kYWwtc2FsZG9zL21vZGFsLXNhbGRvcy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGtCQUFBO0VBQ0EsaUJBQUE7RUFDQSxtQkFBQTtFQUNBLHFCQUFBO0VBQ0EsbUJBQUE7RUFDQSxZQUFBO0FBQ0o7O0FBRUE7RUFDSSxtQkFBQTtBQUNKOztBQUVBO0VBQ0ksNkJBQUE7RUFDQSx1QkFBQTtBQUNKOztBQUVBO0VBQ0kscUNBQUE7QUFDSjs7QUFDQTtFQUNJLG1DQUFBO0FBRUo7O0FBQ0E7RUFDSSxzQkFBQTtBQUVKOztBQUNBO0VBQ0ksa0JBQUE7RUFDQSwrQkFBQTtFQUNBLHlCQUFBO0FBRUo7O0FBQ0E7RUFDSSx5QkFBQTtBQUVKOztBQUNBO0VBQ0kseUJBQUE7RUFDQSxZQUFBO0FBRUoiLCJzb3VyY2VzQ29udGVudCI6WyIudGl0bGUge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGZvbnQtc2l6ZTogMC44cmVtO1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItY29sb3I6ICNmZmMxMDc7XG4gIGJhY2tncm91bmQ6ICMwOTMwNzA7XG4gIGNvbG9yOiB3aGl0ZTtcbn1cblxuLm1hdC1tZGMtaGVhZGVyLXJvdyB7XG4gIGJhY2tncm91bmQ6ICMwOTMwNzA7XG59XG5cbi5tZGMtZGF0YS10YWJsZV9faGVhZGVyLWNlbGwge1xuICB0ZXh0LWFsaWduOiBjZW50ZXIgIWltcG9ydGFudDtcbiAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG59XG5cbi5tYXQtbWRjLXRhYmxlIC5tZGMtZGF0YS10YWJsZV9faGVhZGVyLXJvdyB7XG4gIGhlaWdodDogY2FsYygxLjZyZW0gKyAwcHgpICFpbXBvcnRhbnQ7XG59XG5cbi5tYXQtbWRjLXRhYmxlIC5tZGMtZGF0YS10YWJsZV9fcm93IHtcbiAgaGVpZ2h0OiBjYWxjKDByZW0gKyAwcHgpICFpbXBvcnRhbnQ7XG59XG5cbjo6bmctZGVlcCAubWF0LWZvcm0tZmllbGQtYXBwZWFyYW5jZS1maWxsIC5tYXQtZm9ybS1maWVsZC1mbGV4IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbn1cblxuOjpuZy1kZWVwIC5tYXQtZm9ybS1maWVsZC1hcHBlYXJhbmNlLWZpbGwgLm1hdC1mb3JtLWZpZWxkLWZsZXgge1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIHBhZGRpbmc6IDAuNzVlbSAwLjc1ZW0gMCAwLjc1ZW07XG4gIGJvcmRlcjogMXB4IHNvbGlkICNmOTQ3NDc7XG59XG5cbnNwYW4ge1xuICBjb2xvcjogIzA5MzA3MCAhaW1wb3J0YW50O1xufVxuXG50ZDpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMwOTMwNzA7XG4gIGNvbG9yOiB3aGl0ZTtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n  return ModalSaldosComponent;\n}();\nexport { ModalSaldosComponent };","map":{"version":3,"mappings":"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","names":["MAT_DIALOG_DATA","MatTableDataSource","i0","dialogRef","api","dataAgencias","saldoItemServices","userConn","localStorage","getItem","undefined","JSON","parse","user_logueado","BD_storage","bd","console","log","infoAgenciaSaldo","cod_almacen","posicion_fija","ModalSaldosComponent","getSaldoItem","agencia_concat","errorMessage","getAll","cod_item","subscribe","next","datav","_this","id_tipo","letraSaldos","resp","saldo_variable","dataSource","paginator","dataSourceWithPageSize","paginatorPageSize","forEach","element","descripcion","saldoLocal","valor","error","err","complete","disparadorDeSaldoAlm1","emit","saldo1","disparadorDeSaldoAlm2","saldo2","disparadorDeSaldoAlm3","saldo3","disparadorDeSaldoAlm4","saldo4","disparadorDeSaldoAlm5","saldo5","close","codigo","tipo_view","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\laragon\\www\\SIAW-Angular-B\\src\\app\\components\\mantenimiento\\ventas\\matriz-items\\modal-saldos\\modal-saldos.component.ts","C:\\laragon\\www\\SIAW-Angular-B\\src\\app\\components\\mantenimiento\\ventas\\matriz-items\\modal-saldos\\modal-saldos.component.html"],"sourcesContent":["import { Component, Inject, OnInit, ViewChild } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatPaginator } from '@angular/material/paginator';\r\nimport { MatTableDataSource } from '@angular/material/table';\r\nimport { ApiService } from '@services/api.service';\r\nimport { Observable } from 'rxjs';\r\nimport { SaldoItemMatrizService } from '../services-saldo-matriz/saldo-item-matriz.service';\r\n@Component({\r\n  selector: 'app-modal-saldos',\r\n  templateUrl: './modal-saldos.component.html',\r\n  styleUrls: ['./modal-saldos.component.scss']\r\n})\r\nexport class ModalSaldosComponent implements OnInit {\r\n\r\n  id_tipo: any = [];\r\n  saldo_variable: any = [];\r\n\r\n  infoAgenciaSaldo: any;\r\n  posicion_fija: any;\r\n  saldoLocal:any;\r\n  public codigo:string='';\r\n  public tipo_view:string;\r\n  public numero_id: string;\r\n\r\n  userConn: string;\r\n  user_logueado: string;\r\n  BD_storage: any = [];\r\n  letraSaldos: string;\r\n  \r\n\r\n  displayedColumns = ['descripcion','valor'];\r\n\r\n  dataSource = new MatTableDataSource();\r\n  dataSourceWithPageSize = new MatTableDataSource();\r\n  \r\n  @ViewChild('paginator') paginator: MatPaginator;\r\n  @ViewChild('paginatorPageSize') paginatorPageSize: MatPaginator;\r\n\r\n  constructor(public dialogRef: MatDialogRef<ModalSaldosComponent>,private api:ApiService, \r\n    @Inject(MAT_DIALOG_DATA) public dataAgencias: any, public saldoItemServices:SaldoItemMatrizService){\r\n    \r\n    this.userConn = localStorage.getItem(\"user_conn\") !== undefined ? JSON.parse(localStorage.getItem(\"user_conn\")) : null;\r\n    this.user_logueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\r\n    this.BD_storage = localStorage.getItem(\"bd_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"bd_logueado\")) : null;\r\n    \r\n    if (this.BD_storage.bd === 'Loc'){\r\n      this.BD_storage.bd = '311'\r\n    }\r\n    console.log(dataAgencias);\r\n    this.infoAgenciaSaldo = dataAgencias.cod_almacen;\r\n\r\n    this.posicion_fija = dataAgencias.posicion_fija;\r\n    console.log(this.posicion_fija);\r\n  }\r\n\r\n  ngOnInit(){\r\n    this.getSaldoItem();\r\n          \r\n  }\r\n\r\n  getSaldoItem() {\r\n    let agencia_concat = \"AG\" + this.infoAgenciaSaldo;\r\n\r\n    let errorMessage = \"La Ruta o el servidor presenta fallos al hacer peticion GET\";\r\n    return this.api.getAll\r\n      ('/venta/transac/veproforma/getsaldosCompleto/' + this.userConn + \"/\" + agencia_concat + \"/\" + this.infoAgenciaSaldo + \"/\" + this.dataAgencias.cod_item + \"/\" + this.BD_storage.bd +\"/\"+ this.user_logueado)\r\n      .subscribe({\r\n        next: (datav) => {\r\n          this.id_tipo = datav;\r\n          console.log('data', datav);\r\n\r\n          this.letraSaldos = this.id_tipo[0].resp;\r\n          this.saldo_variable = this.id_tipo[2];\r\n\r\n          this.dataSource = new MatTableDataSource(this.id_tipo[1]);\r\n          this.dataSource.paginator = this.paginator;\r\n          this.dataSourceWithPageSize.paginator = this.paginatorPageSize;\r\n\r\n          // LETRA\r\n          this.id_tipo[1].forEach(element => {\r\n            if (element.descripcion === 'Total Saldo') { \r\n              this.saldoLocal = element.valor;\r\n            }\r\n          });\r\n        },\r\n                \r\n        error: (err: any) => { \r\n          console.log(err, errorMessage);\r\n        },\r\n        complete: () => {console.log(this.saldoLocal); }\r\n      })\r\n  }\r\n  \r\n  mandarTotalSaldo() {\r\n    switch (this.posicion_fija){\r\n      case 1:\r\n        this.saldoItemServices.disparadorDeSaldoAlm1.emit({\r\n          saldo1:this.saldoLocal,\r\n        });\r\n        break;\r\n      case 2:\r\n        this.saldoItemServices.disparadorDeSaldoAlm2.emit({\r\n          saldo2:this.saldoLocal,\r\n        });\r\n        break;\r\n      case 3:\r\n        this.saldoItemServices.disparadorDeSaldoAlm3.emit({\r\n          saldo3:this.saldoLocal,\r\n        });\r\n        break;\r\n      case 4:\r\n        this.saldoItemServices.disparadorDeSaldoAlm4.emit({\r\n          saldo4:this.saldoLocal,\r\n        });\r\n        break;\r\n      case 5:\r\n        this.saldoItemServices.disparadorDeSaldoAlm5.emit({\r\n          saldo5:this.saldoLocal,\r\n        });\r\n        break;\r\n    \r\n      default:\r\n        break;\r\n    }\r\n\r\n    this.close();\r\n  }\r\n\r\n  getIdTipoView(codigo){\r\n    this.tipo_view = codigo;\r\n  }\r\n  \r\n  close(){\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n","<div class=\"p-1\">\r\n  <div class=\"title\">Saldo Detallado de Item\r\n    <mat-icon color=\"primary\" (click)=\"mandarTotalSaldo();\" style=\"float: right;color: white;font-size: 20px;\">close\r\n    </mat-icon>\r\n  </div>\r\n\r\n  <div class=\"mat-elevation-z8\">\r\n    <div class=\"row text-center\">\r\n      <div class=\"col-md-12\" style=\"padding: 5px 0px 0px;\">\r\n        <p><strong>Saldo de Item: </strong> &nbsp; {{ dataAgencias.cod_item }} </p>\r\n        <span><u>{{ letraSaldos }}</u></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <mat-tab-group>\r\n    <mat-tab label=\"Detalle de Saldo\">\r\n      <div class=\"row\">\r\n        <div class=\"col-lg\">\r\n          <div class=\"team bg-white scrollmenu\">\r\n            <div class=\"col-lg-12\" style=\"width: 100%;overflow-x: auto;\">\r\n              <table mat-table [dataSource]=\"dataSource\" multiTemplateDataRows class=\"mat-elevation-z8\" matSort>\r\n\r\n                <ng-container matColumnDef=\"descripcion\">\r\n                  <th mat-header-cell *matHeaderCellDef> Descripción </th>\r\n                  <td mat-cell *matCellDef=\"let element\" style=\"text-align: left;\">{{ element.descripcion }}</td>\r\n                </ng-container>\r\n\r\n                <ng-container matColumnDef=\"valor\">\r\n                  <th mat-header-cell *matHeaderCellDef> Saldo Local </th>\r\n                  <td mat-cell *matCellDef=\"let element\" style=\"text-align: right !important;\">\r\n                    {{ element.valor | number:'2.2-2'}}\r\n                  </td>\r\n                </ng-container>\r\n\r\n                <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n                <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </mat-tab>\r\n\r\n    <mat-tab label=\"Saldo Variable\">\r\n\r\n      <div class=\"row\">\r\n        <div class=\"col-lg\">\r\n          <div class=\"team bg-white scrollmenu\">\r\n            <div class=\"col-lg-12\" style=\"width: 100%;overflow-x: auto;\">\r\n              <table mat-table [dataSource]=\"saldo_variable\" multiTemplateDataRows class=\"mat-elevation-z8\" matSort>\r\n\r\n                <ng-container matColumnDef=\"descripcion\">\r\n                  <th mat-header-cell *matHeaderCellDef> Descripción </th>\r\n                  <td mat-cell *matCellDef=\"let element\" style=\"text-align: left;\">{{ element.descripcion }}</td>\r\n                </ng-container>\r\n\r\n                <ng-container matColumnDef=\"valor\">\r\n                  <th mat-header-cell *matHeaderCellDef> Saldo Local </th>\r\n                  <td mat-cell *matCellDef=\"let element\" style=\"text-align: left;\">\r\n                    {{ element.valor | number:'2.2-2'}}\r\n                  </td>\r\n                </ng-container>\r\n\r\n                <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n                <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </mat-tab>\r\n  </mat-tab-group>\r\n\r\n  <mat-card-footer>\r\n    <div class=\"row\">\r\n      <div class=\"col\">\r\n        <mat-label><u>&nbsp;Saldo de Agencia</u></mat-label>&nbsp;\r\n        <input type=\"text\" value=\"{{infoAgenciaSaldo}}\" readonly=\"true\" style=\"width: 40%;text-align: right;\">\r\n      </div>\r\n\r\n      <div class=\"col\">\r\n        <mat-label><u>&nbsp;Saldo de Local</u></mat-label>&nbsp;\r\n        <input type=\"text\" value=\"{{ saldoLocal | number:'2.2-2' }}\" readonly=\"true\"\r\n          style=\"width: 40%;text-align: right;\">\r\n      </div>\r\n    </div>\r\n  </mat-card-footer>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}