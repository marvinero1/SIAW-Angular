{"ast":null,"code":"import { CatalogoInventarioComponent } from '../catalogo-inventario/catalogo-inventario.component';\nimport { PersonaCatalogoComponent } from '@components/mantenimiento/persona-catalogo/persona-catalogo.component';\nimport { Validators } from '@angular/forms';\nimport { ModalAlmacenComponent } from '@components/mantenimiento/inventario/almacen/modal-almacen/modal-almacen.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@services/api.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"../servicio-inventario/servicio-inventario.service\";\nimport * as i4 from \"@components/mantenimiento/persona-catalogo/service-persona/service-persona.service\";\nimport * as i5 from \"@components/mantenimiento/inventario/almacen/servicioalmacen/servicioalmacen.service\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"ngx-toastr\";\nimport * as i9 from \"@services/log-service.service\";\nimport * as i10 from \"@modules/main/footer/servicio-nombre-ventana/nombre-ventana.service\";\nimport * as i11 from \"@angular/material/form-field\";\nimport * as i12 from \"@angular/material/button\";\nimport * as i13 from \"@angular/material/card\";\nimport * as i14 from \"@angular/material/tooltip\";\nvar CrearTomaInventarioComponent = /** @class */function () {\n  function CrearTomaInventarioComponent(api, dialog, servicioInventario, servicioPersona, servicioAlmacen, _formBuilder, datePipe, toastr, log_module, nombre_ventana_service) {\n    this.api = api;\n    this.dialog = dialog;\n    this.servicioInventario = servicioInventario;\n    this.servicioPersona = servicioPersona;\n    this.servicioAlmacen = servicioAlmacen;\n    this._formBuilder = _formBuilder;\n    this.datePipe = datePipe;\n    this.toastr = toastr;\n    this.log_module = log_module;\n    this.nombre_ventana_service = nombre_ventana_service;\n    this.fecha_actual = new Date();\n    this.hora_actual = new Date();\n    this.dataform = '';\n    this.inventario_get = [];\n    this.inventario_get_leave = [];\n    this.persona_get = [];\n    this.persona_get_leave = [];\n    this.almacen_leave_id = [];\n    this.almacen_get = [];\n    this.inventario_save = [];\n    this.almacen_leave = [];\n    this.nombre_ventana = \"prgcrearinv.vb\";\n    this.ventana = \"Crear Toma Inventario\";\n    this.detalle = \"CrearTomaInventario-create\";\n    this.tipo = \"CrearTomaInventario-CREATE\";\n    this.userConn = localStorage.getItem(\"user_conn\") !== undefined ? JSON.parse(localStorage.getItem(\"user_conn\")) : null;\n    this.mandarNombre();\n    this.getInventarios();\n    this.getAlmacen();\n    this.getPersonaAll();\n    var usuarioLogueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\n    this.api.getRolUserParaVentana(usuarioLogueado, this.nombre_ventana);\n    this.FormularioData = this.createForm();\n  }\n  CrearTomaInventarioComponent.prototype.ngOnInit = function () {\n    var _this = this;\n    this.servicioInventario.disparadorDeInventarios.subscribe(function (data) {\n      console.log(\"Recibiendo Inventario: \", data);\n      _this.inventario_get = data.inventario;\n      var mas = _this.inventario_get.nroactual;\n      _this.num_mas_mas = mas + 1;\n      console.log(_this.num_mas_mas);\n    });\n    this.servicioPersona.disparadorDePersonas.subscribe(function (data) {\n      console.log(\"Recibiendo Persona: \", data);\n      _this.persona_get = data.persona;\n    });\n    this.servicioAlmacen.disparadorDeAlmacenes.subscribe(function (data) {\n      console.log(\"Recibiendo Almacen: \", data);\n      _this.almacen_get = data.almacen;\n    });\n  };\n  CrearTomaInventarioComponent.prototype.createForm = function () {\n    var usuario_logueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\n    var hour = this.hora_actual.getHours();\n    var minuts = this.hora_actual.getMinutes();\n    var hora_actual_complete = hour + \":\" + minuts;\n    return this._formBuilder.group({\n      id: [this.dataform.id, Validators.compose([Validators.required])],\n      numeroid: [this.dataform.numeroid, Validators.compose([Validators.required])],\n      fechainicio: [this.datePipe.transform(this.dataform.fechainicio, \"yyyy-MM-dd\")],\n      fechafin: [this.datePipe.transform(this.dataform.fechafin, \"yyyy-MM-dd\")],\n      obs: [this.dataform.obs],\n      codpersona: [this.dataform.codpersona, Validators.compose([Validators.required])],\n      codalmacen: [this.dataform.codalmacen, Validators.compose([Validators.required])],\n      horareg: [hora_actual_complete],\n      fechareg: [this.datePipe.transform(this.fecha_actual, \"yyyy-MM-dd\")],\n      usuarioreg: [usuario_logueado],\n      abierto: [true]\n    });\n  };\n  CrearTomaInventarioComponent.prototype.submitData = function () {\n    var _this = this;\n    var num_mas = this.inventario_get.nroactual;\n    var num_mas_mas = num_mas + 1;\n    var data = this.FormularioData.value;\n    var errorMessage = \"La Ruta presenta fallos al hacer la creacion\" + \"Ruta:- /inventario/oper/prgcrearinv/\";\n    console.log(data);\n    return this.api.create(\"/inventario/oper/prgcrearinv/\" + this.userConn + \"/\" + this.inventario_get.id + \"/\" + num_mas_mas, data).subscribe({\n      next: function (datav) {\n        _this.inventario_save = datav;\n        _this.log_module.guardarLog(_this.ventana, _this.detalle, _this.tipo);\n        _this.toastr.success('Guardado con Exito! 游꿀');\n        location.reload();\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n        _this.toastr.error('! NO SE GUARDO !');\n      },\n      complete: function () {}\n    });\n  };\n  CrearTomaInventarioComponent.prototype.onLeaveIDInventario = function (event) {\n    var inputValue = event.target.value;\n    var Mayusucalas = inputValue.toUpperCase();\n    // Verificar si el valor ingresado est치 presente en los objetos del array\n    var encontrado = this.inventario_get_leave.some(function (objeto) {\n      return objeto.id === Mayusucalas;\n    });\n    if (!encontrado) {\n      // Si el valor no est치 en el array, dejar el campo vac칤o\n      event.target.value = '';\n      console.log(\"NO ENCONTRADO INPUT\");\n    } else {\n      event.target.value = Mayusucalas;\n    }\n    // Puedes realizar otras acciones seg칰n tus necesidades\n    console.log('Input perdi칩 el foco', Mayusucalas);\n  };\n  CrearTomaInventarioComponent.prototype.getInventarios = function () {\n    var _this = this;\n    var errorMessage = \"La Ruta presenta fallos al hacer peticion GET --/inventario/oper/prgcrearinv/catalogointipoinv/\";\n    return this.api.getAll('/inventario/oper/prgcrearinv/catalogointipoinv/' + this.userConn).subscribe({\n      next: function (datav) {\n        _this.inventario_get_leave = datav;\n        console.log(_this.inventario_get_leave);\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n      },\n      complete: function () {}\n    });\n  };\n  CrearTomaInventarioComponent.prototype.getAlmacen = function () {\n    var _this = this;\n    var errorMessage = \"La Ruta presenta fallos al hacer peticion GET --/inventario/mant/inalmacen/catalogo/\";\n    return this.api.getAll('/inventario/mant/inalmacen/catalogo/' + this.userConn).subscribe({\n      next: function (datav) {\n        _this.almacen_leave = datav;\n        console.log(_this.almacen_leave);\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n      },\n      complete: function () {}\n    });\n  };\n  CrearTomaInventarioComponent.prototype.onLeaveAlmacen = function (event) {\n    var inputValue = event.target.value;\n    var num = Number(inputValue);\n    // Verificar si el valor ingresado est치 presente en los objetos del array\n    var encontrado = this.almacen_leave.some(function (objeto) {\n      return objeto.codigo === num;\n    });\n    if (!encontrado) {\n      // Si el valor no est치 en el array, dejar el campo vac칤o\n      event.target.value = '';\n      console.log(\"NO ENCONTRADO INPUT\");\n    } else {\n      event.target.value = num;\n      this.getAlmacenByID(num);\n    }\n    // Puedes realizar otras acciones seg칰n tus necesidades\n    console.log('Input perdi칩 el foco', num);\n  };\n  CrearTomaInventarioComponent.prototype.getAlmacenByID = function (id) {\n    var _this = this;\n    var errorMessage = \"La Ruta presenta fallos al hacer peticion GET --/inventario/mant/inalmacen/catalogo/\";\n    return this.api.getAll('/inventario/mant/inalmacen/' + this.userConn + \"/\" + id).subscribe({\n      next: function (datav) {\n        _this.almacen_leave_id = datav;\n        console.log(_this.almacen_leave_id);\n        _this.almacen_get.descripcion = _this.almacen_leave_id.descripcion;\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n      },\n      complete: function () {}\n    });\n  };\n  CrearTomaInventarioComponent.prototype.onLeaveResponsable = function (event) {\n    var inputValue = event.target.value;\n    var num = Number(inputValue);\n    // Verificar si el valor ingresado est치 presente en los objetos del array\n    var encontrado = this.persona_get.some(function (objeto) {\n      return objeto.codigo === num;\n    });\n    if (!encontrado) {\n      // Si el valor no est치 en el array, dejar el campo vac칤o\n      event.target.value = '';\n      console.log(\"NO ENCONTRADO INPUT\");\n    } else {\n      event.target.value = num;\n      this.getPersona(num);\n    }\n    // Puedes realizar otras acciones seg칰n tus necesidades\n    console.log('Input perdi칩 el foco', num);\n  };\n  CrearTomaInventarioComponent.prototype.getPersonaAll = function () {\n    var _this = this;\n    var errorMessage = \"La Ruta presenta fallos al hacer peticion GET -/pers_plan/mant/pepersona/catalogo/\";\n    return this.api.getAll('/pers_plan/mant/pepersona/catalogo/' + this.userConn).subscribe({\n      next: function (datav) {\n        _this.persona_get = datav;\n        console.log(_this.persona_get);\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n      },\n      complete: function () {}\n    });\n  };\n  CrearTomaInventarioComponent.prototype.getPersona = function (id) {\n    var _this = this;\n    var errorMessage = \"La Ruta presenta fallos al hacer peticion GET -/pers_plan/mant/pepersona/catalogo/\";\n    return this.api.getAll('/pers_plan/mant/pepersona/' + this.userConn + '/' + id).subscribe({\n      next: function (datav) {\n        _this.persona_get = datav;\n        console.log(_this.persona_get);\n        var nombre = _this.persona_get.nombre1;\n        var apellido = _this.persona_get.apellido1;\n        _this.persona_get.descrip = nombre + \" \" + apellido;\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n      },\n      complete: function () {}\n    });\n  };\n  CrearTomaInventarioComponent.prototype.modalInventario = function () {\n    this.dialog.open(CatalogoInventarioComponent, {\n      width: 'auto',\n      height: 'auto'\n    });\n  };\n  CrearTomaInventarioComponent.prototype.modalAlmacen = function () {\n    this.dialog.open(ModalAlmacenComponent, {\n      width: 'auto',\n      height: 'auto',\n      data: {\n        almacen: \"almacen\"\n      }\n    });\n  };\n  CrearTomaInventarioComponent.prototype.modalPersona = function () {\n    this.dialog.open(PersonaCatalogoComponent, {\n      width: 'auto',\n      height: 'auto'\n    });\n  };\n  CrearTomaInventarioComponent.prototype.mandarNombre = function () {\n    this.nombre_ventana_service.disparadorDeNombreVentana.emit({\n      nombre_vent: this.ventana\n    });\n  };\n  CrearTomaInventarioComponent.톳fac = function CrearTomaInventarioComponent_Factory(t) {\n    return new (t || CrearTomaInventarioComponent)(i0.톳톳directiveInject(i1.ApiService), i0.톳톳directiveInject(i2.MatDialog), i0.톳톳directiveInject(i3.ServicioInventarioService), i0.톳톳directiveInject(i4.ServicePersonaService), i0.톳톳directiveInject(i5.ServicioalmacenService), i0.톳톳directiveInject(i6.FormBuilder), i0.톳톳directiveInject(i7.DatePipe), i0.톳톳directiveInject(i8.ToastrService), i0.톳톳directiveInject(i9.LogService), i0.톳톳directiveInject(i10.NombreVentanaService));\n  };\n  CrearTomaInventarioComponent.톳cmp = /*@__PURE__*/i0.톳톳defineComponent({\n    type: CrearTomaInventarioComponent,\n    selectors: [[\"app-crear-toma-inventario\"]],\n    decls: 67,\n    vars: 8,\n    consts: [[1, \"p-2\"], [2, \"background-color\", \"#f0f0f0\"], [1, \"mb-1\"], [2, \"font-size\", \"0.8rem\"], [1, \"row\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"tg-0lax\"], [1, \"input-group\"], [2, \"padding-right\", \"59px\", \"padding-top\", \"3px\"], [\"type\", \"text\", \"formControlName\", \"id\", 2, \"width\", \"56% !important\", 3, \"ngModel\", \"blur\"], [1, \"input-group-append\"], [\"type\", \"button\", \"matTooltip\", \"ID Inventario\", 1, \"btn\", \"btn-outline-primary\", 2, \"border-color\", \"#093070\", \"padding\", \"4px 5px 1px 5px\", \"line-height\", \"0 !important\", 3, \"click\"], [1, \"fa\", \"fa-search\"], [\"type\", \"text\", \"formControlName\", \"numeroid\", 3, \"ngModel\", \"ngModelChange\"], [2, \"padding-right\", \"2px\"], [\"type\", \"date\", \"formControlName\", \"fechainicio\", 2, \"width\", \"70%\"], [\"type\", \"date\", \"formControlName\", \"fechafin\", 2, \"width\", \"78%\"], [2, \"padding-right\", \"27px\", \"padding-top\", \"7px\"], [\"type\", \"text\", \"formControlName\", \"codalmacen\", 2, \"width\", \"56% !important\", 3, \"ngModel\", \"ngModelChange\", \"blur\"], [\"type\", \"button\", \"matTooltip\", \"Buscar Almacen\", 1, \"btn\", \"btn-outline-primary\", 2, \"border-color\", \"#093070\", \"padding\", \"4px 5px 1px 5px\", \"line-height\", \"0 !important\", 3, \"click\"], [2, \"padding-right\", \"4px\", \"padding-top\", \"7px\"], [\"type\", \"text\", \"formControlName\", \"codpersona\", 2, \"width\", \"56% !important\", 3, \"ngModel\", \"ngModelChange\", \"blur\"], [\"type\", \"button\", \"matTooltip\", \"Buscar Responsable\", 1, \"btn\", \"btn-outline-primary\", 2, \"border-color\", \"#093070\", \"padding\", \"4px 5px 1px 5px\", \"line-height\", \"0 !important\", 3, \"click\"], [2, \"padding-right\", \"7px\", \"padding-top\", \"7px\"], [\"type\", \"text\", \"formControlName\", \"obs\", 2, \"width\", \"69% !important\"], [\"align\", \"end\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"submit\", 3, \"disabled\"], [1, \"fa\", \"fa-save\"]],\n    template: function CrearTomaInventarioComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.톳톳elementStart(0, \"div\", 0)(1, \"mat-card\", 1)(2, \"mat-card-header\", 2)(3, \"mat-card-title\", 3);\n        i0.톳톳text(4, \"Crear Toma de Inventario\");\n        i0.톳톳elementEnd()();\n        i0.톳톳elementStart(5, \"mat-card-content\")(6, \"div\", 4)(7, \"form\", 5);\n        i0.톳톳listener(\"ngSubmit\", function CrearTomaInventarioComponent_Template_form_ngSubmit_7_listener() {\n          return ctx.submitData();\n        });\n        i0.톳톳elementStart(8, \"tr\")(9, \"th\", 6)(10, \"div\", 7)(11, \"mat-label\", 8)(12, \"u\");\n        i0.톳톳text(13, \"ID\");\n        i0.톳톳elementEnd()();\n        i0.톳톳elementStart(14, \"input\", 9);\n        i0.톳톳listener(\"blur\", function CrearTomaInventarioComponent_Template_input_blur_14_listener($event) {\n          return ctx.onLeaveIDInventario($event);\n        });\n        i0.톳톳elementEnd();\n        i0.톳톳elementStart(15, \"div\", 10)(16, \"button\", 11);\n        i0.톳톳listener(\"click\", function CrearTomaInventarioComponent_Template_button_click_16_listener() {\n          return ctx.modalInventario();\n        });\n        i0.톳톳element(17, \"i\", 12);\n        i0.톳톳elementEnd()()()();\n        i0.톳톳elementStart(18, \"th\", 6)(19, \"input\", 13);\n        i0.톳톳listener(\"ngModelChange\", function CrearTomaInventarioComponent_Template_input_ngModelChange_19_listener($event) {\n          return ctx.num_mas_mas = $event;\n        });\n        i0.톳톳elementEnd()()();\n        i0.톳톳elementStart(20, \"tr\")(21, \"td\", 6)(22, \"mat-label\", 14)(23, \"u\");\n        i0.톳톳text(24, \"Fecha Desde\");\n        i0.톳톳elementEnd()();\n        i0.톳톳element(25, \"input\", 15);\n        i0.톳톳elementEnd();\n        i0.톳톳elementStart(26, \"td\", 6)(27, \"mat-label\", 14)(28, \"u\");\n        i0.톳톳text(29, \"Hasta\");\n        i0.톳톳elementEnd()();\n        i0.톳톳element(30, \"input\", 16);\n        i0.톳톳elementEnd()();\n        i0.톳톳elementStart(31, \"tr\")(32, \"td\", 6)(33, \"div\", 7)(34, \"mat-label\", 17)(35, \"u\");\n        i0.톳톳text(36, \"Almacen\");\n        i0.톳톳elementEnd()();\n        i0.톳톳elementStart(37, \"input\", 18);\n        i0.톳톳listener(\"ngModelChange\", function CrearTomaInventarioComponent_Template_input_ngModelChange_37_listener($event) {\n          return ctx.almacen_get.codigo = $event;\n        })(\"blur\", function CrearTomaInventarioComponent_Template_input_blur_37_listener($event) {\n          return ctx.onLeaveAlmacen($event);\n        });\n        i0.톳톳elementEnd();\n        i0.톳톳elementStart(38, \"div\", 10)(39, \"button\", 19);\n        i0.톳톳listener(\"click\", function CrearTomaInventarioComponent_Template_button_click_39_listener() {\n          return ctx.modalAlmacen();\n        });\n        i0.톳톳element(40, \"i\", 12);\n        i0.톳톳elementEnd()()()();\n        i0.톳톳elementStart(41, \"td\", 6)(42, \"div\");\n        i0.톳톳text(43);\n        i0.톳톳elementEnd()()();\n        i0.톳톳elementStart(44, \"tr\")(45, \"td\", 6)(46, \"div\", 7)(47, \"mat-label\", 20)(48, \"u\");\n        i0.톳톳text(49, \"Responsable\");\n        i0.톳톳elementEnd()();\n        i0.톳톳elementStart(50, \"input\", 21);\n        i0.톳톳listener(\"ngModelChange\", function CrearTomaInventarioComponent_Template_input_ngModelChange_50_listener($event) {\n          return ctx.persona_get.codigo = $event;\n        })(\"blur\", function CrearTomaInventarioComponent_Template_input_blur_50_listener($event) {\n          return ctx.onLeaveResponsable($event);\n        });\n        i0.톳톳elementEnd();\n        i0.톳톳elementStart(51, \"div\", 10)(52, \"button\", 22);\n        i0.톳톳listener(\"click\", function CrearTomaInventarioComponent_Template_button_click_52_listener() {\n          return ctx.modalPersona();\n        });\n        i0.톳톳element(53, \"i\", 12);\n        i0.톳톳elementEnd()()()();\n        i0.톳톳elementStart(54, \"td\", 6)(55, \"div\");\n        i0.톳톳text(56);\n        i0.톳톳elementEnd()()();\n        i0.톳톳elementStart(57, \"tr\")(58, \"td\", 6)(59, \"mat-label\", 23)(60, \"u\");\n        i0.톳톳text(61, \"Observacion\");\n        i0.톳톳elementEnd()();\n        i0.톳톳element(62, \"input\", 24);\n        i0.톳톳elementEnd()();\n        i0.톳톳elementStart(63, \"mat-card-actions\", 25)(64, \"button\", 26);\n        i0.톳톳element(65, \"i\", 27);\n        i0.톳톳text(66, \" \\u00A0Crear Inventario \");\n        i0.톳톳elementEnd()()()()()()();\n      }\n      if (rf & 2) {\n        i0.톳톳advance(7);\n        i0.톳톳property(\"formGroup\", ctx.FormularioData);\n        i0.톳톳advance(7);\n        i0.톳톳property(\"ngModel\", ctx.inventario_get.id);\n        i0.톳톳advance(5);\n        i0.톳톳property(\"ngModel\", ctx.num_mas_mas);\n        i0.톳톳advance(18);\n        i0.톳톳property(\"ngModel\", ctx.almacen_get.codigo);\n        i0.톳톳advance(6);\n        i0.톳톳textInterpolate(ctx.almacen_get.descripcion);\n        i0.톳톳advance(7);\n        i0.톳톳property(\"ngModel\", ctx.persona_get.codigo);\n        i0.톳톳advance(6);\n        i0.톳톳textInterpolate(ctx.persona_get.descrip);\n        i0.톳톳advance(8);\n        i0.톳톳property(\"disabled\", !ctx.FormularioData.valid);\n      }\n    },\n    dependencies: [i6.톳NgNoValidate, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.FormGroupDirective, i6.FormControlName, i11.MatLabel, i12.MatButton, i13.MatCard, i13.MatCardActions, i13.MatCardContent, i13.MatCardHeader, i13.MatCardTitle, i14.MatTooltip],\n    styles: [\".tg[_ngcontent-%COMP%] {\\n  border-collapse: collapse;\\n  border-spacing: 0;\\n}\\n/*# sourceURL=webpack://./src/app/components/inventario/crear-toma-inventario/crear-toma-inventario.component.scss */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9pbnZlbnRhcmlvL2NyZWFyLXRvbWEtaW52ZW50YXJpby9jcmVhci10b21hLWludmVudGFyaW8uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSx5QkFBQTtFQUNBLGlCQUFBO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIudGcge1xuICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICBib3JkZXItc3BhY2luZzogMDtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n  return CrearTomaInventarioComponent;\n}();\nexport { CrearTomaInventarioComponent };","map":{"version":3,"mappings":"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","names":["CatalogoInventarioComponent","PersonaCatalogoComponent","Validators","ModalAlmacenComponent","api","dialog","servicioInventario","servicioPersona","servicioAlmacen","_formBuilder","datePipe","toastr","log_module","nombre_ventana_service","Date","userConn","localStorage","getItem","undefined","JSON","parse","mandarNombre","getInventarios","getAlmacen","getPersonaAll","usuarioLogueado","getRolUserParaVentana","nombre_ventana","FormularioData","createForm","CrearTomaInventarioComponent","disparadorDeInventarios","subscribe","console","log","data","_this","inventario_get","inventario","mas","nroactual","num_mas_mas","disparadorDePersonas","persona_get","persona","disparadorDeAlmacenes","almacen_get","almacen","usuario_logueado","hour","hora_actual","getHours","minuts","getMinutes","hora_actual_complete","group","id","dataform","compose","required","numeroid","fechainicio","transform","fechafin","obs","codpersona","codalmacen","horareg","fechareg","fecha_actual","usuarioreg","abierto","num_mas","value","errorMessage","create","next","datav","inventario_save","guardarLog","ventana","detalle","tipo","success","location","reload","error","err","complete","event","inputValue","target","Mayusucalas","toUpperCase","encontrado","inventario_get_leave","some","getAll","almacen_leave","num","Number","codigo","getAlmacenByID","almacen_leave_id","descripcion","getPersona","nombre","nombre1","apellido","apellido1","descrip","open","width","height","disparadorDeNombreVentana","emit","nombre_vent","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\laragon\\www\\SIAW-Angular-B\\src\\app\\components\\inventario\\crear-toma-inventario\\crear-toma-inventario.component.ts","C:\\laragon\\www\\SIAW-Angular-B\\src\\app\\components\\inventario\\crear-toma-inventario\\crear-toma-inventario.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { CatalogoInventarioComponent } from '../catalogo-inventario/catalogo-inventario.component';\r\nimport { ServicioInventarioService } from '../servicio-inventario/servicio-inventario.service';\r\nimport { PersonaCatalogoComponent } from '@components/mantenimiento/persona-catalogo/persona-catalogo.component';\r\nimport { ServicePersonaService } from '@components/mantenimiento/persona-catalogo/service-persona/service-persona.service';\r\nimport { ApiService } from '@services/api.service';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { DatePipe } from '@angular/common';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { LogService } from '@services/log-service.service';\r\nimport { NombreVentanaService } from '@modules/main/footer/servicio-nombre-ventana/nombre-ventana.service';\r\nimport { ServicioalmacenService } from '@components/mantenimiento/inventario/almacen/servicioalmacen/servicioalmacen.service';\r\nimport { ModalAlmacenComponent } from '@components/mantenimiento/inventario/almacen/modal-almacen/modal-almacen.component';\r\n\r\n@Component({\r\n  selector: 'app-crear-toma-inventario',\r\n  templateUrl: './crear-toma-inventario.component.html',\r\n  styleUrls: ['./crear-toma-inventario.component.scss']\r\n})\r\nexport class CrearTomaInventarioComponent implements OnInit {\r\n\r\n  FormularioData:FormGroup;\r\n  fecha_actual = new Date();\r\n  hora_actual = new Date();\r\n  dataform:any='';\r\n  userConn:any;\r\n  num_mas_mas:number;\r\n  \r\n  inventario_get: any = [];\r\n  inventario_get_leave:any=[];\r\n  persona_get: any = [];\r\n  persona_get_leave: any = [];\r\n  almacen_leave_id: any = [];\r\n  almacen_get:any=[];\r\n  inventario_save: any = [];\r\n  almacen_leave: any = [];\r\n  nombre_ventana:string=\"prgcrearinv.vb\";\r\n\r\n  public ventana=\"Crear Toma Inventario\"\r\n  public detalle=\"CrearTomaInventario-create\";\r\n  public tipo=\"CrearTomaInventario-CREATE\";\r\n  \r\n  constructor(private api:ApiService, public dialog: MatDialog, public servicioInventario:ServicioInventarioService, \r\n    public servicioPersona:ServicePersonaService, public servicioAlmacen:ServicioalmacenService,private _formBuilder: FormBuilder,\r\n    private datePipe: DatePipe, private toastr: ToastrService, public log_module: LogService,\r\n    public nombre_ventana_service: NombreVentanaService){ \r\n    this.userConn = localStorage.getItem(\"user_conn\") !== undefined ? JSON.parse(localStorage.getItem(\"user_conn\")) : null;\r\n    \r\n    this.mandarNombre();\r\n    this.getInventarios();\r\n    this.getAlmacen();\r\n    this.getPersonaAll();\r\n    let usuarioLogueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\r\n    this.api.getRolUserParaVentana(usuarioLogueado, this.nombre_ventana);\r\n\r\n    this.FormularioData = this.createForm();\r\n  }\r\n\r\n  ngOnInit(){\r\n    this.servicioInventario.disparadorDeInventarios.subscribe(data =>{\r\n      console.log(\"Recibiendo Inventario: \" , data);\r\n      this.inventario_get = data.inventario;\r\n\r\n      let mas = this.inventario_get.nroactual;\r\n      this.num_mas_mas = mas + 1;\r\n      console.log(this.num_mas_mas);\r\n    });\r\n\r\n    this.servicioPersona.disparadorDePersonas.subscribe(data =>{\r\n      console.log(\"Recibiendo Persona: \" , data);\r\n      this.persona_get = data.persona;\r\n    });\r\n\r\n    this.servicioAlmacen.disparadorDeAlmacenes.subscribe(data =>{\r\n      console.log(\"Recibiendo Almacen: \" , data);\r\n      this.almacen_get = data.almacen;\r\n    });\r\n  }\r\n\r\n  createForm(): FormGroup{\r\n    let usuario_logueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\r\n\r\n    let hour = this.hora_actual.getHours();\r\n    let minuts = this.hora_actual.getMinutes();\r\n    let hora_actual_complete = hour + \":\" + minuts;\r\n  \r\n    return this._formBuilder.group({\r\n      id: [this.dataform.id,Validators.compose([Validators.required]) ],\r\n      numeroid: [this.dataform.numeroid,Validators.compose([Validators.required])],\r\n      fechainicio: [this.datePipe.transform(this.dataform.fechainicio, \"yyyy-MM-dd\")],\r\n      fechafin: [this.datePipe.transform(this.dataform.fechafin, \"yyyy-MM-dd\")],\r\n      obs: [this.dataform.obs],\r\n      codpersona: [this.dataform.codpersona,Validators.compose([Validators.required])],\r\n      codalmacen: [this.dataform.codalmacen,Validators.compose([Validators.required])],\r\n      horareg: [hora_actual_complete],\r\n      fechareg: [this.datePipe.transform(this.fecha_actual,\"yyyy-MM-dd\")],\r\n      usuarioreg: [usuario_logueado],\r\n      abierto:[true],\r\n    });\r\n  }\r\n\r\n  submitData(){\r\n    let num_mas = this.inventario_get.nroactual\r\n    let num_mas_mas = num_mas + 1;\r\n\r\n    let data = this.FormularioData.value;\r\n    let errorMessage = \"La Ruta presenta fallos al hacer la creacion\"+\"Ruta:- /inventario/oper/prgcrearinv/\";\r\n    console.log(data);\r\n    \r\n    return this.api.create(\"/inventario/oper/prgcrearinv/\"+this.userConn+\"/\"+this.inventario_get.id+\"/\"+num_mas_mas, data)\r\n      .subscribe({\r\n        next: (datav) => {\r\n          this.inventario_save = datav;\r\n        \r\n          this.log_module.guardarLog(this.ventana,this.detalle, this.tipo);\r\n          this.toastr.success('Guardado con Exito! 游꿀');\r\n\r\n          location.reload();\r\n        },\r\n    \r\n        error: (err) => { \r\n          console.log(err, errorMessage);\r\n          this.toastr.error('! NO SE GUARDO !');\r\n        },\r\n        complete: () => { }\r\n      })\r\n  }\r\n\r\n  onLeaveIDInventario(event: any){\r\n    const inputValue = event.target.value;\r\n    let Mayusucalas = inputValue.toUpperCase();\r\n      \r\n    // Verificar si el valor ingresado est치 presente en los objetos del array\r\n    const encontrado = this.inventario_get_leave.some(objeto => objeto.id === Mayusucalas);\r\n    if(!encontrado){\r\n      // Si el valor no est치 en el array, dejar el campo vac칤o\r\n      event.target.value = '';\r\n      console.log(\"NO ENCONTRADO INPUT\");\r\n    } else {\r\n      event.target.value = Mayusucalas;\r\n    }\r\n    // Puedes realizar otras acciones seg칰n tus necesidades\r\n    console.log('Input perdi칩 el foco', Mayusucalas);\r\n  }\r\n\r\n  getInventarios(){\r\n    let errorMessage = \"La Ruta presenta fallos al hacer peticion GET --/inventario/oper/prgcrearinv/catalogointipoinv/\"\r\n    return this.api.getAll('/inventario/oper/prgcrearinv/catalogointipoinv/'+this.userConn)\r\n      .subscribe({\r\n        next: (datav) => {\r\n          this.inventario_get_leave = datav;\r\n          console.log(this.inventario_get_leave);\r\n        },\r\n    \r\n        error: (err: any) => { \r\n          console.log(err, errorMessage);\r\n        },\r\n        complete: () => { }\r\n      })\r\n  }\r\n\r\n  getAlmacen(){\r\n    let errorMessage = \"La Ruta presenta fallos al hacer peticion GET --/inventario/mant/inalmacen/catalogo/\"\r\n    return this.api.getAll('/inventario/mant/inalmacen/catalogo/'+this.userConn)\r\n      .subscribe({\r\n        next: (datav) => {\r\n          this.almacen_leave = datav;\r\n          console.log(this.almacen_leave);\r\n        },\r\n    \r\n        error: (err: any) => { \r\n          console.log(err, errorMessage);\r\n        },\r\n        complete: () => { }\r\n      })\r\n  }\r\n  \r\n  onLeaveAlmacen(event: any){\r\n    const inputValue = event.target.value;\r\n    let num = Number(inputValue);\r\n\r\n    // Verificar si el valor ingresado est치 presente en los objetos del array\r\n    const encontrado = this.almacen_leave.some(objeto => objeto.codigo === num);\r\n\r\n    if(!encontrado){\r\n      // Si el valor no est치 en el array, dejar el campo vac칤o\r\n      event.target.value = '';\r\n      console.log(\"NO ENCONTRADO INPUT\");\r\n    } else {\r\n      event.target.value = num;\r\n      this.getAlmacenByID(num);\r\n    }\r\n    // Puedes realizar otras acciones seg칰n tus necesidades\r\n    console.log('Input perdi칩 el foco', num);\r\n  }\r\n\r\n  getAlmacenByID(id){\r\n    let errorMessage = \"La Ruta presenta fallos al hacer peticion GET --/inventario/mant/inalmacen/catalogo/\"\r\n    return this.api.getAll('/inventario/mant/inalmacen/'+this.userConn+\"/\"+id)\r\n      .subscribe({\r\n        next: (datav) => {\r\n          this.almacen_leave_id = datav;\r\n          console.log(this.almacen_leave_id);\r\n\r\n          this.almacen_get.descripcion = this.almacen_leave_id.descripcion;\r\n        },\r\n    \r\n        error: (err: any) => { \r\n          console.log(err, errorMessage);\r\n        },\r\n        complete: () => { }\r\n      })\r\n  }\r\n\r\n  onLeaveResponsable(event: any) {\r\n    const inputValue = event.target.value;\r\n    let num = Number(inputValue);\r\n    // Verificar si el valor ingresado est치 presente en los objetos del array\r\n    const encontrado = this.persona_get.some(objeto => objeto.codigo === num);\r\n\r\n    if(!encontrado){\r\n      // Si el valor no est치 en el array, dejar el campo vac칤o\r\n      event.target.value = '';\r\n      console.log(\"NO ENCONTRADO INPUT\");\r\n    } else {\r\n      event.target.value = num;\r\n\r\n      this.getPersona(num);\r\n      \r\n    }\r\n\r\n    // Puedes realizar otras acciones seg칰n tus necesidades\r\n    console.log('Input perdi칩 el foco', num);\r\n  }\r\n\r\n  getPersonaAll(){\r\n    let errorMessage = \"La Ruta presenta fallos al hacer peticion GET -/pers_plan/mant/pepersona/catalogo/\"\r\n    return this.api.getAll('/pers_plan/mant/pepersona/catalogo/'+this.userConn)\r\n      .subscribe({\r\n        next: (datav) => {\r\n          this.persona_get = datav;\r\n          console.log(this.persona_get);\r\n        },\r\n        error: (err: any) => { \r\n          console.log(err, errorMessage);\r\n        },\r\n        complete: () => { }\r\n      })\r\n  }\r\n\r\n  getPersona(id){\r\n    let errorMessage = \"La Ruta presenta fallos al hacer peticion GET -/pers_plan/mant/pepersona/catalogo/\"\r\n    return this.api.getAll('/pers_plan/mant/pepersona/'+this.userConn+'/'+id)\r\n      .subscribe({\r\n        next: (datav) => {\r\n          this.persona_get = datav;\r\n          console.log(this.persona_get);\r\n\r\n          let nombre = this.persona_get.nombre1;\r\n          let apellido = this.persona_get.apellido1;\r\n\r\n          this.persona_get.descrip = nombre+\" \"+apellido;\r\n        },\r\n        error: (err: any) => { \r\n          console.log(err, errorMessage);\r\n        },\r\n        complete: () => { }\r\n      })\r\n  }\r\n  \r\n  modalInventario(): void {\r\n    this.dialog.open(CatalogoInventarioComponent, {\r\n      width: 'auto',\r\n      height: 'auto',\r\n    });\r\n  }\r\n\r\n  modalAlmacen(): void {\r\n    this.dialog.open(ModalAlmacenComponent, {\r\n      width: 'auto',\r\n      height: 'auto',\r\n      data:{almacen:\"almacen\"}\r\n    });\r\n  }\r\n\r\n  modalPersona(): void {\r\n    this.dialog.open(PersonaCatalogoComponent, {\r\n      width: 'auto',\r\n      height: 'auto',\r\n    });\r\n  }\r\n\r\n  mandarNombre(){\r\n    this.nombre_ventana_service.disparadorDeNombreVentana.emit({\r\n      nombre_vent:this.ventana,\r\n    });\r\n  }\r\n}\r\n","<div class=\"p-2\">\r\n  <mat-card style=\"background-color: #f0f0f0;\">\r\n    <mat-card-header class=\"mb-1\">\r\n      <mat-card-title style=\"font-size: 0.8rem;\">Crear Toma de Inventario</mat-card-title>\r\n      <!-- <mat-card-subtitle>End</mat-card-subtitle> -->\r\n    </mat-card-header>\r\n\r\n    <mat-card-content>\r\n      <div class=\"row\">\r\n        <form [formGroup]=\"FormularioData\" (ngSubmit)=\"submitData()\">\r\n          <tr>\r\n            <th class=\"tg-0lax\">\r\n              <div class=\"input-group\">\r\n                <mat-label style=\"padding-right: 59px;padding-top: 3px;\"><u>ID</u></mat-label>\r\n                <input type=\"text\" style=\"width: 56% !important;\" formControlName=\"id\" [ngModel]=\"inventario_get.id\"\r\n                  (blur)=\"onLeaveIDInventario($event)\">\r\n                <div class=\"input-group-append\">\r\n                  <button class=\"btn btn-outline-primary\" type=\"button\" (click)=\"modalInventario();\"\r\n                    style=\"border-color: #093070;padding: 4px 5px 1px 5px;line-height: 0 !important;\"\r\n                    matTooltip=\"ID Inventario\">\r\n                    <i class=\"fa fa-search\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </th>\r\n            <th class=\"tg-0lax\">\r\n              <input type=\"text\" [(ngModel)]=\"num_mas_mas\" formControlName=\"numeroid\">\r\n            </th>\r\n          </tr>\r\n\r\n          <tr>\r\n            <td class=\"tg-0lax\">\r\n              <mat-label style=\"padding-right: 2px;\"><u>Fecha Desde</u></mat-label>\r\n              <input type=\"date\" style=\"width: 70%;\" formControlName=\"fechainicio\">\r\n            </td>\r\n            <td class=\"tg-0lax\">\r\n              <mat-label style=\"padding-right: 2px;\"><u>Hasta</u></mat-label>\r\n              <input type=\"date\" style=\"width: 78%;\" formControlName=\"fechafin\">\r\n            </td>\r\n          </tr>\r\n\r\n          <tr>\r\n            <td class=\"tg-0lax\">\r\n              <div class=\"input-group\">\r\n                <mat-label style=\"padding-right: 27px;padding-top: 7px;\"><u>Almacen</u></mat-label>\r\n                <input type=\"text\" style=\"width: 56% !important;\" [(ngModel)]=\"almacen_get.codigo\"\r\n                  formControlName=\"codalmacen\" (blur)=\"onLeaveAlmacen($event)\">\r\n                <div class=\"input-group-append\">\r\n                  <button class=\"btn btn-outline-primary\" type=\"button\" (click)=\"modalAlmacen();\"\r\n                    style=\"border-color: #093070;padding: 4px 5px 1px 5px;line-height: 0 !important;\"\r\n                    matTooltip=\"Buscar Almacen\">\r\n                    <i class=\"fa fa-search\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </td>\r\n            <td class=\"tg-0lax\">\r\n              <div>{{ almacen_get.descripcion }}</div>\r\n            </td>\r\n          </tr>\r\n\r\n          <tr>\r\n            <td class=\"tg-0lax\">\r\n              <div class=\"input-group\">\r\n                <mat-label style=\"padding-right: 4px;padding-top: 7px;\"><u>Responsable</u></mat-label>\r\n                <input type=\"text\" style=\"width: 56% !important;\" formControlName=\"codpersona\"\r\n                  [(ngModel)]=\"persona_get.codigo\" (blur)=\"onLeaveResponsable($event)\">\r\n                <div class=\"input-group-append\">\r\n                  <button class=\"btn btn-outline-primary\" type=\"button\" (click)=\"modalPersona();\"\r\n                    style=\"border-color: #093070;padding: 4px 5px 1px 5px;line-height: 0 !important;\"\r\n                    matTooltip=\"Buscar Responsable\">\r\n                    <i class=\"fa fa-search\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </td>\r\n            <td class=\"tg-0lax\">\r\n              <div>{{ persona_get.descrip }}</div>\r\n            </td>\r\n          </tr>\r\n\r\n          <tr>\r\n            <td class=\"tg-0lax\">\r\n              <mat-label style=\"padding-right: 7px;padding-top: 7px;\"><u>Observacion</u></mat-label>\r\n              <input type=\"text\" style=\"width: 69% !important;\" formControlName=\"obs\">\r\n            </td>\r\n          </tr>\r\n\r\n          <mat-card-actions align=\"end\">\r\n            <button mat-raised-button color=\"primary\" [disabled]=\"!FormularioData.valid\" type=\"submit\">\r\n              <i class=\"fa fa-save\"></i> &nbsp;Crear Inventario\r\n            </button>\r\n          </mat-card-actions>\r\n        </form>\r\n      </div>\r\n    </mat-card-content>\r\n  </mat-card>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}