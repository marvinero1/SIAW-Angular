{"ast":null,"code":"import { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { ModalPrecioVentaComponent } from '../../modal-precio-venta/modal-precio-venta.component';\nimport { ModalDescuentosComponent } from '../../descuentos-especiales/modal-descuentos/modal-descuentos.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@services/api.service\";\nimport * as i3 from \"../../serviciosItem/item-service.service\";\nimport * as i4 from \"ngx-spinner\";\nimport * as i5 from \"../../servicioprecioventa/servicioprecioventa.service\";\nimport * as i6 from \"../../serviciodescuento/descuento.service\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/slide-toggle\";\nimport * as i10 from \"@angular/material/card\";\nimport * as i11 from \"@angular/material/icon\";\nvar ItemSeleccionCantidadComponent = /** @class */function () {\n  function ItemSeleccionCantidadComponent(dialog, api, dialogRef, itemservice, dialogRefMatriz, spinner, dataItemSeleccionados, servicioPrecioVenta, tarifa, descuento, codcliente, codalmacen, desc_linea_seg_solicitud, fecha, codmoneda, servicioDesctEspecial) {\n    this.dialog = dialog;\n    this.api = api;\n    this.dialogRef = dialogRef;\n    this.itemservice = itemservice;\n    this.dialogRefMatriz = dialogRefMatriz;\n    this.spinner = spinner;\n    this.dataItemSeleccionados = dataItemSeleccionados;\n    this.servicioPrecioVenta = servicioPrecioVenta;\n    this.tarifa = tarifa;\n    this.descuento = descuento;\n    this.codcliente = codcliente;\n    this.codalmacen = codalmacen;\n    this.desc_linea_seg_solicitud = desc_linea_seg_solicitud;\n    this.fecha = fecha;\n    this.codmoneda = codmoneda;\n    this.servicioDesctEspecial = servicioDesctEspecial;\n    this.tarifa_get_unico = [];\n    this.descuentos_get = [];\n    this.descuentos_get_copied = [];\n    this.first_descuentos_get = [];\n    this.tarifa_get_unico_copied = [];\n    this.cod_precio_venta_modal_first = [];\n    this.dataItemSeleccionados_get = [];\n    this.cod_descuento_modal = [];\n    this.cod_precio_venta_modal = [];\n    this.isCheckedCantidad = true;\n    this.isCheckedEmpaque = false;\n    this.items_post = [];\n    this.dataItemSeleccionados_get = dataItemSeleccionados.dataItemSeleccionados;\n    console.log(this.dataItemSeleccionados_get);\n    this.userConn = localStorage.getItem(\"user_conn\") !== undefined ? JSON.parse(localStorage.getItem(\"user_conn\")) : null;\n    this.usuarioLogueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\n    this.tarifa_get = tarifa.tarifa;\n    this.descuento_get = descuento.descuento;\n    this.codcliente_get = codcliente.codcliente;\n    this.codalmacen_get = codalmacen.codalmacen;\n    this.desc_linea_seg_solicitud_get = desc_linea_seg_solicitud.desc_linea_seg_solicitud;\n    this.fecha_get = fecha.fecha;\n    this.codmoneda_get = codmoneda.codmoneda;\n  }\n  ItemSeleccionCantidadComponent.prototype.ngOnInit = function () {\n    var _this = this;\n    this.getTarifa();\n    this.getDescuentos();\n    // descuentos\n    this.servicioDesctEspecial.disparadorDeDescuentos.subscribe(function (data) {\n      console.log(\"Recibiendo Descuento: \", data);\n      _this.cod_descuento_modal = data.descuento;\n      _this.cod_descuento_modal_codigo = _this.cod_descuento_modal.codigo;\n    });\n    // findescuentos\n    // precio_venta\n    this.servicioPrecioVenta.disparadorDePrecioVenta.subscribe(function (data) {\n      console.log(\"Recibiendo Vendedor: \", data);\n      _this.cod_precio_venta_modal = data.precio_venta;\n      _this.cod_precio_venta_modal_codigo = data.precio_venta.codigo;\n    });\n    // fin_precio_venta\n  };\n\n  ItemSeleccionCantidadComponent.prototype.getTarifa = function () {\n    var _this = this;\n    var errorMessage = \"La Ruta o el servidor presenta fallos al hacer peticion GET /inventario/mant/intarifa/catalogo/\";\n    return this.api.getAll('/inventario/mant/intarifa/catalogo/' + this.userConn + \"/\" + this.usuarioLogueado).subscribe({\n      next: function (datav) {\n        _this.tarifa_get_unico = datav;\n        _this.tarifa_get_unico_copied = _this.tarifa_get_unico.slice();\n        _this.cod_precio_venta_modal_first = _this.tarifa_get_unico_copied.shift();\n        _this.cod_precio_venta_modal_codigo = _this.cod_precio_venta_modal_first.codigo;\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n      },\n      complete: function () {}\n    });\n  };\n  ItemSeleccionCantidadComponent.prototype.getDescuentos = function () {\n    var _this = this;\n    var errorMessage;\n    errorMessage = \"La Ruta o el servidor presenta fallos al hacer peticion GET --vedescuento/catalogo\";\n    return this.api.getAll('/venta/mant/vedescuento/' + this.userConn).subscribe({\n      next: function (datav) {\n        _this.descuentos_get = datav;\n        //console.log(this.descuentos_get);\n        _this.descuentos_get_copied = _this.descuentos_get.slice();\n        _this.first_descuentos_get = _this.descuentos_get_copied.shift();\n        _this.cod_descuento_modal_codigo = _this.first_descuentos_get.codigo;\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n      },\n      complete: function () {}\n    });\n  };\n  ItemSeleccionCantidadComponent.prototype.empaqueHabilitar = function () {\n    console.log(this.isCheckedEmpaque);\n    if (!this.isCheckedEmpaque) {\n      this.isCheckedCantidad = true;\n    } else {\n      this.isCheckedCantidad = false;\n    }\n  };\n  ItemSeleccionCantidadComponent.prototype.cantidadHabilitar = function () {\n    console.log(this.isCheckedCantidad);\n    if (this.isCheckedEmpaque) {\n      this.isCheckedEmpaque = false;\n    } else {\n      this.isCheckedEmpaque = true;\n    }\n  };\n  ItemSeleccionCantidadComponent.prototype.onLeavePrecioVenta = function (event) {\n    var inputValue = event.target.value;\n    var entero = Number(inputValue);\n    // Verificar si el valor ingresado está presente en los objetos del array\n    var encontrado = this.tarifa_get_unico.some(function (objeto) {\n      return objeto.codigo === entero;\n    });\n    if (!encontrado) {\n      // Si el valor no está en el array, dejar el campo vacío\n      event.target.value = '';\n      console.log(\"NO ENCONTRADO VALOR DE INPUT\");\n    } else {\n      event.target.value = entero;\n    }\n  };\n  ItemSeleccionCantidadComponent.prototype.onLeaveDesctEspecial = function (event) {\n    var inputValue = event.target.value;\n    var entero = Number(inputValue);\n    // Verificar si el valor ingresado está presente en los objetos del array\n    var encontrado = this.descuentos_get.some(function (objeto) {\n      return objeto.codigo === entero;\n    });\n    if (!encontrado) {\n      // Si el valor no está en el array, dejar el campo vacío\n      event.target.value = '';\n      console.log(\"NO ENCONTRADO VALOR DE INPUT\");\n    } else {\n      event.target.value = entero;\n    }\n  };\n  ItemSeleccionCantidadComponent.prototype.agregarItems = function () {\n    var _this = this;\n    if (this.isCheckedCantidad) {\n      var a = this.dataItemSeleccionados_get.map(function (elemento) {\n        return {\n          cantidad: _this.cantidad_input,\n          cantidad_pedida: _this.cantidad_input,\n          codalmacen: _this.codalmacen_get,\n          codcliente: _this.codcliente_get,\n          coditem: elemento,\n          codmoneda: _this.codmoneda_get,\n          desc_linea_seg_solicitud: _this.desc_linea_seg_solicitud_get,\n          descuento: _this.descuento_get,\n          fecha: _this.fecha_get,\n          opcion_nivel: \"\",\n          tarifa: _this.tarifa_get\n        };\n      });\n      this.mandarItemFalse(a);\n    } else {\n      console.log(\"hola lola en false para cantidad\");\n      var b = this.dataItemSeleccionados_get.map(function (elemento) {\n        return {\n          cantidad: 0,\n          cantidad_pedida: 0,\n          codalmacen: _this.codalmacen_get,\n          codcliente: _this.codcliente_get,\n          coditem: elemento,\n          codmoneda: _this.codmoneda_get,\n          desc_linea_seg_solicitud: _this.desc_linea_seg_solicitud_get,\n          descuento: _this.cod_descuento_modal_codigo,\n          fecha: _this.fecha_get,\n          opcion_nivel: \"\",\n          tarifa: _this.cod_precio_venta_modal_codigo\n        };\n      });\n      this.mandarItem(b);\n    }\n  };\n  ItemSeleccionCantidadComponent.prototype.mandarItem = function (array) {\n    var _this = this;\n    var errorMessage = \"La Ruta o el servidor presenta fallos al hacer la creacion\" + \"Ruta:- /venta/transac/veproforma/getItemMatriz_AnadirbyGroup/\";\n    return this.api.create(\"/venta/transac/veproforma/getItemMatriz_AnadirbyGroup/\" + this.userConn + \"/true\", array).subscribe({\n      next: function (datav) {\n        _this.items_post = datav;\n        console.log('data', datav);\n        _this.spinner.show();\n        setTimeout(function () {\n          _this.spinner.hide();\n        }, 1500);\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n      },\n      complete: function () {\n        _this.enviarItemsAlServicio(_this.items_post, array);\n        _this.dialogRef.close();\n        _this.dialogRefMatriz.close();\n        _this.num_hoja = 0;\n      }\n    });\n  };\n  ItemSeleccionCantidadComponent.prototype.mandarItemFalse = function (array) {\n    var _this = this;\n    console.log(array);\n    var errorMessage = \"La Ruta o el servidor presenta fallos al hacer la creacion\" + \"Ruta:- /venta/transac/veproforma/getItemMatriz_AnadirbyGroup/\";\n    return this.api.create(\"/venta/transac/veproforma/getItemMatriz_AnadirbyGroup/\" + this.userConn + \"/false\", array).subscribe({\n      next: function (datav) {\n        _this.items_post = datav;\n        console.log('data', datav);\n        _this.spinner.show();\n        setTimeout(function () {\n          _this.spinner.hide();\n        }, 1500);\n      },\n      error: function (err) {\n        console.log(err, errorMessage);\n      },\n      complete: function () {\n        _this.enviarItemsAlServicio(_this.items_post, array);\n        _this.dialogRef.close();\n        _this.dialogRefMatriz.close();\n        _this.num_hoja = 0;\n      }\n    });\n  };\n  ItemSeleccionCantidadComponent.prototype.enviarItemsAlServicio = function (items, items_sin_proceso) {\n    this.itemservice.enviarItems(items);\n    this.itemservice.enviarItemsSinProcesar(items_sin_proceso);\n  };\n  ItemSeleccionCantidadComponent.prototype.modalPrecioVenta = function () {\n    this.dialog.open(ModalPrecioVentaComponent, {\n      width: 'auto',\n      height: 'auto'\n    });\n  };\n  ItemSeleccionCantidadComponent.prototype.modalDescuentoEspecial = function () {\n    this.dialog.open(ModalDescuentosComponent, {\n      width: 'auto',\n      height: 'auto'\n    });\n  };\n  ItemSeleccionCantidadComponent.prototype.close = function () {\n    this.dialogRef.close();\n  };\n  ItemSeleccionCantidadComponent.ɵfac = function ItemSeleccionCantidadComponent_Factory(t) {\n    return new (t || ItemSeleccionCantidadComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i3.ItemServiceService), i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i4.NgxSpinnerService), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i5.ServicioprecioventaService), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i6.DescuentoService));\n  };\n  ItemSeleccionCantidadComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ItemSeleccionCantidadComponent,\n    selectors: [[\"app-item-seleccion-cantidad\"]],\n    decls: 47,\n    vars: 8,\n    consts: [[1, \"content\"], [1, \"container-fluid\"], [1, \"row\"], [1, \"col-md-9\"], [2, \"font-size\", \"0.75rem\"], [1, \"col-md-3\", \"float-right\"], [1, \"text-right\"], [\"color\", \"primary\", 3, \"click\"], [1, \"p-2\"], [1, \"col-md-4\"], [1, \"example-margin\", 3, \"ngModel\", \"ngModelChange\", \"click\"], [1, \"col-md-8\"], [\"type\", \"text\", 3, \"disabled\", \"ngModel\", \"ngModelChange\"], [1, \"input-group\"], [1, \"input-group-prepend\"], [1, \"form-control-sm\", 2, \"margin-right\", \"5px\"], [\"type\", \"text\", 3, \"ngModel\", \"disabled\", \"ngModelChange\", \"blur\"], [1, \"input-group-append\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-primary\", \"form-control-sm\", 2, \"border-color\", \"#093070\", \"padding\", \"5px\", 3, \"click\"], [1, \"fa\", \"fa-search\"], [1, \"form-control-sm\", 2, \"margin-right\", \"0px\"], [2, \"text-align\", \"center\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [1, \"fa\", \"fa-cart-plus\"]],\n    template: function ItemSeleccionCantidadComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1);\n        i0.ɵɵelement(2, \"br\");\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"mat-card-title\", 4);\n        i0.ɵɵtext(6, \"Cantidad a A\\u00F1adir\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"mat-icon\", 7);\n        i0.ɵɵlistener(\"click\", function ItemSeleccionCantidadComponent_Template_mat_icon_click_9_listener() {\n          return ctx.close();\n        });\n        i0.ɵɵtext(10, \"close\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(11, \"div\", 8)(12, \"div\", 2)(13, \"div\", 9)(14, \"mat-slide-toggle\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function ItemSeleccionCantidadComponent_Template_mat_slide_toggle_ngModelChange_14_listener($event) {\n          return ctx.isCheckedCantidad = $event;\n        })(\"click\", function ItemSeleccionCantidadComponent_Template_mat_slide_toggle_click_14_listener() {\n          return ctx.cantidadHabilitar();\n        });\n        i0.ɵɵtext(15, \" Cantidad Fija \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"div\", 11)(17, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function ItemSeleccionCantidadComponent_Template_input_ngModelChange_17_listener($event) {\n          return ctx.cantidad_input = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(18, \"div\", 2)(19, \"div\", 9)(20, \"mat-slide-toggle\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function ItemSeleccionCantidadComponent_Template_mat_slide_toggle_ngModelChange_20_listener($event) {\n          return ctx.isCheckedEmpaque = $event;\n        })(\"click\", function ItemSeleccionCantidadComponent_Template_mat_slide_toggle_click_20_listener() {\n          return ctx.empaqueHabilitar();\n        });\n        i0.ɵɵtext(21, \"Empaque Minimo \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"div\", 11)(23, \"div\", 13)(24, \"div\", 14)(25, \"span\", 15)(26, \"u\");\n        i0.ɵɵtext(27, \"Precio de Ventas\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(28, \"input\", 16);\n        i0.ɵɵlistener(\"ngModelChange\", function ItemSeleccionCantidadComponent_Template_input_ngModelChange_28_listener($event) {\n          return ctx.cod_precio_venta_modal_codigo = $event;\n        })(\"blur\", function ItemSeleccionCantidadComponent_Template_input_blur_28_listener($event) {\n          return ctx.onLeavePrecioVenta($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"div\", 17)(30, \"a\", 18);\n        i0.ɵɵlistener(\"click\", function ItemSeleccionCantidadComponent_Template_a_click_30_listener() {\n          return ctx.modalPrecioVenta();\n        });\n        i0.ɵɵelement(31, \"i\", 19);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(32, \"div\", 13)(33, \"div\", 14)(34, \"span\", 20)(35, \"u\");\n        i0.ɵɵtext(36, \"Desct. Especiales\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(37, \"input\", 16);\n        i0.ɵɵlistener(\"ngModelChange\", function ItemSeleccionCantidadComponent_Template_input_ngModelChange_37_listener($event) {\n          return ctx.cod_descuento_modal_codigo = $event;\n        })(\"blur\", function ItemSeleccionCantidadComponent_Template_input_blur_37_listener($event) {\n          return ctx.onLeaveDesctEspecial($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"div\", 17)(39, \"a\", 18);\n        i0.ɵɵlistener(\"click\", function ItemSeleccionCantidadComponent_Template_a_click_39_listener() {\n          return ctx.modalDescuentoEspecial();\n        });\n        i0.ɵɵelement(40, \"i\", 19);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(41, \"br\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(42, \"br\");\n        i0.ɵɵelementStart(43, \"div\", 21)(44, \"button\", 22);\n        i0.ɵɵlistener(\"click\", function ItemSeleccionCantidadComponent_Template_button_click_44_listener() {\n          return ctx.agregarItems();\n        });\n        i0.ɵɵelement(45, \"i\", 23);\n        i0.ɵɵtext(46, \" OK \");\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngModel\", ctx.isCheckedCantidad);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", ctx.isCheckedEmpaque)(\"ngModel\", ctx.cantidad_input);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.isCheckedEmpaque);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngModel\", ctx.cod_precio_venta_modal_codigo)(\"disabled\", ctx.isCheckedCantidad);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngModel\", ctx.cod_descuento_modal_codigo)(\"disabled\", ctx.isCheckedCantidad);\n      }\n    },\n    dependencies: [i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgModel, i8.MatButton, i9.MatSlideToggle, i10.MatCardTitle, i11.MatIcon],\n    styles: [\".content[_ngcontent-%COMP%], .mat-mdc-dialog-container[_ngcontent-%COMP%]   .mdc-dialog__surface[_ngcontent-%COMP%] {\\n  background-color: #ffe0c0 !important;\\n}\\n\\n  .mat-mdc-dialog-container .mdc-dialog__surface {\\n  background-color: #ffe0c0;\\n  height: 100% !important;\\n}\\n\\n.form-control-sm[_ngcontent-%COMP%] {\\n  height: calc(1.5rem + 0px) !important;\\n  padding: 0rem 0.5em !important;\\n}\\n/*# sourceURL=webpack://./src/app/components/mantenimiento/ventas/matriz-items/item-seleccion-cantidad/item-seleccion-cantidad.component.scss */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9tYW50ZW5pbWllbnRvL3ZlbnRhcy9tYXRyaXotaXRlbXMvaXRlbS1zZWxlY2Npb24tY2FudGlkYWQvaXRlbS1zZWxlY2Npb24tY2FudGlkYWQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxvQ0FBQTtBQUNGOztBQUVBO0VBQ0UseUJBQUE7RUFDQSx1QkFBQTtBQUNGOztBQUVBO0VBQ0UscUNBQUE7RUFDQSw4QkFBQTtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRlbnQsIC5tYXQtbWRjLWRpYWxvZy1jb250YWluZXIgLm1kYy1kaWFsb2dfX3N1cmZhY2Uge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZlMGMwICFpbXBvcnRhbnQ7XG59XG5cbjo6bmctZGVlcCAubWF0LW1kYy1kaWFsb2ctY29udGFpbmVyIC5tZGMtZGlhbG9nX19zdXJmYWNlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZTBjMDtcbiAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7XG59XG5cbi5mb3JtLWNvbnRyb2wtc20ge1xuICBoZWlnaHQ6IGNhbGMoMS41cmVtICsgMHB4KSAhaW1wb3J0YW50O1xuICBwYWRkaW5nOiAwcmVtIDAuNWVtICFpbXBvcnRhbnQ7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n  return ItemSeleccionCantidadComponent;\n}();\nexport { ItemSeleccionCantidadComponent };","map":{"version":3,"mappings":"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","names":["MAT_DIALOG_DATA","ModalPrecioVentaComponent","ModalDescuentosComponent","dialog","api","dialogRef","itemservice","dialogRefMatriz","spinner","dataItemSeleccionados","servicioPrecioVenta","tarifa","descuento","codcliente","codalmacen","desc_linea_seg_solicitud","fecha","codmoneda","servicioDesctEspecial","dataItemSeleccionados_get","console","log","userConn","localStorage","getItem","undefined","JSON","parse","usuarioLogueado","tarifa_get","descuento_get","codcliente_get","codalmacen_get","desc_linea_seg_solicitud_get","fecha_get","codmoneda_get","ItemSeleccionCantidadComponent","getTarifa","getDescuentos","disparadorDeDescuentos","subscribe","data","_this","cod_descuento_modal","cod_descuento_modal_codigo","codigo","disparadorDePrecioVenta","cod_precio_venta_modal","precio_venta","cod_precio_venta_modal_codigo","errorMessage","getAll","next","datav","tarifa_get_unico","tarifa_get_unico_copied","slice","cod_precio_venta_modal_first","shift","error","err","complete","descuentos_get","descuentos_get_copied","first_descuentos_get","isCheckedEmpaque","isCheckedCantidad","event","inputValue","target","value","entero","Number","encontrado","some","a","map","elemento","cantidad","cantidad_input","cantidad_pedida","coditem","opcion_nivel","mandarItemFalse","b","mandarItem","array","create","items_post","show","setTimeout","hide","enviarItemsAlServicio","close","num_hoja","items","items_sin_proceso","enviarItems","enviarItemsSinProcesar","open","width","height","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\laragon\\www\\SIAW-Angular-B\\src\\app\\components\\mantenimiento\\ventas\\matriz-items\\item-seleccion-cantidad\\item-seleccion-cantidad.component.ts","C:\\laragon\\www\\SIAW-Angular-B\\src\\app\\components\\mantenimiento\\ventas\\matriz-items\\item-seleccion-cantidad\\item-seleccion-cantidad.component.html"],"sourcesContent":["import { Component, Inject, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { ApiService } from '@services/api.service';\nimport { ModalPrecioVentaComponent } from '../../modal-precio-venta/modal-precio-venta.component';\nimport { ModalDescuentosComponent } from '../../descuentos-especiales/modal-descuentos/modal-descuentos.component';\nimport { DescuentoService } from '../../serviciodescuento/descuento.service';\nimport { ServicioprecioventaService } from '../../servicioprecioventa/servicioprecioventa.service';\nimport { ItemServiceService } from '../../serviciosItem/item-service.service';\nimport { MatrizItemsComponent } from '../matriz-items.component';\nimport { NgxSpinnerService } from 'ngx-spinner';\n\n@Component({\n  selector: 'app-item-seleccion-cantidad',\n  templateUrl: './item-seleccion-cantidad.component.html',\n  styleUrls: ['./item-seleccion-cantidad.component.scss']\n})\nexport class ItemSeleccionCantidadComponent implements OnInit {\n\n  cod_precio_venta_modal_codigo: number;\n  cod_descuento_modal_codigo: number;\n  num_hoja: number;\n\n  tarifa_get_unico: any = [];\n  descuentos_get: any = [];\n  descuentos_get_copied: any = [];\n  first_descuentos_get: any = [];\n\n  tarifa_get_unico_copied: any = [];\n  cod_precio_venta_modal_first: any = [];\n  dataItemSeleccionados_get: any = [];\n  cod_descuento_modal: any = [];\n  cod_precio_venta_modal: any = [];\n\n  cantidad_input: number;\n\n  isCheckedCantidad: boolean = true;\n  isCheckedEmpaque: boolean = false;\n\n  userConn: any;\n  usuarioLogueado: any;\n\n  items_post: any = [];\n\n  tarifa_get: any;\n  descuento_get: any;\n  codcliente_get: any;\n  codalmacen_get: any;\n  desc_linea_seg_solicitud_get: any;\n  fecha_get: any;\n  codmoneda_get: any;\n\n  constructor(public dialog: MatDialog, private api: ApiService, public dialogRef: MatDialogRef<ItemSeleccionCantidadComponent>,\n    public itemservice: ItemServiceService, public dialogRefMatriz: MatDialogRef<MatrizItemsComponent>, private spinner: NgxSpinnerService,\n    @Inject(MAT_DIALOG_DATA) public dataItemSeleccionados: any, public servicioPrecioVenta: ServicioprecioventaService,\n    @Inject(MAT_DIALOG_DATA) public tarifa: any, @Inject(MAT_DIALOG_DATA) public descuento: any,\n    @Inject(MAT_DIALOG_DATA) public codcliente: any, @Inject(MAT_DIALOG_DATA) public codalmacen: any,\n    @Inject(MAT_DIALOG_DATA) public desc_linea_seg_solicitud: any, @Inject(MAT_DIALOG_DATA) public fecha: any,\n    @Inject(MAT_DIALOG_DATA) public codmoneda: any, public servicioDesctEspecial: DescuentoService) {\n\n    this.dataItemSeleccionados_get = dataItemSeleccionados.dataItemSeleccionados;\n    console.log(this.dataItemSeleccionados_get);\n\n    this.userConn = localStorage.getItem(\"user_conn\") !== undefined ? JSON.parse(localStorage.getItem(\"user_conn\")) : null;\n    this.usuarioLogueado = localStorage.getItem(\"usuario_logueado\") !== undefined ? JSON.parse(localStorage.getItem(\"usuario_logueado\")) : null;\n\n    this.tarifa_get = tarifa.tarifa;\n    this.descuento_get = descuento.descuento;\n    this.codcliente_get = codcliente.codcliente;\n    this.codalmacen_get = codalmacen.codalmacen;\n    this.desc_linea_seg_solicitud_get = desc_linea_seg_solicitud.desc_linea_seg_solicitud;\n    this.fecha_get = fecha.fecha;\n    this.codmoneda_get = codmoneda.codmoneda;\n  }\n\n  ngOnInit() {\n    this.getTarifa();\n    this.getDescuentos();\n\n    // descuentos\n    this.servicioDesctEspecial.disparadorDeDescuentos.subscribe(data => {\n      console.log(\"Recibiendo Descuento: \", data);\n      this.cod_descuento_modal = data.descuento;\n      this.cod_descuento_modal_codigo = this.cod_descuento_modal.codigo\n    });\n    // findescuentos\n\n    // precio_venta\n    this.servicioPrecioVenta.disparadorDePrecioVenta.subscribe(data => {\n      console.log(\"Recibiendo Vendedor: \", data);\n      this.cod_precio_venta_modal = data.precio_venta;\n      this.cod_precio_venta_modal_codigo = data.precio_venta.codigo\n    });\n    // fin_precio_venta\n  }\n\n  getTarifa() {\n    let errorMessage: string = \"La Ruta o el servidor presenta fallos al hacer peticion GET /inventario/mant/intarifa/catalogo/\";\n    return this.api.getAll('/inventario/mant/intarifa/catalogo/' + this.userConn + \"/\" + this.usuarioLogueado)\n      .subscribe({\n        next: (datav) => {\n          this.tarifa_get_unico = datav;\n          this.tarifa_get_unico_copied = this.tarifa_get_unico.slice();\n          this.cod_precio_venta_modal_first = this.tarifa_get_unico_copied.shift();\n          this.cod_precio_venta_modal_codigo = this.cod_precio_venta_modal_first.codigo;\n        },\n\n        error: (err: any) => {\n          console.log(err, errorMessage);\n        },\n        complete: () => { }\n      })\n  }\n\n  getDescuentos() {\n    let errorMessage: string;\n    errorMessage = \"La Ruta o el servidor presenta fallos al hacer peticion GET --vedescuento/catalogo\";\n\n    return this.api.getAll('/venta/mant/vedescuento/' + this.userConn)\n      .subscribe({\n        next: (datav) => {\n          this.descuentos_get = datav;\n          //console.log(this.descuentos_get);\n\n          this.descuentos_get_copied = this.descuentos_get.slice();\n          this.first_descuentos_get = this.descuentos_get_copied.shift();\n          this.cod_descuento_modal_codigo = this.first_descuentos_get.codigo;\n        },\n        error: (err: any) => {\n          console.log(err, errorMessage);\n        },\n        complete: () => { }\n      })\n  }\n\n  empaqueHabilitar() {\n    console.log(this.isCheckedEmpaque);\n\n    if (!this.isCheckedEmpaque) {\n      this.isCheckedCantidad = true;\n    } else {\n      this.isCheckedCantidad = false;\n    }\n  }\n\n  cantidadHabilitar() {\n    console.log(this.isCheckedCantidad);\n\n    if (this.isCheckedEmpaque) {\n      this.isCheckedEmpaque = false;\n\n    } else {\n      this.isCheckedEmpaque = true;\n    }\n  }\n\n  onLeavePrecioVenta(event: any) {\n    const inputValue = event.target.value;\n    let entero = Number(inputValue);\n\n    // Verificar si el valor ingresado está presente en los objetos del array\n    const encontrado = this.tarifa_get_unico.some(objeto => objeto.codigo === entero);\n\n    if (!encontrado) {\n      // Si el valor no está en el array, dejar el campo vacío\n      event.target.value = '';\n      console.log(\"NO ENCONTRADO VALOR DE INPUT\");\n    } else {\n      event.target.value = entero;\n    }\n  }\n\n  onLeaveDesctEspecial(event: any) {\n    const inputValue = event.target.value;\n    let entero = Number(inputValue);\n\n    // Verificar si el valor ingresado está presente en los objetos del array\n    const encontrado = this.descuentos_get.some(objeto => objeto.codigo === entero);\n\n    if (!encontrado) {\n      // Si el valor no está en el array, dejar el campo vacío\n      event.target.value = '';\n      console.log(\"NO ENCONTRADO VALOR DE INPUT\");\n    } else {\n      event.target.value = entero;\n    }\n  }\n\n\n\n  agregarItems() {\n    if (this.isCheckedCantidad) {\n      let a = this.dataItemSeleccionados_get.map((elemento) => {\n        return {\n          cantidad: this.cantidad_input,\n          cantidad_pedida: this.cantidad_input,\n          codalmacen: this.codalmacen_get,\n          codcliente: this.codcliente_get,\n          coditem: elemento,\n          codmoneda: this.codmoneda_get,\n          desc_linea_seg_solicitud: this.desc_linea_seg_solicitud_get,\n          descuento: this.descuento_get,\n          fecha: this.fecha_get,\n          opcion_nivel: \"\",\n          tarifa: this.tarifa_get,\n        }\n      })\n      this.mandarItemFalse(a);\n    } else {\n      console.log(\"hola lola en false para cantidad\")\n      let b = this.dataItemSeleccionados_get.map((elemento) => {\n        return {\n          cantidad: 0,\n          cantidad_pedida: 0,\n          codalmacen: this.codalmacen_get,\n          codcliente: this.codcliente_get,\n          coditem: elemento,\n          codmoneda: this.codmoneda_get,\n          desc_linea_seg_solicitud: this.desc_linea_seg_solicitud_get,\n          descuento: this.cod_descuento_modal_codigo,\n          fecha: this.fecha_get,\n          opcion_nivel: \"\",\n          tarifa: this.cod_precio_venta_modal_codigo,\n        }\n      })\n      this.mandarItem(b);\n    }\n  }\n\n  mandarItem(array) {\n    let errorMessage = \"La Ruta o el servidor presenta fallos al hacer la creacion\" + \"Ruta:- /venta/transac/veproforma/getItemMatriz_AnadirbyGroup/\";\n    return this.api.create(\"/venta/transac/veproforma/getItemMatriz_AnadirbyGroup/\" + this.userConn + \"/true\", array)\n      .subscribe({\n        next: (datav) => {\n          this.items_post = datav;\n          console.log('data', datav);\n\n          this.spinner.show();\n          setTimeout(() => {\n            this.spinner.hide();\n          }, 1500);\n        },\n\n        error: (err) => {\n          console.log(err, errorMessage);\n        },\n        complete: () => {\n          this.enviarItemsAlServicio(this.items_post, array);\n          this.dialogRef.close();\n          this.dialogRefMatriz.close();\n          this.num_hoja = 0;\n        }\n      })\n  }\n\n  mandarItemFalse(array) {\n    console.log(array);\n\n    let errorMessage = \"La Ruta o el servidor presenta fallos al hacer la creacion\" + \"Ruta:- /venta/transac/veproforma/getItemMatriz_AnadirbyGroup/\";\n    return this.api.create(\"/venta/transac/veproforma/getItemMatriz_AnadirbyGroup/\" + this.userConn + \"/false\", array)\n      .subscribe({\n        next: (datav) => {\n          this.items_post = datav;\n          console.log('data', datav);\n\n          this.spinner.show();\n          setTimeout(() => {\n            this.spinner.hide();\n          }, 1500);\n        },\n\n        error: (err) => {\n          console.log(err, errorMessage);\n        },\n        complete: () => {\n          this.enviarItemsAlServicio(this.items_post, array);\n          this.dialogRef.close();\n          this.dialogRefMatriz.close();\n          this.num_hoja = 0;\n        }\n      })\n  }\n\n  enviarItemsAlServicio(items: any[], items_sin_proceso: any[]) {\n    this.itemservice.enviarItems(items);\n\n    this.itemservice.enviarItemsSinProcesar(items_sin_proceso);\n  }\n\n  modalPrecioVenta(): void {\n    this.dialog.open(ModalPrecioVentaComponent, {\n      width: 'auto',\n      height: 'auto',\n    });\n  }\n\n  modalDescuentoEspecial(): void {\n    this.dialog.open(ModalDescuentosComponent, {\n      width: 'auto',\n      height: 'auto',\n    });\n  }\n\n  close() {\n    this.dialogRef.close();\n  }\n}\n","<section class=\"content\">\n  <div class=\"container-fluid\"><br>\n    <div class=\"row\">\n      <div class=\"col-md-9\">\n        <mat-card-title style=\"font-size: 0.75rem;\">Cantidad a Añadir</mat-card-title>\n      </div>\n      <div class=\"col-md-3 float-right\">\n        <div class=\"text-right\">\n          <mat-icon color=\"primary\" (click)=\"close();\">close</mat-icon>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"p-2\">\n      <div class=\"row\">\n        <div class=\"col-md-4\">\n          <mat-slide-toggle class=\"example-margin\" [(ngModel)]=\"isCheckedCantidad\" (click)=\"cantidadHabilitar();\">\n            Cantidad Fija </mat-slide-toggle>\n        </div>\n        <div class=\"col-md-8\">\n          <input type=\"text\" [disabled]=\"isCheckedEmpaque\" [(ngModel)]=\"cantidad_input\">\n        </div>\n      </div>\n\n      <div class=\"row\">\n        <div class=\"col-md-4\">\n          <mat-slide-toggle class=\"example-margin\" [(ngModel)]=\"isCheckedEmpaque\" (click)=\"empaqueHabilitar();\">Empaque\n            Minimo </mat-slide-toggle>\n        </div>\n        <div class=\"col-md-8\">\n          <div class=\"input-group\">\n            <div class=\"input-group-prepend\">\n              <span class=\"form-control-sm\" style=\"margin-right: 5px;\"><u>Precio de Ventas</u> </span>\n            </div>\n\n            <input type=\"text\" [(ngModel)]=\"cod_precio_venta_modal_codigo\" (blur)=\"onLeavePrecioVenta($event)\"\n              [disabled]=\"isCheckedCantidad\">\n\n            <div class=\"input-group-append\">\n              <a class=\"btn btn-outline-primary form-control-sm\" type=\"button\"\n                style=\"border-color: #093070;padding: 5px;\" (click)=\"modalPrecioVenta();\"><i class=\"fa fa-search\"></i>\n              </a>\n            </div>\n          </div>\n\n          <div class=\"input-group\">\n            <div class=\"input-group-prepend\">\n              <span class=\"form-control-sm\" style=\"margin-right: 0px;\"><u>Desct. Especiales</u> </span>\n            </div>\n\n            <input type=\"text\" [(ngModel)]=\"cod_descuento_modal_codigo\" [disabled]=\"isCheckedCantidad\"\n              (blur)=\"onLeaveDesctEspecial($event)\">\n\n            <div class=\"input-group-append\">\n              <a class=\"btn btn-outline-primary form-control-sm\" type=\"button\"\n                style=\"border-color: #093070;padding: 5px;\" (click)=\"modalDescuentoEspecial();\">\n                <i class=\"fa fa-search\"></i>\n              </a>\n            </div><br>\n          </div>\n        </div>\n      </div><br>\n\n      <div style=\"text-align: center;\">\n        <!-- <button mat-raised-button color=\"warn\" (click)=\"close();\"><i class=\"fa fa-times\"></i> Cancelar </button>&nbsp; -->\n        <button mat-raised-button color=\"primary\" (click)=\"agregarItems();\">\n          <i class=\"fa fa-cart-plus\"></i> OK\n        </button>\n      </div>\n    </div>\n  </div>\n</section>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}